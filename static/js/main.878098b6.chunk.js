(this.webpackJsonpCondution=this.webpackJsonpCondution||[]).push([[1],{113:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return m}));var n=a(1),r=a.n(n),s=a(18),i=a(4),o=a(23),c=a(0),u=a.n(c),l=a(152),p=a(51),d=(a(170),a(47)),f=function(e){var t=Object(c.useState)([]),a=Object(o.a)(t,2),n=a[0],f=a[1],m=Object(c.useRef)(),h=Object(c.useRef)(),g=Object(c.useRef)(),v=Object(c.useRef)(),b=Object(c.useState)(!0),y=Object(o.a)(b,2),k=y[0],w=y[1],j=e.list.map((function(e){return u.a.createRef()})),x=function(e,t,a,n,r){return function(s){return e===s?{y:42*((-1!==a.indexOf(s)?a.indexOf(s):s)-s)+(r?t-42*(a.indexOf(s)-s):0),zIndex:1e3,config:{tension:100,friction:2,mass:1,clamp:!0},immediate:n}:{y:42*((-1!==a.indexOf(s)?a.indexOf(s):s)-s),zIndex:0,immediate:n}}},E=Object(p.d)(e.list.length,x(-1,0,m.current,!0)),O=Object(o.a)(E,3),D=O[0],S=O[1];O[2];Object(c.useEffect)((function(){m.current=e.list.map((function(e,t){return t})),h.current=0,g.current=0,S(x(-1,0,m.current,!0))}),[e.list,e.uid]);var N=Object(l.a)(function(){var t=Object(i.a)(r.a.mark((function t(a){var i,c,u,l,p,d,v,b,y;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(o.a)(a.args,1),c=i[0],u=a.down,l=Object(o.a)(a.movement,2),l[0],p=l[1],d=a.first,v=a.last,a.tap,d&&(g.current=c,n.includes(c)||f([].concat(Object(s.a)(n),[c])),e.onSortStart&&e.onSortStart({sorted:c,sortedID:e.list[c],list:e.list})),b=(b=Math.floor(p/42))<=-c?-c:b>=e.list.length-c?e.list.length-1:b,Math.abs(b)>0&&b!==h.current&&(y=c+b,m.current.splice(g.current,1),m.current.splice(y,0,c),h.current=b,g.current=y),S(x(c,p,m.current,!1,u)),!v){t.next=13;break}return setTimeout((function(){return f(n.filter((function(e){return e!==c})))}),100),h.current=0,g.current=0,t.next=12,e.gruntman.do("macro.applyOrder",{uid:e.uid,order:m.current,items:e.list.map((function(e){return{type:"task",content:e}}))});case 12:e.onSortEnd&&e.onSortEnd({sorted:c,sortedID:e.list[c],newOrder:m.current,movementY:p,moveBy:b,list:e.list});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(void 0),{drag:{delay:100},filterTaps:!0,enabled:k});return e.list.map((function(t,a){var r=D[a];return u.a.createElement("div",{ref:function(e){v.current=e}},u.a.createElement(p.a.div,Object.assign({},N(a),{className:n.includes(a)?"drag-envelope dragging":"drag-envelope",style:{borderRadius:7,position:"relative",cursor:"pointer",zIndex:r.zIndex,transform:Object(p.b)([r.y],(function(e){return"translate3d(0,".concat(e,"px,0)")}))},onClickCapture:function(e){n.includes(a)&&e.stopPropagation()}}),u.a.createElement(d.a,{ref:j[a],tid:t,key:t+"-"+e.prefix,datapack:e.datapack,uid:e.uid,engine:e.engine,gruntman:e.gruntman,availability:e.availability[t],envelope:v,setDragEnabled:w})))}))},m=function(e){var t=Object(c.useState)([]),a=Object(o.a)(t,2),n=a[0],f=a[1],m=Object(c.useRef)(),h=Object(c.useRef)(),g=Object(c.useRef)(),v=Object(c.useRef)(),b=Object(c.useState)(!0),y=Object(o.a)(b,2),k=y[0],w=y[1],j=e.list.map((function(e){return u.a.createRef()})),x=function(e,t,a,n,r){return function(s){return e===s?{y:42*((-1!==a.indexOf(s)?a.indexOf(s):s)-s)+(r?t-42*(a.indexOf(s)-s):0),zIndex:1e3,config:{tension:100,friction:2,mass:1,clamp:!0},immediate:n}:{y:42*((-1!==a.indexOf(s)?a.indexOf(s):s)-s),zIndex:0,immediate:n}}},E=Object(p.d)(e.list.length,x(-1,0,m.current,!0)),O=Object(o.a)(E,3),D=O[0],S=O[1];O[2];Object(c.useEffect)((function(){m.current=e.list.map((function(e,t){return t})),h.current=0,g.current=0,S(x(-1,0,m.current,!0))}),[e.list,e.uid]);var N=Object(l.a)(function(){var t=Object(i.a)(r.a.mark((function t(a){var i,c,u,l,p,d,v,b,y;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(o.a)(a.args,1),c=i[0],u=a.down,l=Object(o.a)(a.movement,2),l[0],p=l[1],d=a.first,v=a.last,a.tap,d&&(g.current=c,n.includes(c)||f([].concat(Object(s.a)(n),[c])),e.onSortStart&&e.onSortStart({sorted:c,sortedID:e.list[c],list:e.list})),b=(b=Math.floor(p/42))<=-c?-c:b>=e.list.length-c?e.list.length-1:b,Math.abs(b)>0&&b!==h.current&&(y=c+b,m.current.splice(g.current,1),m.current.splice(y,0,c),h.current=b,g.current=y),S(x(c,p,m.current,!1,u)),!v){t.next=13;break}return setTimeout((function(){return f(n.filter((function(e){return e!==c})))}),100),h.current=0,g.current=0,t.next=12,e.gruntman.do("macro.applyOrder",{uid:e.uid,order:m.current,items:e.list.map((function(e){return{type:e.type,content:"project"===e.type?e.content.id:e.content}}))});case 12:e.onSortEnd&&e.onSortEnd({sorted:c,sortedID:e.list[c],newOrder:m.current,movementY:p,moveBy:b,list:e.list});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}().bind(void 0),{drag:{delay:100},filterTaps:!0,enabled:k});return e.list.map((function(t,a){var r=D[a];return"task"===t.type?u.a.createElement("div",{ref:v},u.a.createElement(p.a.div,Object.assign({},N(a),{className:n.includes(a)?"drag-envelope dragging":"drag-envelope",style:{borderRadius:7,position:"relative",cursor:"pointer",zIndex:r.zIndex,transform:Object(p.b)([r.y],(function(e){return"translate3d(0,".concat(e,"px,0)")}))},onClickCapture:function(e){n.includes(a)&&e.stopPropagation()}}),u.a.createElement(d.a,{ref:e.activeTaskID===t.content?e.activeTaskRef:j[a],tid:t.content,key:t.content+"-"+e.prefix,datapack:e.datapack,uid:e.uid,engine:e.engine,gruntman:e.gruntman,availability:e.availability[t.content],envelope:v,setDragEnabled:w}))):"project"===t.type?u.a.createElement("div",{ref:v},u.a.createElement(p.a.div,Object.assign({},N(a),{className:n.includes(a)?"drag-envelope dragging":"drag-envelope",style:{borderRadius:7,position:"relative",cursor:"pointer",zIndex:r.zIndex,transform:Object(p.b)([r.y],(function(e){return"translate3d(0,".concat(e,"px,0)")}))},onClickCapture:function(e){n.includes(a)&&e.stopPropagation()}}),u.a.createElement("a",{className:"subproject",style:{opacity:e.availability[t.content.id]?"1":"0.35"},onClick:function(){e.paginate("projects",t.content.id),e.history.push("/projects/".concat(t.content.id))}},u.a.createElement("div",null,u.a.createElement("i",{className:"far fa-arrow-alt-circle-right subproject-icon"}),u.a.createElement("div",{style:{display:"inline-block"}},e.possibleProjects[t.content.id]))))):void 0}))}},136:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},170:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},191:function(e,t,a){"use strict";(function(e){var n=a(1),r=a.n(n),s=a(4),i=a(9),o=a(10),c=a(7),u=a(11),l=a(12),p=a(6),d=a(36),f=a(81),m=a(59),h=a(21),g=a(33),v=a(0),b=a.n(v),y=a(192),k=a(196),w=a(199),j=a(200),x=a(202),E=a(203),O=a(206),D=(a(413),a(64)),S=a(39),N=Object(p.w)("electron")?Object(g.b)():Object(g.a)(),T=function(t){Object(u.a)(n,t);var a=Object(l.a)(n);function n(e){var t;return Object(i.a)(this,n),(t=a.call(this,e)).paginate=function(e,a){return t.setState({itemSelected:{item:e,id:a}})},t.state={projects:[],perspectives:[],itemSelected:{item:"upcoming",id:void 0}},S(Object(c.a)(t)),t.abtibRef=b.a.createRef(),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=new URL(document.URL),t=e.pathname.split("/"),a=e.hash.split("/");""===t[1]?this.setState({itemSelected:{item:"upcoming",id:""}}):Object(p.w)("electron")?this.setState({itemSelected:{item:a[1],id:a[2]}}):this.setState({itemSelected:{item:t[1],id:t[2]}}),this.refresh()}},{key:"componentDidUpdate",value:function(e,t,a){t.to!==this.state.to&&void 0!==this.state.to&&this.setState({sends:{to:void 0,id:void 0}})}},{key:"refresh",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.engine.db.getTopLevelProjects(this.props.uid);case 2:return t=e.sent,e.next=5,this.props.engine.db.getPerspectives(this.props.uid);case 5:a=e.sent,this.setState({projects:t[2],perspectives:a[2]});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,a=Object(p.w)("electron")?f.a:f.b;return b.a.createElement(p.g,null,b.a.createElement(a,{history:N},b.a.createElement(O.a,{paginate:this.paginate,ref:this.keybindRef,perspectives:this.state.perspectives,projects:this.state.projects,abtib:this.abtibRef}),b.a.createElement(D.a,null),b.a.createElement(p.b,{noBounce:!0,forceOverscroll:!1},b.a.createElement(p.m,{id:"main-split",contentId:"main",mode:"md"},b.a.createElement(p.d,{id:"main-menu",contentId:"main"},b.a.createElement("br",null),b.a.createElement(p.b,{id:"menu-content",className:Object(p.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal"},b.a.createElement(m.a,{to:"/upcoming",onClick:function(){return t.setState({itemSelected:{item:"upcoming",id:void 0}})}}," ",b.a.createElement("div",{className:"menu-item "+("upcoming"===this.state.itemSelected.item?"menu-item-selected":""),style:{fontSize:18}},b.a.createElement(p.c,{style:{fontSize:20},icon:d.g}),"Upcoming")),b.a.createElement(m.a,{to:"/completed",onClick:function(){return t.setState({itemSelected:{item:"completed",id:void 0}})}}," ",b.a.createElement("div",{className:"menu-item "+("completed"===this.state.itemSelected.item?"menu-item-selected":""),style:{fontSize:18}},b.a.createElement(p.c,{style:{fontSize:20,transform:"translateY(3.5px)"},icon:d.d}),"Completed")),b.a.createElement(m.a,{to:"/calendar",onClick:function(){return t.setState({itemSelected:{item:"calendar",id:void 0}})}}," ",b.a.createElement("div",{className:"menu-item "+("calendar"===this.state.itemSelected.item?"menu-item-selected":""),style:{fontSize:18}},b.a.createElement(p.c,{style:{fontSize:20,transform:"translateY(3.5px)"},icon:d.b}),"Calendar")),b.a.createElement("div",{className:"menu-sublabel menu-decoration"},"Perspectives ",b.a.createElement("a",{onClick:function(){Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.gruntman.do("perspective.create",{uid:this.props.uid});case 2:t=e.sent.pid,N.push("/perspectives/".concat(t,"/do")),this.paginate("perspectives",t),this.refresh();case 6:case"end":return e.stop()}}),e,this)}))).bind(t)()},className:"fa fa-plus add"})),this.state.perspectives.map((function(e){return b.a.createElement(m.a,{key:e.id,to:"/perspectives/".concat(e.id),onClick:function(){return t.setState({itemSelected:{item:"perspectives",id:e.id}})}}," ",b.a.createElement("div",{className:"menu-item "+("perspectives"===t.state.itemSelected.item&&t.state.itemSelected.id===e.id?"menu-item-selected":"")},b.a.createElement("i",{className:"fas fa-layer-group",style:{paddingRight:2}})," ",e.name))})),b.a.createElement("div",{className:"menu-sublabel menu-decoration"},"Projects ",b.a.createElement("a",{onClick:function(){Object(s.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.gruntman.do("project.create",{uid:this.props.uid});case 2:t=e.sent.pid,N.push("/projects/".concat(t,"/do")),this.paginate("projects",t),this.refresh();case 6:case"end":return e.stop()}}),e,this)}))).bind(t)()},className:"fa fa-plus add"})),this.state.projects.map((function(e){return b.a.createElement(m.a,{key:e.id,to:"/projects/".concat(e.id),onClick:function(){return t.setState({itemSelected:{item:"projects",id:e.id}})}}," ",b.a.createElement("div",{className:"menu-item "+("projects"===t.state.itemSelected.item&&t.state.itemSelected.id===e.id?"menu-item-selected":"")},b.a.createElement(p.c,{icon:d.k}),e.name))}))),b.a.createElement("div",{className:"menu-item",id:"logout",onClick:function(){N.push("/"),t.props.dispatch({operation:"logout"})}},b.a.createElement("i",{className:"fas fa-snowboarding",style:{paddingRight:5}}),"Logout")),b.a.createElement(p.g,{id:"main"},b.a.createElement(E.a,{reference:this.abtibRef,uid:this.props.uid,gruntman:this.props.gruntman}),b.a.createElement("div",{id:"parking-lot"}),b.a.createElement(p.i,null,b.a.createElement(h.b,{render:function(){return b.a.createElement(h.a,{to:"/upcoming"})}}),b.a.createElement(h.b,{exact:!0,path:"/",render:function(){return b.a.createElement(h.a,{to:"/upcoming"})}}),b.a.createElement(h.d,null,b.a.createElement(h.b,{path:"/upcoming",exact:!0,render:function(){return b.a.createElement(y.a,{engine:t.props.engine,uid:t.props.uid,gruntman:t.props.gruntman,displayName:t.props.displayName})}}),b.a.createElement(h.b,{path:"/calendar",exact:!0,render:function(){return b.a.createElement(k.a,{engine:t.props.engine,uid:t.props.uid,gruntman:t.props.gruntman})}}),b.a.createElement(h.b,{path:"/completed",exact:!0,render:function(){return b.a.createElement(w.a,{engine:t.props.engine,uid:t.props.uid,gruntman:t.props.gruntman})}}),b.a.createElement(h.b,{path:"/perspectives/:id/:create?",render:function(e){var a=e.match;return b.a.createElement(j.a,{engine:t.props.engine,paginate:t.paginate,id:a.params.id,uid:t.props.uid,gruntman:t.props.gruntman,menuRefresh:t.refresh,options:a.params.create})}}),b.a.createElement(h.b,{path:"/projects/:id/:create?",render:function(e){var a=e.match;return b.a.createElement(x.a,{engine:t.props.engine,id:a.params.id,uid:t.props.uid,gruntman:t.props.gruntman,menuRefresh:t.refresh,paginate:t.paginate,options:a.params.create})}}))))))))}}]),n}(v.Component);t.a=T}).call(this,a(54))},192:function(e,t,a){"use strict";(function(e){var n=a(27),r=a(1),s=a.n(r),i=a(4),o=a(9),c=a(10),u=a(7),l=a(11),p=a(12),d=a(6),f=a(0),m=a.n(f),h=(a(265),a(71),a(113)),g=a(47),v=a(39),b=function(t){Object(l.a)(r,t);var a=Object(p.a)(r);function r(e){var t;Object(o.a)(this,r),t=a.call(this,e);var n=new Date;n.setDate(n.getDate()+1);var s=["Hello,","Hey,","Heyo,","Aloha,","Yo!"];return t.state={inbox:[],dueSoon:[],possibleProjects:{},possibleTags:{},possibleProjectsRev:{},possibleTagsRev:{},availability:[],projectSelects:[],tagSelects:[],projectDB:{},timeline:[],timelineShown:!1,greeting:s[Math.floor(Math.random()*s.length)]},t.updatePrefix=t.random(),t.props.gruntman.registerRefresher(t.refresh.bind(Object(u.a)(t))),v(Object(u.a)(t)),t}return Object(c.a)(r,[{key:"refresh",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,r,o,c,u,l,p,d,f,m,h,g,v,b,y;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.engine.db.getItemAvailability(this.props.uid);case 2:return t=e.sent,e.next=5,this.props.engine.db.getInboxandDS(this.props.uid,t);case 5:return a=e.sent,e.next=8,this.props.engine.db.getProjectsandTags(this.props.uid);case 8:for(u in r=e.sent,o=[],c=[],r[1][0])c.push({value:u,label:r[1][0][u]});return l=this,e.next=15,Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,l.props.engine.db.getTopLevelProjects(l.props.uid);case 3:a=e.sent[0],e.t0=s.a.keys(a);case 5:if((e.t1=e.t0()).done){e.next=14;break}return n=e.t1.value,e.t2=t,e.next=10,l.props.engine.db.getProjectStructure(l.props.uid,n,!0);case 10:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=5;break;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))();case 15:return p=e.sent,d=function e(t,a){if(a||(a=""),o.push({value:t.id,label:a+r[0][0][t.id]}),t.children){var s,i=Object(n.a)(t.children);try{for(i.s();!(s=i.n()).done;){var c=s.value;"project"===c.type&&e(c.content,a+":: ")}}catch(u){i.e(u)}finally{i.f()}}},p.map((function(e){return d(e)})),this.updatePrefix=this.random(),e.next=21,this.props.engine.db.selectTasksInRange(this.props.uid,new Date,new Date(2100,1,1),!0);case 21:f=(f=e.sent).filter((function(e){return!a[1].includes(e[0])})),Date.prototype.isSameDateAs=function(e){return this.getFullYear()===e.getFullYear()&&this.getMonth()===e.getMonth()&&this.getDate()===e.getDate()},m=new Date,h=[],g=Object(n.a)(f);try{for(g.s();!(v=g.n()).done;)b=v.value,(y=new Date(1e3*b[1].due.seconds)).isSameDateAs(m)||(h.push({type:"label",content:y}),m=y),h.push({type:"task",content:b[0]})}catch(k){g.e(k)}finally{g.f()}this.setState({inbox:a[0],dueSoon:a[1],possibleProjects:r[0][0],possibleTags:r[1][0],possibleProjectsRev:r[0][1],possibleTagsRev:r[1][1],availability:t,projectSelects:o,tagSelects:c,projectDB:p,timeline:h});case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentWillUnmount",value:function(){this.props.gruntman.halt()}},{key:"random",value:function(){return(65536*(1+Math.random())|0).toString(16)+"-"+(65536*(1+Math.random())|0).toString(16)}},{key:"render",value:function(){var t=this;return m.a.createElement(d.g,null,m.a.createElement("div",{style:{overflow:"hidden"}},m.a.createElement("div",{className:"page-invis-drag "+(Object(d.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},"\xa0"),m.a.createElement("div",{className:"page-content "+(Object(d.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},m.a.createElement("div",{className:"header-container",onTouchMove:function(e){return e.preventDefault()}},m.a.createElement("div",{style:{display:"inline-block"}},m.a.createElement(d.e,null,m.a.createElement("i",{className:"fas fa-bars",style:{marginLeft:20,color:"var(--decorative-light-alt"}}))," ",m.a.createElement("h1",{className:"page-title"},m.a.createElement("i",{style:{paddingRight:10},className:"fas fa-chevron-circle-right"}),"Upcoming"),m.a.createElement("div",{className:"greeting-datewidget"},m.a.createElement("div",{style:{display:"inline-block"},className:"greeting-date"},(new Date).getDate()),m.a.createElement("div",{style:{display:"inline-block"},className:"greeting-datename"},(new Date).toLocaleString("en-us",{weekday:"long"}))),m.a.createElement("div",{className:"greeting-container"},m.a.createElement("span",{id:"greeting"},this.state.greeting)," ",m.a.createElement("span",{id:"greeting-name",style:{fontWeight:600}},this.props.displayName)))),m.a.createElement("div",{style:{marginLeft:10,marginRight:10,overflowY:"scroll",flexGrow:5}},m.a.createElement("div",null,function(){if(t.state.inbox.length>0)return m.a.createElement("div",{className:"page-label"},"Unsorted",m.a.createElement(d.a,{className:"count-badge"},t.state.inbox.length))}(),m.a.createElement(h.b,{list:this.state.inbox,prefix:this.updatePrefix,uid:this.props.uid,engine:this.props.engine,gruntman:this.props.gruntman,availability:this.state.availability,datapack:[this.state.tagSelects,this.state.projectSelects,this.state.possibleProjects,this.state.possibleProjectsRev,this.state.possibleTags,this.state.possibleTagsRev]})),m.a.createElement("div",null,function(){if(t.state.dueSoon.length>0)return m.a.createElement("div",{className:"page-label"},"Due Soon",m.a.createElement(d.a,{className:"count-badge"},t.state.dueSoon.length))}(),this.state.dueSoon.map((function(e){return m.a.createElement(g.a,{tid:e,key:e+"-"+t.updatePrefix,uid:t.props.uid,engine:t.props.engine,gruntman:t.props.gruntman,availability:t.state.availability[e],datapack:[t.state.tagSelects,t.state.projectSelects,t.state.possibleProjects,t.state.possibleProjectsRev,t.state.possibleTags,t.state.possibleTagsRev]})}))),m.a.createElement("div",null,m.a.createElement("div",{className:"timeline-button"},m.a.createElement("a",{onClick:function(){return t.setState({timelineShown:!t.state.timelineShown})},style:{marginLeft:15,marginTop:20,display:"inline-block",fontWeight:600,fontSize:13,cursor:"pointer"}},m.a.createElement("i",{className:"fas fa-calendar-week",style:{paddingRight:5}})," ",this.state.timelineShown?"Hide":"Show"," timeline")),function(){if(t.state.timelineShown)return t.state.timeline.map((function(e){return"task"===e.type?m.a.createElement(g.a,{tid:e.content,key:e.content+"-"+t.updatePrefix,uid:t.props.uid,engine:t.props.engine,gruntman:t.props.gruntman,availability:t.state.availability[e.content],datapack:[t.state.tagSelects,t.state.projectSelects,t.state.possibleProjects,t.state.possibleProjectsRev,t.state.possibleTags,t.state.possibleTagsRev]}):"label"===e.type?m.a.createElement("div",{className:"timeline-box"},m.a.createElement("div",{className:"timeline-line-container"},m.a.createElement("div",{className:"timeline-line"},"\xa0")),m.a.createElement("div",{className:"timeline-text"},m.a.createElement("span",{className:"timeline-weekname"},e.content.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))):void 0}))}(),function(){if(t.state.timelineShown)return m.a.createElement("span",{style:{fontSize:8,color:"var(--decorative-light-alt)",paddingLeft:10,paddingTop:10}},"Commit ID: ","c5e20520e38c595d4856605f784bcb88cb09a1e7")}()),m.a.createElement("div",{className:"bottom-helper"},"\xa0")))))}}]),r}(f.Component);t.a=b}).call(this,a(54))},196:function(e,t,a){"use strict";(function(e){var n=a(27),r=a(9),s=a(10),i=a(7),o=a(11),c=a(12),u=a(46),l=a(1),p=a.n(l),d=a(4),f=a(18),m=a(23),h=a(6),g=a(0),v=a.n(g),b=a(197),y=(a(187),a(71),a(64)),k=a(47),w=a(198),j=a(39);function x(e){function t(e,t,a){var n=e,r=t,s=a,i=function(e){return 1==(e=e.toString(16)).length?"0"+e:e},o=Math.ceil(parseInt(n.substring(0,2),16)*s+parseInt(r.substring(0,2),16)*(1-s)),c=Math.ceil(parseInt(n.substring(2,4),16)*s+parseInt(r.substring(2,4),16)*(1-s)),u=Math.ceil(parseInt(n.substring(4,6),16)*s+parseInt(r.substring(4,6),16)*(1-s));return i(o)+i(c)+i(u)}var a=Object(g.useState)(new Date),n=Object(m.a)(a,2),r=n[0],s=n[1],i=r.getMonth(),o=r.getFullYear(),c=new Date(o,i,1),l=new Date(o,i+1,0),h=new Date(o,i,0),b=c.getDay()+1,y=Object(f.a)(new Array(b-1)).map((function(e,t){return{type:"pre",content:t+h.getDate()-(b-1)+1}})),k=Object(f.a)(new Array(6-l.getDay()===-1?6:6-l.getDay())).map((function(e,t){return{type:"post",content:t+1}})),w=Object(f.a)(new Array(l.getDate())).map((function(e,t){return{type:"actual",content:t+1}})),j=Object(g.useState)({}),x=Object(m.a)(j,2),E=x[0],O=x[1];return Array.prototype.max=function(){return Math.max.apply(null,this)},Object(g.useEffect)((function(){Object(d.a)(p.a.mark((function a(){var n,r,s,i,o,u;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=new Map,r={},a.next=4,e.engine.db.selectTasksInRange(e.uid,c,l,!0);case 4:a.sent.forEach((function(e){var t=Object(m.a)(e,2),a=(t[0],t[1]),r=new Date(1e3*a.due.seconds);r.setHours(0,0,0,0);var s=r.getDate();n.has(s)?n.set(s,n.get(s)+1):n.set(s,1)})),(s=Array.from(n.values())).length>0&&(i=s.max(),o=getComputedStyle(document.body),u=s.map((function(e){return t(o.getPropertyValue("--heatmap-darkest").trim().slice(1),o.getPropertyValue("--heatmap-lightest").trim().slice(1),e/i)})),Array.from(n.keys()).forEach((function(e,t){r[e]=u[t]}))),O(r);case 9:case"end":return a.stop()}}),a)})))()}),[r]),v.a.createElement("div",{id:"calendar-page-calendar-wrapper",style:Object(u.a)({display:"inline-block"},e.style)},v.a.createElement("div",{id:"calendar-wrapper"},v.a.createElement("div",{id:"calendar-daterow"},v.a.createElement("span",{className:"calendar-daterow-item"},"Sun"),v.a.createElement("span",{className:"calendar-daterow-item"},"Mon"),v.a.createElement("span",{className:"calendar-daterow-item"},"Tues"),v.a.createElement("span",{className:"calendar-daterow-item"},"Wed"),v.a.createElement("span",{className:"calendar-daterow-item"},"Thu"),v.a.createElement("span",{className:"calendar-daterow-item"},"Fri"),v.a.createElement("span",{className:"calendar-daterow-item"},"Sat")),v.a.createElement("div",{id:"calendar-container"},[].concat(Object(f.a)(y),Object(f.a)(w),Object(f.a)(k)).map((function(t){return v.a.createElement("span",{className:"calendar-container-item calendar-container-item-".concat(t.type," calendar-container-item-").concat(t.content),style:{backgroundColor:E[t.content]&&"actual"===t.type?"#".concat(E[t.content]):"inherit",border:"actual"===t.type&&t.content===r.getDate()?"2px solid var(--decorative-light)":"0"},onClick:function(a){var n;"pre"===t.type&&(n=new Date(h.getFullYear(),h.getMonth(),t.content)),"actual"===t.type&&(n=new Date(c.getFullYear(),c.getMonth(),t.content)),"post"===t.type&&(n=new Date(c.getFullYear(),c.getMonth()+1,t.content)),s(n),e.onDateSelected&&e.onDateSelected(n)}},t.content)}))),v.a.createElement("div",{id:"calendar-infopanel"},v.a.createElement("div",{className:"calendar-infopanel-dateselected"},r.getDate()),v.a.createElement("div",{className:"calendar-infopanel-datename"},r.toLocaleString("en-us",{weekday:"long"})),v.a.createElement("div",{className:"calendar-infopanel-month"},r.toLocaleString("en-us",{month:"long"})),v.a.createElement("div",{className:"calendar-infopanel-year"},r.getFullYear())),v.a.createElement("div",{id:"calendar-tools"},v.a.createElement("a",{className:"fas fa-caret-left calendar-button",onClick:function(){var t=new Date(c.getFullYear(),c.getMonth()-1,1);s(t),e.onDateSelected&&e.onDateSelected(t)}}),v.a.createElement("a",{className:"fas fa-caret-right calendar-button",onClick:function(){var t=new Date(c.getFullYear(),c.getMonth()+1,1);s(t),e.onDateSelected&&e.onDateSelected(t)}}),v.a.createElement("div",{className:"calendar-today",onClick:function(){s(new Date),e.onDateSelected&&e.onDateSelected(new Date)}},"Today"))))}var E=function(t){Object(o.a)(u,t);var a=Object(c.a)(u);function u(e){var t;Object(r.a)(this,u),t=a.call(this,e);var n=new Date;return n.setHours(0,0,0,0),t.state={possibleProjects:{},possibleTags:{},possibleProjectsRev:{},possibleTagsRev:{},availability:[],projectSelects:[],tagSelects:[],projectDB:{},currentDate:n,taskList:[],popoverIsVisible:!1},t.updatePrefix=t.random(),t.props.gruntman.registerRefresher(t.refresh.bind(Object(i.a)(t))),t.repeater=v.a.createRef(),j(Object(i.a)(t)),t}return Object(s.a)(u,[{key:"showEdit",value:function(){this.setState({showEdit:!0})}},{key:"hideEdit",value:function(){this.setState({showEdit:!1})}},{key:"componentWillUnmount",value:function(){this.props.gruntman.halt()}},{key:"refresh",value:function(){var e=Object(d.a)(p.a.mark((function e(){var t,a,r,s,i,o,c,u,l,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.engine.db.getItemAvailability(this.props.uid);case 2:return t=e.sent,e.next=5,this.props.engine.db.getProjectsandTags(this.props.uid);case 5:for(i in a=e.sent,r=[],s=[],a[1][0])s.push({value:i,label:a[1][0][i]});return o=this,e.next=12,Object(d.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,o.props.engine.db.getTopLevelProjects(o.props.uid);case 3:a=e.sent[0],e.t0=p.a.keys(a);case 5:if((e.t1=e.t0()).done){e.next=14;break}return n=e.t1.value,e.t2=t,e.next=10,o.props.engine.db.getProjectStructure(o.props.uid,n,!0);case 10:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=5;break;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))();case 12:return c=e.sent,u=function e(t,s){if(s||(s=""),r.push({value:t.id,label:s+a[0][0][t.id]}),t.children){var i,o=Object(n.a)(t.children);try{for(o.s();!(i=o.n()).done;){var c=i.value;"project"===c.type&&e(c.content,s+":: ")}}catch(u){o.e(u)}finally{o.f()}}},c.map((function(e){return u(e)})),(l=new Date(this.state.currentDate)).setHours(23,59,59,60),e.next=19,this.props.engine.db.selectTasksInRange(this.props.uid,this.state.currentDate,l);case 19:f=e.sent,this.setState({possibleProjects:a[0][0],possibleTags:a[1][0],possibleProjectsRev:a[0][1],possibleTagsRev:a[1][1],availability:t,projectSelects:r,tagSelects:s,projectDB:c,taskList:f});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.refresh()}},{key:"random",value:function(){return(65536*(1+Math.random())|0).toString(16)+"-"+(65536*(1+Math.random())|0).toString(16)}},{key:"render",value:function(){var t=this;return v.a.createElement(h.g,null,v.a.createElement("div",{className:"page-invis-drag "+(Object(h.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},"\xa0"),v.a.createElement("div",{className:"page-content "+(Object(h.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},v.a.createElement("div",{className:"header-container"},v.a.createElement("div",{style:{display:"inline-block"}},v.a.createElement("div",null,v.a.createElement(h.e,null,v.a.createElement("i",{className:"fas fa-bars",style:{marginLeft:20,color:"var(--decorative-light-alt"}})),v.a.createElement("h1",{className:"page-title"},v.a.createElement("i",{style:{paddingRight:10},className:"fas fa-calendar-alt"}),"Calendar"),v.a.createElement(y.a,{effect:"solid",offset:{top:3},backgroundColor:"black",className:"tooltips"})))),v.a.createElement("div",{style:{marginLeft:10,marginRight:10,overflowY:"scroll"}},v.a.createElement("div",{id:"calendar-page-wrapper"},t.props.isMobile()?v.a.createElement(w.a,{uid:t.props.uid,engine:t.props.engine,isShown:t.state.popoverIsVisible,onDidDismiss:function(){return t.setState({popoverIsVisible:!1})},onDateSelected:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Date(t.getTime())).setHours(23,59,59,60),e.next=4,this.props.engine.db.selectTasksInRange(this.props.uid,t,a);case 4:n=e.sent,this.setState({currentDate:t,taskList:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(t)}):v.a.createElement(x,{uid:t.props.uid,engine:t.props.engine,onDateSelected:function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Date(t.getTime())).setHours(23,59,59,60),e.next=4,this.props.engine.db.selectTasksInRange(this.props.uid,t,a);case 4:n=e.sent,this.setState({currentDate:t,taskList:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}().bind(t)}),v.a.createElement("div",{id:"calendar-page-taskpage-wrapper"},v.a.createElement("span",{id:"calendar-page-header"},v.a.createElement("div",{class:"calendar-page-count"},this.state.taskList.length),v.a.createElement("div",{class:"calendar-page-title"},"tasks due on"),v.a.createElement("div",{class:"calendar-page-date",onClick:function(){return t.setState({popoverIsVisible:!0})}},this.state.currentDate.toLocaleString("en-us",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))),this.state.taskList.map((function(e){return v.a.createElement(k.a,{tid:e,key:e+"-"+t.updatePrefix,uid:t.props.uid,engine:t.props.engine,gruntman:t.props.gruntman,availability:t.state.availability[e],datapack:[t.state.tagSelects,t.state.projectSelects,t.state.possibleProjects,t.state.possibleProjectsRev,t.state.possibleTags,t.state.possibleTagsRev]})})),function(){if(t.props.isMobile()&&0==t.state.taskList.length)return v.a.createElement("span",{class:"calendar-page-select"},"Hint: tap the date above to change date!")}())),v.a.createElement("div",{className:"bottom-helper"},"\xa0"))))}}]),u}(g.Component);t.a=Object(b.withGetScreen)(E,{mobileLimit:720,tabletLimit:768,shouldListenOnResize:!0})}).call(this,a(54))},198:function(e,t,a){"use strict";var n=a(46),r=a(1),s=a.n(r),i=a(4),o=a(18),c=a(23),u=a(6),l=a(0),p=a.n(l);a(187),a(91),a(28);t.a=function(e){var t=Object(l.useState)(new Date),a=Object(c.a)(t,2),r=a[0],d=a[1],f=r.getMonth(),m=r.getFullYear(),h=new Date(m,f,1),g=new Date(m,f+1,0),v=new Date(m,f,0),b=h.getDay()+1;function y(e,t,a){var n=e,r=t,s=a,i=function(e){return 1==(e=e.toString(16)).length?"0"+e:e},o=Math.ceil(parseInt(n.substring(0,2),16)*s+parseInt(r.substring(0,2),16)*(1-s)),c=Math.ceil(parseInt(n.substring(2,4),16)*s+parseInt(r.substring(2,4),16)*(1-s)),u=Math.ceil(parseInt(n.substring(4,6),16)*s+parseInt(r.substring(4,6),16)*(1-s));return i(o)+i(c)+i(u)}var k=Object(o.a)(new Array(b-1)).map((function(e,t){return{type:"pre",content:t+v.getDate()-(b-1)+1}})),w=Object(o.a)(new Array(6-g.getDay()===-1?6:6-g.getDay())).map((function(e,t){return{type:"post",content:t+1}})),j=Object(o.a)(new Array(g.getDate())).map((function(e,t){return{type:"actual",content:t+1}})),x=Object(l.useState)({}),E=Object(c.a)(x,2),O=E[0],D=E[1];return Object(l.useEffect)((function(){Object(i.a)(s.a.mark((function t(){var a,n,r,i,o,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new Map,n={},t.next=4,e.engine.db.selectTasksInRange(e.uid,h,g,!0);case 4:t.sent.forEach((function(e){var t=Object(c.a)(e,2),n=(t[0],t[1]),r=new Date(1e3*n.due.seconds);r.setHours(0,0,0,0);var s=r.getDate();a.has(s)?a.set(s,a.get(s)+1):a.set(s,1)})),(r=Array.from(a.values())).length>0&&(i=r.max(),o=getComputedStyle(document.body),u=r.map((function(e){return y(o.getPropertyValue("--heatmap-darkest").trim().slice(1),o.getPropertyValue("--heatmap-lightest").trim().slice(1),e/i)})),Array.from(a.keys()).forEach((function(e,t){n[e]=u[t]}))),D(n);case 9:case"end":return t.stop()}}),t)})))()}),[r]),p.a.createElement(u.f,{ref:e.reference,isOpen:e.isShown,onDidDismiss:function(){e.onDidDismiss&&e.onDidDismiss()},style:{borderRadius:5},cssClass:"calendar-popover"},p.a.createElement("div",{id:"calendar-page-calendar-wrapper",style:Object(n.a)({display:"inline-block"},e.style)},p.a.createElement("div",{id:"calendar-wrapper-popover"},p.a.createElement("div",{id:"calendar-daterow"},p.a.createElement("span",{className:"calendar-daterow-item"},"Sun"),p.a.createElement("span",{className:"calendar-daterow-item"},"Mon"),p.a.createElement("span",{className:"calendar-daterow-item"},"Tues"),p.a.createElement("span",{className:"calendar-daterow-item"},"Wed"),p.a.createElement("span",{className:"calendar-daterow-item"},"Thu"),p.a.createElement("span",{className:"calendar-daterow-item"},"Fri"),p.a.createElement("span",{className:"calendar-daterow-item"},"Sat")),p.a.createElement("div",{id:"calendar-container"},[].concat(Object(o.a)(k),Object(o.a)(j),Object(o.a)(w)).map((function(t){return p.a.createElement("span",{className:"calendar-container-item calendar-container-item-".concat(t.type," calendar-container-item-").concat(t.content),style:{backgroundColor:O[t.content]&&"actual"===t.type?"#".concat(O[t.content]):"inherit",border:"actual"===t.type&&t.content===r.getDate()?"2px solid var(--decorative-light)":"0"},onClick:function(a){var n;"pre"===t.type&&(n=new Date(v.getFullYear(),v.getMonth(),t.content)),"actual"===t.type&&(n=new Date(h.getFullYear(),h.getMonth(),t.content)),"post"===t.type&&(n=new Date(h.getFullYear(),h.getMonth()+1,t.content)),d(n),e.onDateSelected&&e.onDateSelected(n)}},t.content)}))),p.a.createElement("div",{id:"calendar-infopanel"},p.a.createElement("div",{className:"calendar-infopanel-dateselected"},r.getDate()),p.a.createElement("div",{className:"calendar-infopanel-datename"},r.toLocaleString("en-us",{weekday:"long"})),p.a.createElement("div",{className:"calendar-infopanel-month"},r.toLocaleString("en-us",{month:"long"})),p.a.createElement("div",{className:"calendar-infopanel-year"},r.getFullYear())),p.a.createElement("div",{id:"calendar-tools"},p.a.createElement("a",{className:"fas fa-caret-left calendar-button",onClick:function(){var t=new Date(h.getFullYear(),h.getMonth()-1,1);d(t),e.onDateSelected&&e.onDateSelected(t)}}),p.a.createElement("a",{className:"fas fa-caret-right calendar-button",onClick:function(){var t=new Date(h.getFullYear(),h.getMonth()+1,1);d(t),e.onDateSelected&&e.onDateSelected(t)}}),p.a.createElement("div",{className:"calendar-today",onClick:function(){d(new Date),e.onDateSelected&&e.onDateSelected(new Date)}},"Today")))))}},199:function(e,t,a){"use strict";(function(e){var n=a(27),r=a(1),s=a.n(r),i=a(4),o=a(9),c=a(10),u=a(7),l=a(11),p=a(12),d=a(6),f=a(0),m=a.n(f),h=(a(409),a(71),a(47)),g=a(39);function v(e,t){this.type=e,this.contents=t}var b=function(t){Object(l.a)(r,t);var a=Object(p.a)(r);function r(e){var t;return Object(o.a)(this,r),(t=a.call(this,e)).state={taskList:[],tasksShown:1,taskCats:["Today","Yesterday","This Week","This Month","Even Before"],rendering:!0,possibleProjects:{},possibleTags:{},possibleProjectsRev:{},possibleTagsRev:{},availability:[],projectSelects:[],tagSelects:[],projectDB:{}},t.updatePrefix=t.random(),t.props.gruntman.registerRefresher(t.refresh.bind(Object(u.a)(t))),g(Object(u.a)(t)),t}return Object(c.a)(r,[{key:"componentWillUnmount",value:function(){this.props.gruntman.halt()}},{key:"refresh",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,r,o,c,u,l,p,d,f,m=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.props.engine.db.getCompletedTasks(this.props.uid);case 3:return a=e.sent,e.next=6,this.props.engine.db.getItemAvailability(this.props.uid);case 6:return r=e.sent,e.next=9,this.props.engine.db.getProjectsandTags(this.props.uid);case 9:for(l in o=e.sent,a.forEach((function(e,a){t.push(new v("label",m.state.taskCats[a])),e.forEach((function(e){t.push(new v("task",e))}))})),c=[],u=[],o[1][0])u.push({value:l,label:o[1][0][l]});return p=this,e.next=17,Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,p.props.engine.db.getTopLevelProjects(p.props.uid);case 3:a=e.sent[0],e.t0=s.a.keys(a);case 5:if((e.t1=e.t0()).done){e.next=14;break}return n=e.t1.value,e.t2=t,e.next=10,p.props.engine.db.getProjectStructure(p.props.uid,n,!0);case 10:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=5;break;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))();case 17:d=e.sent,f=function e(t,a){if(a||(a=""),c.push({value:t.id,label:a+o[0][0][t.id]}),t.children){var r,s=Object(n.a)(t.children);try{for(s.s();!(r=s.n()).done;){var i=r.value;"project"===i.type&&e(i.content,a+":: ")}}catch(u){s.e(u)}finally{s.f()}}},d.map((function(e){return f(e)})),this.setState({taskList:t,rendering:!1,possibleProjects:o[0][0],possibleTags:o[1][0],possibleProjectsRev:o[0][1],possibleTagsRev:o[1][1],availability:r,projectSelects:c,tagSelects:u,projectDB:d});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.refresh();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFetchMore",value:function(){var e=this;this.setState({rendering:!0});setTimeout((function(){e.setState({rendering:!1})}),2),setTimeout((function(){e.setState({tasksShown:e.state.tasksShown+1}),e.setState({rendering:!1})}),1)}},{key:"random",value:function(){return(65536*(1+Math.random())|0).toString(16)+"-"+(65536*(1+Math.random())|0).toString(16)}},{key:"render",value:function(){var t=this;return m.a.createElement(d.g,null,m.a.createElement("div",{style:{overflowY:"scroll"}},m.a.createElement("div",{className:"page-invis-drag "+(Object(d.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},"\xa0"),m.a.createElement("div",{className:"page-content "+(Object(d.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},m.a.createElement("div",{className:"header-container"},m.a.createElement("div",{style:{display:"inline-block"}},m.a.createElement(d.e,null,m.a.createElement("i",{class:"fas fa-bars",style:{marginLeft:20,color:"var(--decorative-light-alt"}})),m.a.createElement("h1",{className:"page-title"},m.a.createElement("i",{style:{paddingRight:10},className:"fas fa-check-circle"}),"Completed"))),m.a.createElement("div",{style:{overflowY:"scroll"}},this.state.taskList.slice(0,10*this.state.tasksShown).map((function(e,a){return m.a.createElement("div",{style:{marginLeft:10,marginRight:10}},"label"==e.type?t.state.taskList[a+1]?"label"==t.state.taskList[a+1].type||t.state.taskList.slice(0,10*t.state.tasksShown).length==a+1?"":m.a.createElement("p",{className:"page-label",style:{marginBottom:0}},e.contents):"":m.a.createElement(h.a,{tid:e.contents,startingCompleted:!0,key:e.contents+"-"+t.updatePrefix,uid:t.props.uid,engine:t.props.engine,gruntman:t.props.gruntman,availability:t.state.availability[e.contents],datapack:[t.state.tagSelects,t.state.projectSelects,t.state.possibleProjects,t.state.possibleProjectsRev,t.state.possibleTags,t.state.possibleTagsRev]}))})),m.a.createElement("div",{className:"fetch-more"},this.state.rendering?m.a.createElement("p",{className:"loader"},"Loading..."):m.a.createElement("p",{onClick:this.handleFetchMore},"Fetch more...")),m.a.createElement("div",{className:"bottom-helper"},"\xa0")))))}}]),r}(f.Component);t.a=b}).call(this,a(54))},200:function(e,t,a){"use strict";(function(e){var n=a(27),r=a(1),s=a.n(r),i=a(4),o=a(9),c=a(10),u=a(7),l=a(11),p=a(12),d=a(6),f=a(0),m=a.n(f),h=(a(188),a(71),a(64)),g=a(21),v=a(47),b=a(201),y=a(39),k=function(t){Object(l.a)(r,t);var a=Object(p.a)(r);function r(e){var t;return Object(o.a)(this,r),(t=a.call(this,e)).state={taskList:[],perspectiveName:"",perspectiveQuery:"",perspectiveAvail:{},perspectiveTord:{},showEdit:"do"===t.props.options,possibleProjects:{},possibleTags:{},possibleProjectsRev:{},possibleTagsRev:{},availability:[],projectSelects:[],tagSelects:[],projectDB:{}},t.updatePrefix=t.random(),t.props.gruntman.registerRefresher(t.refresh.bind(Object(u.a)(t))),t.repeater=m.a.createRef(),y(Object(u.a)(t)),t}return Object(c.a)(r,[{key:"showEdit",value:function(){this.setState({showEdit:!0})}},{key:"hideEdit",value:function(){this.setState({showEdit:!1})}},{key:"componentWillUnmount",value:function(){this.props.gruntman.halt()}},{key:"refresh",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,r,o,c,u,l,p,d,f,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.engine.db.getPerspectives(this.props.uid);case 2:return t=e.sent,a=t[0][this.props.id],e.next=6,this.props.engine.perspective.calc(this.props.uid,a.query,a.avail,a.tord);case 6:return r=e.sent,e.next=9,this.props.engine.db.getItemAvailability(this.props.uid);case 9:return o=e.sent,e.next=12,this.props.engine.db.getProjectsandTags(this.props.uid);case 12:for(p in c=e.sent,u=[],l=[],c[1][0])l.push({value:p,label:c[1][0][p]});return d=this,e.next=19,Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,d.props.engine.db.getTopLevelProjects(d.props.uid);case 3:a=e.sent[0],e.t0=s.a.keys(a);case 5:if((e.t1=e.t0()).done){e.next=14;break}return n=e.t1.value,e.t2=t,e.next=10,d.props.engine.db.getProjectStructure(d.props.uid,n,!0);case 10:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=5;break;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))();case 19:f=e.sent,m=function e(t,a){if(a||(a=""),u.push({value:t.id,label:a+c[0][0][t.id]}),t.children){var r,s=Object(n.a)(t.children);try{for(s.s();!(r=s.n()).done;){var i=r.value;"project"===i.type&&e(i.content,a+":: ")}}catch(o){s.e(o)}finally{s.f()}}},f.map((function(e){return m(e)})),this.setState({taskList:r,perspectiveName:a.name,perspectiveQuery:a.query,perspectiveAvail:a.avail,perspectiveTord:a.tord,possibleProjects:c[0][0],possibleTags:c[1][0],possibleProjectsRev:c[0][1],possibleTagsRev:c[1][1],availability:o,projectSelects:u,tagSelects:l,projectDB:f});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateName",value:function(e){var t=this;e&&(this.props.gruntman.registerScheduler((function(){t.props.gruntman.do("perspective.update__perspective",{uid:t.props.uid,id:t.props.id,payload:{name:e.target.value}}).then(t.props.menuRefresh)}),"perspective.this.".concat(this.props.id,"-update")),this.setState({perspectiveName:e.target.value}))}},{key:"handleDelete",value:function(){var e=this;this.props.history.push("/upcoming"),this.props.paginate("upcoming"),this.props.gruntman.do("perspective.delete__perspective",{uid:this.props.uid,id:this.props.id}).then((function(){e.props.menuRefresh()}))}},{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentDidUpdate",value:function(e,t,a){e.id!==this.props.id&&(this.setState({taskList:[],perspectiveName:"",perspectiveQuery:"",perspectiveAvail:{},perspectiveTord:{},showEdit:"do"===this.props.options,possibleProjects:{},possibleTags:{},possibleProjectsRev:{},possibleTagsRev:{},availability:[],projectSelects:[],tagSelects:[],projectDB:{}}),this.refresh()),e.id!==this.props.id&&"do"===this.props.options&&this.setState({showEdit:!0})}},{key:"random",value:function(){return(65536*(1+Math.random())|0).toString(16)+"-"+(65536*(1+Math.random())|0).toString(16)}},{key:"render",value:function(){var t=this;return m.a.createElement(d.g,null,m.a.createElement(b.a,{reference:this.repeater,isShown:this.state.showEdit,onDidDismiss:this.hideEdit,uid:this.props.uid,engine:this.props.engine,gruntman:this.props.gruntman,id:this.props.id,perspectiveName:this.state.perspectiveName,query:this.state.perspectiveQuery,avail:this.state.perspectiveAvail,tord:this.state.perspectiveTord,menuRefresh:this.props.menuRefresh,updateName:this.updateName,startHighlighted:"do"===this.props.options}),m.a.createElement("div",{className:"page-invis-drag "+(Object(d.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},"\xa0"),m.a.createElement("div",{className:"page-content "+(Object(d.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},m.a.createElement("div",{className:"header-container"},m.a.createElement("div",{style:{display:"inline-block"}},m.a.createElement("div",null,m.a.createElement(d.e,null,m.a.createElement("i",{className:"fas fa-bars",style:{marginLeft:20,color:"var(--decorative-light-alt"}})),m.a.createElement("h1",{className:"page-title"},m.a.createElement("i",{style:{paddingRight:10},className:"fas fa-layer-group"}),m.a.createElement("input",{className:"editable-title",onChange:function(e){e.persist(),t.updateName(e)},value:this.state.perspectiveName})),m.a.createElement(h.a,{effect:"solid",offset:{top:3},backgroundColor:"black",className:"tooltips"}),m.a.createElement("div",{className:"greeting-container",style:{marginLeft:11,marginTop:7}},m.a.createElement("a",{onClick:this.showEdit,"data-tip":"LOCALIZE: Edit",className:"perspective-icon",style:{borderColor:"var(--task-checkbox-feature-alt)",cursor:"pointer"}},m.a.createElement("i",{className:"fas fa-edit",style:{margin:3,color:"var(--task-textbox)",fontSize:10,transform:"translate(2px, -2px)"}})),m.a.createElement("a",{onClick:this.handleDelete,"data-tip":"LOCALIZE: Delete",className:"perspective-icon",style:{borderColor:"var(--task-checkbox-feature-alt)",cursor:"pointer",marginLeft:5}},m.a.createElement("i",{className:"fas fa-trash",style:{margin:3,color:"var(--task-textbox)",fontSize:10,transform:"translate(2px, -2px)"}})))))),m.a.createElement("div",{style:{marginLeft:10,marginRight:10,overflowY:"scroll"}},this.state.taskList.map((function(e){return m.a.createElement(v.a,{tid:e,key:e+"-"+t.updatePrefix,uid:t.props.uid,engine:t.props.engine,gruntman:t.props.gruntman,availability:t.state.availability[e],datapack:[t.state.tagSelects,t.state.projectSelects,t.state.possibleProjects,t.state.possibleProjectsRev,t.state.possibleTags,t.state.possibleTagsRev]})})),m.a.createElement("div",{className:"bottom-helper"},"\xa0"))))}}]),r}(f.Component);t.a=Object(g.g)(k)}).call(this,a(54))},201:function(e,t,a){"use strict";var n=a(9),r=a(10),s=a(7),i=a(11),o=a(12),c=a(6),u=a(0),l=a.n(u),p=(a(136),a(188),a(91),a(28),a(39)),d=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),r=t.call(this,e),p(Object(s.a)(r)),r.state={inputEvent:""},r.name=l.a.createRef(),r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.props.startHighlighted&&this.name.current.focus()}},{key:"handleQueryChange",value:function(e){var t=this;e?this.props.gruntman.registerScheduler((function(){t.props.gruntman.do("perspective.update__perspective",{uid:t.props.uid,id:t.props.id,payload:{query:e.target.value}})}),"perspective.this.".concat(this.props.id,"-update")):console.log(e)}},{key:"handleHelp",value:function(){alert("You really think we have documentation ready? I mean, if they are there, they are at docs.condution.com"),console.log("no one is here to help. grow up.")}},{key:"render",value:function(){var e=this;return l.a.createElement(c.f,{ref:this.props.reference,isOpen:this.props.isShown,onWillPresent:function(){e.props.gruntman.lockUpdates()},onDidDismiss:function(){e.props.gruntman.unlockUpdates(),e.props.updateName(e.state.inputEvent),e.props.onDidDismiss&&e.props.onDidDismiss()},style:{borderRadius:5},cssClass:"perspective-modal"},l.a.createElement("div",null,l.a.createElement("div",{className:"perspective-header"},l.a.createElement("span",{style:{display:"flex",alignItems:"center",width:"100%",whiteSpace:"nowrap"}},l.a.createElement("b",{className:"bold-prefix"},"Let's build \xa0"),l.a.createElement("input",{className:"editable-title pbuilder-pname",ref:this.name,defaultValue:this.props.perspectiveName,onChange:function(t){t.persist(),e.props.updateName(t),e.setState({inputEvent:t})},style:{minWidth:0},placeholder:"Tap to set name"}),l.a.createElement("div",{className:"repeat-task-name"},this.state.name)),l.a.createElement("a",{className:"repeat-close",onClick:this.props.onDidDismiss,style:{transform:"translate(-10px, 3px)"}},l.a.createElement("i",{className:"fa fa-times"}))),l.a.createElement("div",{className:"build-input"},l.a.createElement("span",{className:"bold-prefix",style:{minWidth:"70px",marginTop:"4px"}},"Filter by"),l.a.createElement("input",{className:"build-input-edit",defaultValue:this.props.query,onChange:function(t){t.persist(),e.handleQueryChange(t)},placeholder:"LOCALIZE: perspective query"})),l.a.createElement("div",{className:"perspective-basic-row"},l.a.createElement("span",{className:"pbasic-container",style:{marginRight:"25px"}},l.a.createElement("span",null,l.a.createElement("i",{className:"repeat-label fas fa-exchange-alt"}),l.a.createElement("span",{className:"perspective-label"},"Include")),l.a.createElement(c.k,{className:"perspective-select",interface:"popover",value:this.props.avail,mode:"ios",onIonChange:function(t){e.props.gruntman.do("perspective.update__perspective",{uid:e.props.uid,id:e.props.id,payload:{avail:t.detail.value}})}},l.a.createElement(c.l,{className:"repeat-select__option",value:"remain"},"Remaining"),l.a.createElement(c.l,{className:"repeat-select__option",value:"avail"},"Available"),l.a.createElement(c.l,{className:"repeat-select__option",value:"flagged"},"Flagged"))),l.a.createElement("span",{className:"pbasic-container"},l.a.createElement("span",null,l.a.createElement("i",{className:"repeat-label fas fa-sort-amount-down-alt"}),l.a.createElement("span",{className:"perspective-label"},"Order")),l.a.createElement(c.k,{className:"perspective-select",interface:"popover",value:this.props.tord,mode:"ios",onIonChange:function(t){e.props.gruntman.do("perspective.update__perspective",{uid:e.props.uid,id:e.props.id,payload:{tord:t.detail.value}})}},l.a.createElement(c.l,{className:"repeat-select__option",value:"duas"},"Ascend by Due"),l.a.createElement(c.l,{className:"repeat-select__option",value:"duds"},"Descend by Due"),l.a.createElement(c.l,{className:"repeat-select__option",value:"deas"},"Ascend by Defer"),l.a.createElement(c.l,{className:"repeat-select__option",value:"deds"},"Descend by Defer"),l.a.createElement(c.l,{className:"repeat-select__option",value:"alph"},"Alphabetical")),l.a.createElement("div",{className:"help-icon",onClick:this.handleHelp},l.a.createElement("i",{className:"far fa-question-circle"}))))))}}]),a}(u.Component);t.a=d},202:function(e,t,a){"use strict";(function(e){var n=a(27),r=a(1),s=a.n(r),i=a(4),o=a(9),c=a(10),u=a(7),l=a(11),p=a(12),d=a(6),f=a(0),m=a.n(f),h=(a(170),a(71),a(64)),g=(a(47),a(21)),v=a(113),b=a(39),y=function(t){Object(l.a)(r,t);var a=Object(p.a)(r);function r(e){var t;return Object(o.a)(this,r),(t=a.call(this,e)).state={name:"",possibleProjects:{},possibleTags:{},possibleProjectsRev:{},possibleTagsRev:{},availability:[],projectSelects:[],tagSelects:[],projectDB:{},parent:"",is_sequential:!1,currentProject:{children:[]},activeTask:""},t.updatePrefix=t.random(),t.props.gruntman.registerRefresher(t.refresh.bind(Object(u.a)(t))),t.activeTask=m.a.createRef(),t.name=m.a.createRef(),b(Object(u.a)(t)),t}return Object(c.a)(r,[{key:"componentWillUnmount",value:function(){this.props.gruntman.halt()}},{key:"componentDidUpdate",value:function(e,t,a){e.id!==this.props.id&&this.refresh(),e.id!==this.props.id&&"do"===this.props.options&&this.name.current.focus()}},{key:"refresh",value:function(){var e=Object(i.a)(s.a.mark((function e(){var t,a,r,o,c,u,l,p,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.engine.db.getItemAvailability(this.props.uid);case 2:return t=e.sent,e.next=5,this.props.engine.db.getProjectsandTags(this.props.uid);case 5:for(c in a=e.sent,r=[],o=[],a[1][0])o.push({value:c,label:a[1][0][c]});return u=this,e.next=12,Object(i.a)(s.a.mark((function e(){var t,a,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,u.props.engine.db.getTopLevelProjects(u.props.uid);case 3:a=e.sent[0],e.t0=s.a.keys(a);case 5:if((e.t1=e.t0()).done){e.next=14;break}return n=e.t1.value,e.t2=t,e.next=10,u.props.engine.db.getProjectStructure(u.props.uid,n,!0);case 10:e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=5;break;case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}}),e)})))();case 12:return l=e.sent,p=function e(t,s){if(s||(s=""),r.push({value:t.id,label:s+a[0][0][t.id]}),t.children){var i,o=Object(n.a)(t.children);try{for(o.s();!(i=o.n()).done;){var c=i.value;"project"===c.type&&e(c.content,s+":: ")}}catch(u){o.e(u)}finally{o.f()}}},l.map((function(e){return p(e)})),this.updatePrefix=this.random(),e.next=18,u.props.engine.db.getProjectStructure(this.props.uid,this.props.id,!1);case 18:d=e.sent,this.setState({name:a[0][0][this.props.id],possibleProjects:a[0][0],possibleTags:a[1][0],possibleProjectsRev:a[0][1],possibleTagsRev:a[1][1],availability:t,projectSelects:r,tagSelects:o,projectDB:l,currentProject:d,is_sequential:d.is_sequential,parent:d.parentProj});case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.refresh(),"do"===this.props.options&&this.name.current.focus()}},{key:"random",value:function(){return(65536*(1+Math.random())|0).toString(16)+"-"+(65536*(1+Math.random())|0).toString(16)}},{key:"updateName",value:function(e){var t=this;e?(this.props.gruntman.registerScheduler((function(){t.props.gruntman.do("project.update__name",{uid:t.props.uid,id:t.props.id,name:e.target.value}).then(t.props.menuRefresh)}),"project.this.".concat(this.props.id,"-update")),this.setState({name:e.target.value})):console.log(e)}},{key:"render",value:function(){var t=this;return m.a.createElement(d.g,null,m.a.createElement("div",{className:"page-invis-drag "+(Object(d.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},"\xa0"),m.a.createElement("div",{className:"page-content "+(Object(d.w)("electron")?window.navigator.platform.includes("Mac")?"darwin":"win32"===e.platform?"windows":void 0:"normal")},m.a.createElement("div",{className:"header-container"},m.a.createElement("div",{style:{display:"inline-block"}},m.a.createElement("div",null,m.a.createElement(d.e,null,m.a.createElement("i",{className:"fas fa-bars",style:{marginLeft:20,color:"var(--decorative-light-alt"}})),m.a.createElement("h1",{className:"page-title"},function(){if(""!==t.state.parent)return m.a.createElement("a",{className:"fas fa-chevron-left backbutton",onClick:function(){t.props.paginate("projects",t.state.parent),t.props.history.push("/projects/".concat(t.state.parent))}})}(),m.a.createElement("i",{style:{paddingRight:4},className:"fas fa-tasks"}),m.a.createElement("input",{className:"editable-title",onChange:function(e){e.persist(),t.updateName(e)},value:this.state.name,style:{transform:"transformY(-2px)"},ref:this.name})),m.a.createElement(h.a,{effect:"solid",offset:{top:3},backgroundColor:"black",className:"tooltips"}),m.a.createElement("div",{className:"greeting-container",style:{marginLeft:5,marginTop:7}},m.a.createElement("a",{onClick:function(){t.setState({is_sequential:!t.state.currentProject.is_sequential},(function(){t.props.gruntman.do("project.update__pstate",{uid:t.props.uid,id:t.props.id,is_sequential:t.state.is_sequential})}))},"data-tip":"LOCALIZE: Sequencial/Paralellel",className:"perspective-icon",style:{borderColor:"var(--task-checkbox-feature-alt)",cursor:"pointer",marginLeft:5}},m.a.createElement("i",{className:this.state.is_sequential?"fas fa-arrows-alt-v":"fas fa-arrows-alt-h",style:{margin:3,color:"var(--task-textbox)",fontSize:13,transform:this.state.is_sequential?"translate(3.5px, -1px)":"translate(0.25px, -1px)"}})),m.a.createElement("a",{"data-tip":"LOCALIZE: Delete",className:"perspective-icon",onClick:function(){t.props.gruntman.do("project.delete",{uid:t.props.uid,pid:t.props.id,parent:""===t.state.parent||void 0===t.state.parent?void 0:t.state.parent}).then((function(){t.props.menuRefresh(),t.props.history.push(""===t.state.parent||void 0===t.state.parent?"/upcoming/":"/projects/".concat(t.state.parent)),t.props.paginate(""===t.state.parent||void 0===t.state.parent?"upcoming":"projects",""===t.state.parent||void 0===t.state.parent?void 0:t.state.parent)}))},style:{borderColor:"var(--task-checkbox-feature-alt)",cursor:"pointer",marginLeft:5}},m.a.createElement("i",{className:"fas fa-trash",style:{margin:3,color:"var(--task-textbox)",fontSize:10,transform:"translate(2px, -2px)"}})))))),m.a.createElement("div",{style:{marginLeft:10,marginRight:10,overflowY:"scroll",overflowX:"hidden"}},m.a.createElement(v.a,{list:this.state.currentProject.children,prefix:this.updatePrefix,uid:this.props.uid,engine:this.props.engine,gruntman:this.props.gruntman,availability:this.state.availability,datapack:[this.state.tagSelects,this.state.projectSelects,this.state.possibleProjects,this.state.possibleProjectsRev,this.state.possibleTags,this.state.possibleTagsRev],possibleProjects:this.state.possibleProjects,history:this.props.history,paginate:this.props.paginate,activeTaskRef:this.activeTask,activeTaskID:this.state.activeTask}),m.a.createElement("div",{style:{marginTop:10}},m.a.createElement("a",{className:"newbutton",onClick:function(){t.props.gruntman.do("task.create",{uid:t.props.uid,pid:t.props.id},!0).then((function(e){var a=t.state.currentProject,n=t.state.availability;n[e.tid]=!0,a.children.push({type:"task",content:e.tid}),t.setState({activeTask:e.tid,currentProject:a,availability:n},(function(){return t.activeTask.current._explode()}))}))}},m.a.createElement("div",null,m.a.createElement("i",{className:"fas fa-plus-circle subproject-icon"}),m.a.createElement("div",{style:{display:"inline-block",fontWeight:500}},"Add a Task"))),m.a.createElement("a",{className:"newbutton",onClick:Object(i.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.gruntman.do("project.create",{uid:this.props.uid,parent:this.props.id});case 2:t=e.sent.pid,this.props.history.push("/projects/".concat(t,"/do"));case 4:case"end":return e.stop()}}),e,this)}))).bind(this)},m.a.createElement("div",null,m.a.createElement("i",{className:"fas fa-plus-circle subproject-icon"}),m.a.createElement("div",{style:{display:"inline-block",fontWeight:500}},"Add a Project"))),m.a.createElement("div",{className:"bottom-helper"},"\xa0")))))}}]),r}(f.Component);t.a=Object(g.g)(y)}).call(this,a(54))},203:function(e,t,a){"use strict";var n=a(23),r=a(0),s=a.n(r),i=(a(410),a(28)),o=a(51);t.a=function(e){var t=Object(r.useState)(!1),a=Object(n.a)(t,2),c=a[0],u=a[1],l=Object(r.useState)(!1),p=Object(n.a)(l,2),d=p[0],f=p[1],m=Object(o.c)({to:d?{width:280,color:"var(--quickadd-successtext)",backgroundColor:"var(--quickadd-success)"}:{width:c?280:250,color:"var(--quickadd-text)",backgroundColor:"var(--quickadd)"}});return s.a.createElement(o.a.input,{id:"abtib",readOnly:!1,type:"text",defaultValue:"",style:m,className:"attib",ref:e.reference,onFocus:function(e){e.target.value="",u(!0)},onBlur:function(e){u(!1),f(!1),e.target.value=""},onKeyUp:function(t){if("Enter"===t.key){t.persist(),f(!0);var a=t.target.value,n=i.parse(a),r=void 0,s=void 0;n.length>0&&(n[0].end?(r=n[0].end.date(),s=n[0].start.date(),a=a.replace(n[0].text,"").trim()):(r=n[0].start.date(),a=a.replace(n[0].text,"").trim()));var o={uid:e.uid,pid:"",due:r,defer:s,name:a};e.gruntman.do("task.create",o).then((function(){t.target.blur()}))}},placeholder:"Add something to the inbox?"+(128*Math.random()<1?" ^-^":"")})}},206:function(e,t,a){"use strict";var n=a(18),r=a(9),s=a(10),i=a(7),o=a(11),c=a(12),u=a(0),l=a.n(u),p=a(69),d=a.n(p),f=(a(411),a(81),a(21)),m=a(6),h=(a(412),a(71),a(39)),g=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),n=t.call(this,e),h(Object(i.a)(n)),n.state={searchRef:"",items:[],query:"",firstItem:"",direction:!0,prop_store:""},n.searcher=l.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.state.prop_store!=this.props&&this.processItems()}},{key:"componentDidMount",value:function(){this.processItems(),this.setState({prop_store:this.props,options:this.state.items})}},{key:"focusRef",value:function(){this.searcher.current&&this.searcher.current.setFocus(),this.setState({query:""})}},{key:"filterItems",value:function(e){return this.state.items.filter((function(t){return t[0].toLowerCase().indexOf(e.toLowerCase())>-1}))}},{key:"processItems",value:function(){this.setState({items:[[".upcoming","upcoming",""],[".completed","completed",""],[".calendar","calendar",""]].concat(Object(n.a)(this.props.items[0].map((function(e){return["#"+e.name,"perspectives",e.id]}))),Object(n.a)(this.props.items[1].map((function(e){return[":"+e.name,"projects",e.id]})))),prop_store:this.props})}},{key:"handleSubmit",value:function(e){if("Enter"==e.key){var t,a=this.filterItems(this.state.query)[0];if(a&&this.state.query)this.props.history.push("/".concat(a[1],"/").concat(a[2])),(t=this.props).paginate.apply(t,Object(n.a)(a.slice(1)));else this.state.direction&&this.props.history.length>2?this.props.history.goBack():this.props.history.length>2&&this.props.history.goForward(),this.setState({direction:!this.state.direction});this.props.dismiss()}}},{key:"render",value:function(){var e=this;return l.a.createElement(m.f,{isOpen:this.props.qs_show,animated:!1,cssClass:"qs_modal",autoFocus:!0,onDidPresent:this.focusRef,onDidDismiss:this.props.dismiss},l.a.createElement("div",{className:"modal-content-wrapper"},l.a.createElement(m.j,{autoFocus:!0,ref:this.searcher,animated:!0,spellcheck:!0,className:"search-bar",placeholder:"Previous  |  Let's go to..",onIonChange:function(t){return e.setState({query:t.detail.value})},debounce:0,onSubmit:function(){console.log("wheee")},onKeyDown:this.handleSubmit}),l.a.createElement("div",{className:"option-wrapper"},this.filterItems(this.state.query).map((function(t){return l.a.createElement("p",{className:"option-text",onClick:function(){var a;console.log(t),e.props.history.push("/".concat(t[1],"/").concat(t[2])),(a=e.props).paginate.apply(a,Object(n.a)(t.slice(1))),e.props.dismiss()}},t[0])})))))}}]),a}(u.Component),v=Object(f.g)(g),b=a(39),y=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).bindings=[["alt+1",function(){n.sidebar_switcher(Object(i.a)(n),0)}],["alt+2",function(){n.sidebar_switcher(Object(i.a)(n),1)}],["alt+3",function(){n.sidebar_switcher(Object(i.a)(n),2)}],["alt+4",function(){n.sidebar_switcher(Object(i.a)(n),3)}],["alt+5",function(){n.sidebar_switcher(Object(i.a)(n),4)}],["alt+6",function(){n.sidebar_switcher(Object(i.a)(n),5)}],["alt+7",function(){n.sidebar_switcher(Object(i.a)(n),6)}],["alt+8",function(){n.sidebar_switcher(Object(i.a)(n),7)}],["alt+9",function(){n.sidebar_switcher(Object(i.a)(n),8)}],["alt+0",function(){n.sidebar_switcher(Object(i.a)(n),n.state.sidebar_list.length-1)}],["alt+j",function(){n.sidebar_incrimentor(Object(i.a)(n),1)}],["alt+k",function(){n.sidebar_incrimentor(Object(i.a)(n),-1)}],["command+i",function(){n.focusElement(n.props.abtib)}]],n.globalBindings=[["command+k",function(){n.manageQs(Object(i.a)(n))}]],b(Object(i.a)(n)),n.state={sidebar_list:[],sidebar_index:0,prop_store:"",qs_show:!1},n}return Object(s.a)(a,[{key:"sidebar_switcher",value:function(e,t){var a,r=this.state.sidebar_list[t];e.props.history.push("/".concat(r[0],"/").concat(r[1])),(a=e.props).paginate.apply(a,Object(n.a)(r)),console.log(r),this.setState({sidebar_index:t})}},{key:"sidebar_incrimentor",value:function(e,t){this.state.sidebar_list[this.state.sidebar_index+t]?this.sidebar_switcher(e,this.state.sidebar_index+t):this.state.sidebar_index==this.state.sidebar_list.length-1?this.sidebar_switcher(e,0):this.sidebar_switcher(e,this.state.sidebar_list.length-1)}},{key:"manageQs",value:function(e){this.setState({qs_show:!this.state.qs_show})}},{key:"focusElement",value:function(e){e&&e.current.focus()}},{key:"componentDidUpdate",value:function(){this.state.prop_store!=this.props&&this.setState({sidebar_list:[["upcoming",""],["completed",""],["calendar",""]].concat(Object(n.a)(this.props.perspectives.map((function(e){return["perspectives",e.id]}))),Object(n.a)(this.props.projects.map((function(e){return["projects",e.id]})))),prop_store:this.props})}},{key:"componentDidMount",value:function(){this.setState({prop_store:this.props}),this.bindings.map((function(e){d.a.bind.apply(d.a,Object(n.a)(e))})),this.globalBindings.map((function(e){d.a.bindGlobal.apply(d.a,Object(n.a)(e))}))}},{key:"componentWillUnmount",value:function(){this.bindings.map((function(e){d.a.unbind.apply(d.a,Object(n.a)(e))}))}},{key:"render",value:function(){var e=this;return l.a.createElement(v,{qs_show:this.state.qs_show,dismiss:function(){return e.setState({qs_show:!1})},items:[this.props.perspectives,this.props.projects],paginate:this.props.paginate})}}]),a}(u.Component);t.a=Object(f.g)(y)},207:function(e,t,a){e.exports=a(414)},213:function(e,t,a){var n={"./ion-action-sheet.entry.js":[420,5],"./ion-alert.entry.js":[421,6],"./ion-app_8.entry.js":[422,7],"./ion-avatar_3.entry.js":[423,18],"./ion-back-button.entry.js":[424,19],"./ion-backdrop.entry.js":[425,43],"./ion-button_2.entry.js":[426,20],"./ion-card_5.entry.js":[427,21],"./ion-checkbox.entry.js":[428,22],"./ion-chip.entry.js":[429,23],"./ion-col_3.entry.js":[430,44],"./ion-datetime_3.entry.js":[431,10],"./ion-fab_3.entry.js":[432,24],"./ion-img.entry.js":[433,45],"./ion-infinite-scroll_2.entry.js":[434,46],"./ion-input.entry.js":[435,25],"./ion-item-option_3.entry.js":[436,26],"./ion-item_8.entry.js":[437,27],"./ion-loading.entry.js":[438,28],"./ion-menu_3.entry.js":[439,29],"./ion-modal.entry.js":[440,8],"./ion-nav_2.entry.js":[441,15],"./ion-popover.entry.js":[442,9],"./ion-progress-bar.entry.js":[443,30],"./ion-radio_2.entry.js":[444,31],"./ion-range.entry.js":[445,32],"./ion-refresher_2.entry.js":[446,11],"./ion-reorder_2.entry.js":[447,17],"./ion-ripple-effect.entry.js":[448,47],"./ion-route_4.entry.js":[449,33],"./ion-searchbar.entry.js":[450,34],"./ion-segment_2.entry.js":[451,35],"./ion-select_3.entry.js":[452,36],"./ion-slide_2.entry.js":[453,48],"./ion-spinner.entry.js":[454,13],"./ion-split-pane.entry.js":[455,49],"./ion-tab-bar_2.entry.js":[456,37],"./ion-tab_2.entry.js":[457,16],"./ion-text.entry.js":[458,38],"./ion-textarea.entry.js":[459,39],"./ion-toast.entry.js":[460,40],"./ion-toggle.entry.js":[461,12],"./ion-virtual-scroll.entry.js":[462,50]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=213,e.exports=r},215:function(e,t,a){var n={"./ion-icon.entry.js":[466,57]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return a.e(t[1]).then((function(){return a(r)}))}r.keys=function(){return Object.keys(n)},r.id=215,e.exports=r},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e){e.exports=JSON.parse('{"dbkeys":{"deploy":{"apiKey":"AIzaSyDfQ-VPxf8hqNl3c4Y7sTQQu2teURAhK0c","authDomain":"condution-90c60.firebaseapp.com","databaseURL":"https://condution-90c60.firebaseio.com","projectId":"condution-90c60","storageBucket":"condution-90c60.appspot.com","messagingSenderId":"998610092056","appId":"1:998610092056:web:ece7b6443b36f817ab436d"},"debug":{"apiKey":"AIzaSyDFv40o-MFNy4eVfQzLtPG-ATkBUOHPaSI","authDomain":"condution-7133f.firebaseapp.com","databaseURL":"https://condution-7133f.firebaseio.com","projectId":"condution-7133f","storageBucket":"condution-7133f.appspot.com","messagingSenderId":"544684450810","appId":"1:544684450810:web:9b1caf7ed9285890fa3a43"}}}')},264:function(e,t,a){},265:function(e,t,a){},327:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},412:function(e,t,a){},413:function(e,t,a){},414:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(45),i=a.n(s),o=a(1),c=a.n(o),u=a(4),l=a(9),p=a(10),d=a(7),f=a(11),m=a(12),h=a(6),g=(a(81),a(219),a(220),a(221),a(222),a(223),a(224),a(225),a(226),a(227),a(228),a(159),a(160),a(161),a(229),a(230),a(231),a(80)),v=a(41),b=a.n(v),y=a(18),k=a(46),w=a(23),j=a(27),x=a(87),E=x.a.cRef,O={select:{compare:function(e,t,a){switch(t){case"<":return e<a;case">":return e>a;case"<=":return e<=a;case">=":return e>=a;case"==":return e==a;case"!=":return e!=a;case"has":return e.includes(a);case"!has":return!e.includes(a);default:throw new TypeError("Unkown comparator "+t)}},all:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){var a=e.data();a.defer&&(a.defer=a.defer.seconds),a.due&&(a.due=a.due.seconds);var n,r=Object(j.a)(t);try{for(r.s();!(n=r.n()).done;){var s=Object(w.a)(n.value,3),i=s[0],o=s[1],c=s[2];if(!O.select.compare(a[i],o,c))return!1}}catch(u){r.e(u)}finally{r.f()}return!0}},any:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){var a=e.data();a.defer&&(a.defer=a.defer.seconds),a.due&&(a.due=a.due.seconds);var n,r=Object(j.a)(t);try{for(r.s();!(n=r.n()).done;){var s=Object(w.a)(n.value,3),i=s[0],o=s[1],c=s[2];if(O.select.compare(a[i],o,c))return!0}}catch(u){r.e(u)}finally{r.f()}return!1}},atLeast:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return function(t){var n=t.data();n.defer&&(n.defer=n.defer.seconds),n.due&&(n.due=n.due.seconds);var r,s=0,i=Object(j.a)(a);try{for(i.s();!(r=i.n()).done;){var o=Object(w.a)(r.value,3),c=o[0],u=o[1],l=o[2];if(O.select.compare(n[c],u,l)&&++s>=e)return!0}}catch(p){i.e(p)}finally{i.f()}return!1}},atMost:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return function(t){var n=t.data();n.defer&&(n.defer=n.defer.seconds),n.due&&(n.due=n.due.seconds);var r,s=0,i=Object(j.a)(a);try{for(i.s();!(r=i.n()).done;){var o=Object(w.a)(r.value,3),c=o[0],u=o[1],l=o[2];if(O.select.compare(n[c],u,l)&&++s>e)return!1}}catch(p){i.e(p)}finally{i.f()}return!0}}},debug:{log:function(e){return console.log(e),e},trace:function(e){return console.trace(e),e}}};function D(){return(D=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("users",t,"tasks").get().then((function(e){return e.docs.map((function(e){return e.id}))})).catch((function(e){console.error("Error getting documents",e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e,t){return N.apply(this,arguments)}function N(){return(N=Object(u.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"tasks").get().then((function(e){return e.docs.filter(a)})).catch((function(e){console.error("Error getting documents",e)}));case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return e.id})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"tasks").get().then((function(e){return e.docs.filter(O.select.all(["project","==",""],["isComplete","==",!1])).sort((function(e,t){return e.data().order-t.data().order}))})).catch((function(e){console.error("Error getting documents",e)}));case 2:return a=e.sent,e.abrupt("return",a.map((function(e){return e.id})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,a){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(c.a.mark((function e(t,a,n){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n||new Date).setHours(r.getHours()+24),e.next=4,E("users",t,"tasks").get().then((function(e){return e.docs.filter((function(e){return!!e.data().due&&e.data().due.seconds<=r.getTime()/1e3&&(!e.data().defer||e.data().defer.seconds<(new Date).getTime()/1e3)&&!1===e.data().isComplete&&a[e.id]})).sort((function(e,t){return e.data().due.seconds-t.data().due.seconds}))})).catch(console.error);case 4:return s=e.sent,e.abrupt("return",s.map((function(e){return e.id})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,a){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(c.a.mark((function e(t,a,n){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=n||new Date).setHours(23,59,59,999),e.next=4,E("users",t,"tasks").get().then((function(e){return e.docs.filter((function(e){return!!e.data().due&&e.data().due.seconds<=r.getTime()/1e3&&(!e.data().defer||e.data().defer.seconds<(new Date).getTime()/1e3)&&!1===e.data().isComplete&&a[e.id]})).sort((function(e,t){return e.data().due.seconds-t.data().due.seconds}))})).catch(console.error);case 4:return s=e.sent,e.abrupt("return",s.map((function(e){return e.id})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(u.a)(c.a.mark((function e(t){var a,n,r,s,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:new Date(1900,1,1),n=i.length>2&&void 0!==i[2]?i[2]:new Date(2100,1,1),r=i.length>3&&void 0!==i[3]&&i[3],e.next=5,E("users",t,"tasks").get().then((function(e){return e.docs.filter((function(e){return!!e.data().due&&(!!e.data().defer&&(new Date(1e3*e.data().due.seconds)<=n&&new Date(1e3*e.data().due.seconds)>=a&&new Date>=new Date(1e3*e.data().defer.seconds)))})).filter((function(e){return!e.data().isComplete})).sort((function(e,t){return e.data().due.seconds-t.data().due.seconds}))})).catch(console.error);case 5:return s=e.sent,e.abrupt("return",r?s.map((function(e){return[e.id,e.data()]})):s.map((function(e){return e.id})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(u.a)(c.a.mark((function e(t,a){var n,r,s,i,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("DEPERCATED: use instead selectTasksInRange"),e.next=3,T(t);case 3:n=e.sent,r=new Date,s=[],i=[],o=0;case 8:if(!(o<=7)){e.next=19;break}return e.next=11,R(t,a,r);case 11:u=e.sent,l=u,s.push(u.filter((function(e){return!i.includes(e)}))),i=l,r.setDate(r.getDate()+1);case 16:o++,e.next=8;break;case 19:return e.abrupt("return",s.map((function(e){return e.filter((function(e){return n.indexOf(e)<0}))})));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(u.a)(c.a.mark((function e(t,a){var n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:return n=e.sent,e.next=5,_(t,a);case 5:return r=e.sent,s=r.filter((function(e){return n.indexOf(e)<0})),e.abrupt("return",[n,s]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"tasks").get().then((function(e){return e.docs.filter((function(e){return e.id===a}))}));case 2:if(!(n=e.sent[0])){e.next=5;break}return e.abrupt("return",n.data());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(u.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,a);case 2:return delete(r=e.sent)[n],e.next=6,E("users",t,"tasks",a).set(r).catch(console.error);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(c.a.mark((function e(t){var a,n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n={},r=[],e.next=5,E("users",t,"projects").get();case 5:return e.sent.docs.forEach((function(e){if(e.exists&&!0===e.data().top_level){n[e.id]=e.data().name,a[e.data().name]=e.id;var t={};t.id=e.id,t.name=e.data().name,t.sortOrder=e.data().order,r.push(t)}})),r.sort((function(e,t){return e.sortOrder-t.sortOrder})),s=[n,a,r],e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(u.a)(c.a.mark((function e(t){var a,n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n={},e.next=4,E("users",t,"projects").get().then((function(e){return e.docs.forEach((function(e){e.exists&&(n[e.id]=e.data().name,a[e.data().name]=e.id)}))})).catch(console.error);case 4:return r={},s={},e.next=8,E("users",t,"tags").get().then((function(e){return e.docs.forEach((function(e){e.exists&&(s[e.id]=e.data().name,r[e.data().name]=e.id)}))})).catch(console.error);case 8:return e.abrupt("return",[[n,a],[s,r]]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return W.apply(this,arguments)}function W(){return(W=Object(u.a)(c.a.mark((function e(t){var a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n={},r=[],e.next=5,E("users",t,"perspectives").get().then((function(e){return e.docs.forEach((function(e){e.exists&&(n[e.id]={name:e.data().name,query:e.data().query,avail:e.data().avail,tord:e.data().tord},a[e.data().name]={id:e.id,query:e.data().query,avail:e.data().avail,tord:e.data().tord},r.push(Object(k.a)({id:e.id},e.data())))}))})).catch(console.error);case 5:return r.sort((function(e,t){return e.order-t.order})),e.abrupt("return",[n,a,r]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(u.a)(c.a.mark((function e(t,a,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"projects",a).update(n).catch(console.error);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,a){return G.apply(this,arguments)}function G(){return(G=Object(u.a)(c.a.mark((function e(t,a,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"tasks",a).update(n).catch(console.error);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(u.a)(c.a.mark((function e(t,a,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"perspectives",a).update(n).catch(console.error);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(c.a.mark((function e(t,a){var n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.project){e.next=7;break}return e.next=3,T(t);case 3:n=e.sent.length,a.order=n,e.next=11;break;case 7:return e.next=9,ge(t,a.project);case 9:r=e.sent.children.length,a.order=r;case 11:return a.defer||(a.defer=new Date),e.next=14,E("users",t,"tasks").add(a);case 14:return s=e.sent.id,e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t,a){return X.apply(this,arguments)}function X(){return(X=Object(u.a)(c.a.mark((function e(t,a,n){var r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.size=function(e){var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a},!n){e.next=8;break}return e.next=4,ge(t,n);case 4:r=e.sent.children.length,a.parent=n,e.next=14;break;case 8:return e.t0=Object,e.next=11,U(t);case 11:e.t1=e.sent[0],r=e.t0.size.call(e.t0,e.t1),a.parent="";case 14:return a.order=r,a.children={},e.next=18,E("users",t,"projects").add(a);case 18:return s=e.sent.id,e.abrupt("return",s);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(u.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=E("users",t,"perspectives"),e.t1=k.a,e.next=4,B(t);case 4:return e.t2=e.sent[2].length,e.t3={order:e.t2},e.t4=a,e.t5=(0,e.t1)(e.t3,e.t4),e.next=10,e.t0.add.call(e.t0,e.t5);case 10:return e.abrupt("return",e.sent.id);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(u.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"tags").add({name:a});case 2:return e.abrupt("return",e.sent.id);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(u.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"tasks",a).update({isComplete:!0});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t,a){return ie.apply(this,arguments)}function ie(){return(ie=Object(u.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"projects").get().then(O.dump).then((function(e){return e.docs.filter((function(e){return e.id===n}))})).then(O.dump).then((function(e){return e[0].data().children}));case 2:return delete(r=e.sent)[a],e.next=6,E("users",t,"projects",n).update({children:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t,a){return ce.apply(this,arguments)}function ce(){return(ce=Object(u.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"projects").get().then((function(e){return e.docs.filter((function(e){return e.id===n}))[0].data().children}));case 2:return(r=e.sent)[a]="task",e.next=6,E("users",t,"projects",n).update({children:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(u.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"projects").get().then((function(e){return e.docs.filter((function(e){return e.id===n}))[0].data().children}));case 2:return(r=e.sent)[a]="project",e.next=6,E("users",t,"projects",n).update({children:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(u.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"projects").get().then(O.dump).then((function(e){return e.docs.filter((function(e){return e.id===n}))})).then(O.dump).then((function(e){return e[0].data().children}));case 2:return delete(r=e.sent)[a],e.next=6,E("users",t,"projects",n).update({children:r});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(){return(pe=Object(u.a)(c.a.mark((function e(t,a){var n,r,s=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(s.length>2&&void 0!==s[2])||s[2],e.next=3,E("users",t,"tasks").get().then((function(e){return e.docs.filter((function(e){return e.id===a}))[0].data()}));case 3:if(""===(r=e.sent).project||!n){e.next=7;break}return e.next=7,se(t,a,r.project);case 7:return e.next=9,E("users",t,"tasks",a).delete().catch(console.error);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(u.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"perspectives",a).delete();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){return me.apply(this,arguments)}function me(){return(me=Object(u.a)(c.a.mark((function e(t,a){var n,r,s,i,o,u,l,p,d,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge(t,a);case 2:r=e.sent,s=Object(j.a)(r.children);try{for(s.s();!(i=s.n()).done;)"project"===(o=i.value).type?fe(t,o.content.id):Z(t,o.content,{project:""})}catch(c){s.e(c)}finally{s.f()}return e.next=7,ye(t);case 7:u=e.sent,l=(n=[]).concat.apply(n,Object(y.a)(u)),p=Object(j.a)(l),e.prev=10,p.s();case 12:if((d=p.n()).done){e.next=22;break}return f=d.value,e.next=16,q(t,f);case 16:if(e.t0=e.sent.project,e.t1=a,e.t0!==e.t1){e.next=20;break}Z(t,f,{project:""});case 20:e.next=12;break;case 22:e.next=27;break;case 24:e.prev=24,e.t2=e.catch(10),p.e(e.t2);case 27:return e.prev=27,p.f(),e.finish(27);case 30:return e.next=32,E("users",t,"projects",a).delete().catch(console.error);case 32:case"end":return e.stop()}}),e,null,[[10,24,27,30]])})))).apply(this,arguments)}function he(){return(he=Object(u.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("users",t,"tags",a).delete().catch(console.error);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e,t){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(c.a.mark((function e(t,a){var n,r,s,i,o,u,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]&&l[2],r=[],e.next=4,E("users",t,"projects").get().then((function(e){return e.docs}));case 4:if(s=e.sent.filter((function(e){return e.id===a}))[0]){e.next=7;break}return e.abrupt("return",{id:a,children:[],is_sequential:!1,sortOrder:0,parentProj:0});case 7:i=c.a.mark((function e(){var a,s,i,l,p,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(w.a)(u[o],2),s=a[0],"task"!==(i=a[1])){e.next=8;break}return e.next=4,q(t,s);case 4:(l=e.sent)&&(l.isComplete||r.push({type:"task",content:s,sortOrder:l.order})),e.next=20;break;case 8:if("project"!==i){e.next=20;break}if(!n){e.next=16;break}return e.next=12,ge(t,s);case 12:(p=e.sent)&&r.push({type:"project",content:p,is_sequential:p.is_sequential,sortOrder:p.sortOrder}),e.next=20;break;case 16:return e.next=18,E("users",t,"projects").get().then((function(e){return e.docs}));case 18:(d=e.sent.filter((function(e){return e.id===s}))[0])&&r.push({type:"project",content:{id:s},is_sequential:d.data().is_sequential,sortOrder:d.data().order});case 20:case"end":return e.stop()}}),e)})),o=0,u=Object.entries(s.data().children);case 9:if(!(o<u.length)){e.next=14;break}return e.delegateYield(i(),"t0",11);case 11:o++,e.next=9;break;case 14:return r.sort((function(e,t){return e.sortOrder-t.sortOrder})),e.abrupt("return",{id:a,children:r,is_sequential:s.data().is_sequential,sortOrder:s.data().order,parentProj:s.data().parent});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return(be=Object(u.a)(c.a.mark((function e(t){var a,n,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=Object(u.a)(c.a.mark((function e(t,a){var n,s,i,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,E("users",t,"projects").get().then((function(e){return e.docs}));case 3:return s=e.sent.filter((function(e){return e.id===a}))[0],e.next=6,ge(t,a);case 6:if(i=e.sent,!s.data().is_sequential){e.next=23;break}if(!(o=i.children[0])){e.next=21;break}if("project"!==o.type){e.next=20;break}return e.t0=Object,e.t1=n,e.next=15,r(t,o.content.id);case 15:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2),n[o.content.id]=!0,e.next=21;break;case 20:"task"===o.type&&(n[o.content]=!0);case 21:e.next=26;break;case 23:return l=i.children,e.next=26,Promise.all(l.map(function(){var e=Object(u.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("project"!==a.type){e.next=10;break}return e.t0=Object,e.t1=n,e.next=5,r(t,a.content.id);case 5:e.t2=e.sent,e.t0.assign.call(e.t0,e.t1,e.t2),n[a.content.id]=!0,e.next=11;break;case 10:"task"===a.type&&(n[a.content]=!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)},r=function(e,t){return s.apply(this,arguments)},new Date,e.next=5,U(t);case 5:return a=e.sent[2],n={},new Date,e.next=11,Promise.all(a.map(function(){var e=Object(u.a)(c.a.mark((function e(a){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n[a.id]=!0,e.next=3,r(t,a.id);case 3:s=e.sent,Object.assign(n,s);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return e.next=13,T(t);case 13:return e.next=15,e.sent.forEach((function(e){return n[e]=!0}));case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(u.a)(c.a.mark((function e(t){var a,n,r,s,i,o,l,p,d,f,m,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,O.select.all(["isComplete","==",!0]));case 2:return a=e.sent,n={},e.next=6,Promise.all(a.map(function(){var e=Object(u.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,a);case 2:n[a]=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:return r=a.sort((function(e,t){var a=n[t],r=n[e];return a&&r?(a.completeDate?a.completeDate.seconds:1)-(r.completeDate?r.completeDate.seconds:1):1})),s=new Date,i=new Date,o=new Date,l=new Date,s.setHours(0,0,0,0),i.setDate(i.getDate()-1),i.setHours(0,0,0,0),o.setDate(o.getDate()-7),o.setHours(0,0,0,0),l.setMonth(l.getMonth()-1),l.setHours(0,0,0,0),p=r.filter((function(e){var t=n[e];return!!t.completeDate&&new Date(1e3*t.completeDate.seconds)>=s})),d=r.filter((function(e){var t=n[e];return!!t.completeDate&&(new Date(1e3*t.completeDate.seconds)>=i&&new Date(1e3*t.completeDate.seconds)<s)})),f=r.filter((function(e){var t=n[e];return!!t.completeDate&&(new Date(1e3*t.completeDate.seconds)>=o&&new Date(1e3*t.completeDate.seconds)<i)})),m=r.filter((function(e){var t=n[e];return!!t.completeDate&&(new Date(1e3*t.completeDate.seconds)>=l&&new Date(1e3*t.completeDate.seconds)<o)})),h=r.filter((function(e){var t=n[e];return!t.completeDate||new Date(1e3*t.completeDate.seconds)<l})),e.abrupt("return",[p,d,f,m,h]);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(){return(we=Object(u.a)(c.a.mark((function e(t,a,n,r){var s,i,o,u,l,p,d,f,m,h,g,v,b,y,k,w,j,x,E,O;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t,{name:r[0]+" ".concat(n,", ")+r[1],desc:r[2],isFlagged:!1,isFloating:!1,isComplete:!1,project:"",tags:[],timezone:a,repeat:{rule:"none"}});case 2:return e.next=4,K(t,{name:r[3],desc:r[4],isFlagged:!1,isFloating:!1,isComplete:!1,project:"",tags:[],timezone:a,repeat:{rule:"none"}});case 4:return e.next=6,K(t,{name:r[5],desc:r[6],isFlagged:!1,isFloating:!1,isComplete:!1,project:"",tags:[],timezone:a,repeat:{rule:"none"}});case 6:return e.next=8,$(t,{name:r[7],top_level:!0,is_sequential:!1});case 8:return s=e.sent,e.next=11,$(t,{name:r[8],top_level:!0,is_sequential:!1});case 11:return i=e.sent,o=new Date,u=new Date,o.setHours(o.getHours()-24),u.setHours(u.getHours()+20),e.next=18,K(t,{name:r[9],desc:r[10],isFlagged:!1,isFloating:!1,isComplete:!1,project:i,tags:[],timezone:a,due:o,repeat:{rule:"none"}});case 18:return l=e.sent,e.next=21,K(t,{name:r[11],desc:r[12],isFlagged:!1,isFloating:!1,isComplete:!1,project:i,tags:[],timezone:a,due:u,repeat:{rule:"none"}});case 21:return p=e.sent,e.next=24,oe(t,l,i);case 24:return e.next=26,oe(t,p,i);case 26:return u.setHours(u.getHours()+2),e.next=29,K(t,{name:r[13],desc:r[14],isFlagged:!1,isFloating:!1,isComplete:!1,project:"",tags:[],timezone:a,repeat:{rule:"none"}});case 29:return e.sent,e.next=32,K(t,{name:r[15],desc:"",isFlagged:!1,isFloating:!1,isComplete:!1,project:s,tags:[],timezone:a,repeat:{rule:"none"}});case 32:return d=e.sent,e.next=35,oe(t,d,s);case 35:return e.next=37,K(t,{name:r[16],desc:r[17],isFlagged:!1,isFloating:!1,isComplete:!1,project:s,tags:[],timezone:a,repeat:{rule:"none"}});case 37:return f=e.sent,e.next=40,oe(t,f,s);case 40:return e.next=42,K(t,{name:r[18],desc:r[19],isFlagged:!1,isFloating:!1,isComplete:!1,project:s,tags:[],timezone:a,repeat:{rule:"none"}});case 42:return m=e.sent,e.next=45,oe(t,m,s);case 45:return e.next=47,K(t,{name:r[20],desc:r[21],isFlagged:!1,isFloating:!1,isComplete:!1,project:s,tags:[],timezone:a,repeat:{rule:"none"}});case 47:return h=e.sent,e.next=50,oe(t,h,s);case 50:return e.next=52,K(t,{name:r[22],desc:r[23],isFlagged:!1,isFloating:!1,isComplete:!1,project:s,tags:[],timezone:a,repeat:{rule:"none"}});case 52:return g=e.sent,e.next=55,oe(t,g,s);case 55:return e.next=57,$(t,{name:r[24],top_level:!0,is_sequential:!1});case 57:return v=e.sent,e.next=60,Promise.all([ae(t,r[25]),ae(t,r[26]),ae(t,r[27]),ae(t,r[28])]);case 60:return b=e.sent,e.next=63,K(t,{name:r[29],desc:r[30],isFlagged:!1,isFloating:!1,isComplete:!1,project:v,tags:[b[2],b[3]],timezone:a,repeat:{rule:"none"}});case 63:return y=e.sent,e.next=66,oe(t,y,v);case 66:return e.next=68,K(t,{name:r[31],desc:r[32],isFlagged:!1,isFloating:!1,isComplete:!1,project:v,tags:[b[0]],timezone:a,repeat:{rule:"none"}});case 68:return k=e.sent,e.next=71,oe(t,k,v);case 71:return e.next=73,ee(t,{name:r[33],query:r[34]});case 73:return e.next=75,$(t,{name:r[35],top_level:!0,is_sequential:!1});case 75:return w=e.sent,e.next=78,K(t,{name:r[36],desc:"",isFlagged:!1,isFloating:!1,isComplete:!1,project:w,tags:[],timezone:a,repeat:{rule:"none"}});case 78:return j=e.sent,e.next=81,oe(t,j,w);case 81:return e.next=83,K(t,{name:r[37],desc:"",isFlagged:!1,isFloating:!1,isComplete:!1,project:w,tags:[],timezone:a,repeat:{rule:"none"}});case 83:return x=e.sent,e.next=86,oe(t,x,w);case 86:return e.next=88,K(t,{name:r[38],desc:"",isFlagged:!1,isFloating:!1,isComplete:!1,project:w,tags:[],timezone:a,repeat:{rule:"none"}});case 88:return E=e.sent,e.next=91,oe(t,E,w);case 91:return e.next=93,K(t,{name:r[39],desc:r[40],isFlagged:!1,isFloating:!1,isComplete:!1,project:w,tags:[],timezone:a,repeat:{rule:"none"}});case 93:return O=e.sent,e.next=96,oe(t,O,w);case 96:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je={util:O,getTasks:function(e){return D.apply(this,arguments)},getTasksWithQuery:S,getInboxTasks:T,getDSTasks:_,getInboxandDS:function(e,t){return L.apply(this,arguments)},removeParamFromTask:function(e,t,a){return z.apply(this,arguments)},getTopLevelProjects:U,getProjectsandTags:function(e){return H.apply(this,arguments)},getPerspectives:B,modifyProject:function(e,t,a){return V.apply(this,arguments)},modifyTask:Z,modifyPerspective:function(e,t,a){return Q.apply(this,arguments)},newProject:$,newPerspective:ee,newTag:ae,newTask:K,completeTask:function(e,t){return re.apply(this,arguments)},dissociateTask:se,associateTask:oe,associateProject:function(e,t,a){return ue.apply(this,arguments)},dissociateProject:function(e,t,a){return le.apply(this,arguments)},deleteTask:function(e,t){return pe.apply(this,arguments)},deletePerspective:function(e,t){return de.apply(this,arguments)},deleteProject:fe,selectTasksInRange:function(e){return I.apply(this,arguments)},getProjectStructure:ge,getItemAvailability:function(e){return be.apply(this,arguments)},getTaskInformation:q,getDSRow:function(e,t){return F.apply(this,arguments)},deleteTag:function(e,t){return he.apply(this,arguments)},getCompletedTasks:ye,onBoard:function(e,t,a,n){return we.apply(this,arguments)}},xe=function(){var e={taskFilter:/([^\w\d\s\[]{1,2}[\w\s]+)/gi,taskCaptureGroup:/\[(([^\w\d\s]{1,2}[\w\s]+) *)*?\]/gi,logicCaptureGroup:/(.*) *([<=>]) *(.*)/gi,globalCaptureGroup:/\[(([^\w\d\s]{1,2}[\w\s]+) *)*?\](\$\w+)* *[<=>]* * *(\$\w+)*/gi,clear:function(){this.taskFilter.lastIndex=0,this.taskCaptureGroup.lastIndex=0,this.logicCaptureGroup.lastIndex=0,this.globalCaptureGroup.lastIndex=0}},t=function(e){return e.split("$").map((function(e){return e.trim()}))},a=function(){var e;switch(arguments.length<=0?void 0:arguments[0]){case"today":e=new Date}return e},n=function(){var t=Object(u.a)(c.a.mark((function t(a,r,s,i){var o,l,p,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=i?[i]:[],p=[],d=[],t.next=5,Promise.all(r.match(e.taskFilter).map(function(){var e=Object(u.a)(c.a.mark((function e(t){var o,u,f,m,h,g,v,b,k,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("!"===(t=t.trim())[0]){e.next=38;break}e.t0=t[0],e.next="."===e.t0?5:"#"===e.t0?35:36;break;case 5:return o=s[0][1][t.slice(1,t.length)],l.push(["project","==",o]),e.next=9,je.getProjectStructure(a,o);case 9:u=e.sent,f=Object(j.a)(u.children),e.prev=11,f.s();case 13:if((m=f.n()).done){e.next=26;break}if("project"!==(h=m.value).type){e.next=24;break}return e.t1=[],e.t2=Object(y.a)(p),e.t3=y.a,e.next=21,n(a,r.replace(t.slice(1,t.length),s[0][0][h.content.id]),s,i);case 21:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),p=e.t1.concat.call(e.t1,e.t2,e.t5);case 24:e.next=13;break;case 26:e.next=31;break;case 28:e.prev=28,e.t6=e.catch(11),f.e(e.t6);case 31:return e.prev=31,f.f(),e.finish(31);case 34:return e.abrupt("break",36);case 35:l.push(["tags","has",s[1][1][t.slice(1,t.length)]]);case 36:e.next=72;break;case 38:e.t7=t[1],e.next="."===e.t7?41:"#"===e.t7?71:72;break;case 41:return g=s[0][1][t.slice(2,t.length)],l.push(["project","!=",g]),e.next=45,je.getProjectStructure(a,g);case 45:v=e.sent,b=Object(j.a)(v.children),e.prev=47,b.s();case 49:if((k=b.n()).done){e.next=62;break}if("project"!==(w=k.value).type){e.next=60;break}return e.t8=[],e.t9=Object(y.a)(d),e.t10=y.a,e.next=57,n(a,r.replace(t,"."+s[0][0][w.content.id]),s,i);case 57:e.t11=e.sent,e.t12=(0,e.t10)(e.t11),d=e.t8.concat.call(e.t8,e.t9,e.t12);case 60:e.next=49;break;case 62:e.next=67;break;case 64:e.prev=64,e.t13=e.catch(47),b.e(e.t13);case 67:return e.prev=67,b.f(),e.finish(67);case 70:return e.abrupt("break",72);case 71:l.push(["tags","!has",s[1][1][t.slice(2,t.length)]]);case 72:l.push(["isComplete","==",!1]);case 73:case"end":return e.stop()}}),e,null,[[11,28,31,34],[47,64,67,70]])})));return function(t){return e.apply(this,arguments)}}()));case 5:return t.t0=[],t.t1=Object(y.a)(p),t.t2=y.a,t.next=10,je.getTasksWithQuery(a,(o=je.util.select).all.apply(o,l));case 10:return t.t3=t.sent,t.t4=(0,t.t2)(t.t3),t.abrupt("return",t.t0.concat.call(t.t0,t.t1,t.t4).filter((function(e){return!d.includes(e)})));case 13:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),r=function(){var e=Object(u.a)(c.a.mark((function e(t,a,n,r,s){var i,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(a[0].map(function(){var e=Object(u.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.getTaskInformation(t,a);case 2:return e.t0=e.sent,e.t1=a,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:i=e.sent,a[1].includes("due")?o=i.map((function(e){return[e[1],e[0].due?new Date(1e3*e[0].due.seconds):void 0]})):a[1].includes("defer")&&(o=i.map((function(e){return[e[1],e[0].defer?new Date(1e3*e[0].defer.seconds):void 0]}))),l=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},e.t0=n,e.next="="===e.t0?8:">"===e.t0?10:"<"===e.t0?12:">="===e.t0?14:"<="===e.t0?16:18;break;case 8:return o=o.filter((function(e){return l(e[1],r)})),e.abrupt("break",18);case 10:return o=s?o.filter((function(e){return e[1]>r})):o.filter((function(e){return e[1]<r})),e.abrupt("break",18);case 12:return o=s?o.filter((function(e){return e[1]<r})):o.filter((function(e){return e[1]>r})),e.abrupt("break",18);case 14:return o=s?o.filter((function(e){return e[1]>=r})):o.filter((function(e){return e[1]<=r})),e.abrupt("break",18);case 16:return o=s?o.filter((function(e){return e[1]<=r})):o.filter((function(e){return e[1]>=r})),e.abrupt("break",18);case 18:return e.abrupt("return",o.map((function(e){return e[0]})));case 19:case"end":return e.stop()}}),e)})));return function(t,a,n,r,s){return e.apply(this,arguments)}}();return{calc:function(){var s=Object(u.a)(c.a.mark((function s(i,o,l,p){var d,f,m,h,g,v;return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,je.getProjectsandTags(i);case 2:return d=s.sent,s.next=5,o.match(e.globalCaptureGroup);case 5:if(f=s.sent){s.next=8;break}return s.abrupt("return",[]);case 8:s.t0=l,s.next="avail"===s.t0?11:"flagged"===s.t0?13:15;break;case 11:return m=["defer","<",(new Date).getTime()/1e3],s.abrupt("break",15);case 13:return m=["isFlagged","==",!0],s.abrupt("break",15);case 15:return s.next=17,Promise.all(f.map(function(){var s=Object(u.a)(c.a.mark((function s(o){var u,l,p,f,h,g,v;return c.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.clear(),!(u=e.logicCaptureGroup.exec(o))){s.next=30;break}if(p=Object(w.a)(u,4),f=p[1],h=p[2],g=p[3],v=[t(f),t(g)],f=v[0],g=v[1],!e.taskCaptureGroup.test(f)){s.next=19;break}return s.next=10,n(i,f[0],d,m);case 10:return s.t0=s.sent,s.t1=f[1],f=[s.t0,s.t1],g=a(g[1]),s.next=16,r(i,f,h,g,!0);case 16:l=s.sent,s.next=28;break;case 19:return s.next=21,n(i,g[0],d,m);case 21:return s.t2=s.sent,s.t3=g[1],g=[s.t2,s.t3],f=a(f[1]),s.next=27,r(i,g,h,f,!1);case 27:l=s.sent;case 28:s.next=33;break;case 30:return s.next=32,n(i,o,d,m);case 32:l=s.sent;case 33:return s.abrupt("return",l);case 34:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()));case 17:return h=s.sent,h=Object(y.a)(new Set(h.flat(1))),s.next=21,Promise.all(h.map(function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=k.a,e.t1={id:t},e.next=4,je.getTaskInformation(i,t);case 4:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){return e}));case 21:g=s.sent,s.t1=p,s.next="duas"===s.t1?25:"duds"===s.t1?27:"deas"===s.t1?29:"deds"===s.t1?31:33;break;case 25:return g.sort((function(e,t){return(e.due?e.due.seconds:1e10)-(t.due?t.due.seconds:1e10)})),s.abrupt("break",33);case 27:return g.sort((function(e,t){return(t.due?t.due.seconds:1)-(e.due?e.due.seconds:1)})),s.abrupt("break",33);case 29:return g.sort((function(e,t){return(e.defer?e.defer.seconds:1e10)-(t.defer?t.defer.seconds:1e10)})),s.abrupt("break",33);case 31:return g.sort((function(e,t){return(t.defer?t.defer.seconds:1)-(e.defer?e.defer.seconds:1)})),s.abrupt("break",33);case 33:return s.next=35,je.getItemAvailability(i);case 35:return v=s.sent,"avail"===l&&(g=g.filter((function(e){return void 0!==v[e.id]}))),s.abrupt("return",g.map((function(e){return e.id})));case 38:case"end":return s.stop()}}),s)})));return function(e,t,a,n){return s.apply(this,arguments)}}()}}(),Ee={start:x.a.__init__,use:x.a.useDb,db:je,perspective:xe,flush:x.a.flush},Oe=a(162).parseFromTimeZone,De=a(39),Se=function(){function e(t){Object(l.a)(this,e),this.e=t,this.refresher=function(){},this.callbackRefresherReleased=!0,this.conflictResolution=1e3,this.releaseTimeout=void 0,this.doers={macro:{applyOrder:function(){var e=Object(u.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.items.length!==a.order.length&&console.error("Length of items and order length must be the same!"),e.next=3,Promise.all(a.order.map((function(e,n){var r=a.items[e];return"task"===r.type?t.db.modifyTask(a.uid,r.content,{order:n}):"project"===r.type?t.db.modifyProject(a.uid,r.content,{order:n}):void 0})));case 3:return e.abrupt("return",{uid:a.uid});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},tag:{create:function(){var e=Object(u.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.newTag(a.uid,a.name);case 2:return n=e.sent,e.abrupt("return",{uid:a.uid,id:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},task:{create:function(){var e=Object(u.a)(c.a.mark((function e(a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={desc:"",isFlagged:!1,isFloating:!1,isComplete:!1,project:a.pid?a.pid:"",tags:[],timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,repeat:{rule:"none"},name:a.name?a.name:""},a.due&&(n.due=a.due),a.defer&&(n.defer=a.defer),e.next=5,t.db.newTask(a.uid,n);case 5:return r=e.sent,a.pid&&""!=a.pid&&t.db.associateTask(a.uid,r,a.pid),e.abrupt("return",{uid:a.uid,tid:r});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(u.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getTaskInformation(a.uid,a.tid);case 2:return n=e.sent,e.next=5,t.db.modifyTask(a.uid,a.tid,a.query);case 5:return e.abrupt("return",{uid:a.uid,tid:a.tid,tInfo:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update__project:function(){var e=Object(u.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getTaskInformation(a.uid,a.tid);case 2:return n=e.sent,e.next=5,t.db.modifyTask(a.uid,a.tid,{project:a.project});case 5:if(!a.oldProject){e.next=8;break}return e.next=8,t.db.dissociateTask(a.uid,a.tid,a.oldProject);case 8:if(""===a.project){e.next=11;break}return e.next=11,t.db.associateTask(a.uid,a.tid,a.project);case 11:return e.abrupt("return",{uid:a.uid,tid:a.tid,tInfo:n});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update__uncomplete:function(){var e=Object(u.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getTaskInformation(a.uid,a.tid);case 2:return n=e.sent,e.next=5,t.db.modifyTask(a.uid,a.tid,{isComplete:!1,completeDate:new Date});case 5:return e.abrupt("return",{uid:a.uid,tid:a.tid,taskInfo:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update__complete:function(){var e=Object(u.a)(c.a.mark((function e(a){var n,r,s,i,o,u,l,p,d,f,m,h,g,v,b,y,k,w,j,x,E;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.modifyTask(a.uid,a.tid,{isComplete:!0,completeDate:new Date});case 2:return e.next=4,t.db.getTaskInformation(a.uid,a.tid);case 4:if(n=e.sent,r=n.due?n.isFloating?new Date(1e3*n.due.seconds):Oe(new Date(1e3*n.due.seconds).toISOString(),{timeZone:n.timezone}):void 0,s=n.defer?n.isFloating?new Date(1e3*n.defer.seconds):Oe(new Date(1e3*n.defer.seconds).toISOString(),{timeZone:n.timezone}):void 0,"none"===(i=n.repeat).rule||!r){e.next=81;break}if("daily"!==(o=i.rule)){e.next=14;break}s?(u=r-s,r.setDate(r.getDate()+1),t.db.modifyTask(a.uid,a.tid,{isComplete:!1,due:r,defer:new Date(r-u)})):(r.setDate(r.getDate()+1),t.db.modifyTask(a.uid,a.tid,{isComplete:!1,due:r})),e.next=81;break;case 14:if("weekly"!==o){e.next=80;break}if(!s){e.next=49;break}if(l=i.on,p="",d=r-s,!l){e.next=44;break}case 20:if(l.includes(p)){e.next=42;break}r.setDate(r.getDate()+1),f=r.getDay(),e.t0=f,e.next=1===e.t0?26:2===e.t0?28:3===e.t0?30:4===e.t0?32:5===e.t0?34:6===e.t0?36:0===e.t0?38:40;break;case 26:return p="M",e.abrupt("break",40);case 28:return p="T",e.abrupt("break",40);case 30:return p="W",e.abrupt("break",40);case 32:return p="Th",e.abrupt("break",40);case 34:return p="F",e.abrupt("break",40);case 36:return p="S",e.abrupt("break",40);case 38:return p="Su",e.abrupt("break",40);case 40:e.next=20;break;case 42:e.next=46;break;case 44:r.setDate(r.getDate()+7),s.setDate(s.getDate()+7);case 46:t.db.modifyTask(a.uid,a.tid,{isComplete:!1,due:r,defer:new Date(r-d)}),e.next=78;break;case 49:if(!(m=i.on)){e.next=76;break}h="";case 52:if(m.includes(h)){e.next=74;break}r.setDate(r.getDate()+1),g=r.getDay(),e.t1=g,e.next=1===e.t1?58:2===e.t1?60:3===e.t1?62:4===e.t1?64:5===e.t1?66:6===e.t1?68:0===e.t1?70:72;break;case 58:return h="M",e.abrupt("break",72);case 60:return h="T",e.abrupt("break",72);case 62:return h="W",e.abrupt("break",72);case 64:return h="Th",e.abrupt("break",72);case 66:return h="F",e.abrupt("break",72);case 68:return h="S",e.abrupt("break",72);case 70:return h="Su",e.abrupt("break",72);case 72:e.next=52;break;case 74:e.next=77;break;case 76:r.setDate(r.getDate()+7);case 77:t.db.modifyTask(a.uid,a.tid,{isComplete:!1,due:r});case 78:e.next=81;break;case 80:if("monthly"===o)if(s){if(v=i.on,b=r.getDate(),y=r.getDate(),k=r-s,v)for(;!v.includes(b.toString())&&(!v.includes("Last")||new Date(r.getFullYear(),r.getMonth(),r.getDate()).getDate()!==new Date(r.getFullYear(),r.getMonth()+1,0).getDate())||y===b;)r.setDate(r.getDate()+1),b=r.getDate();else r.setMonth(r.getMonth()+1);t.db.modifyTask(a.uid,a.tid,{isComplete:!1,due:r,defer:new Date(r-k)})}else{if(w=i.on)for(j=r.getDate(),x=r.getDate();!w.includes(j.toString())&&(!w.includes("Last")||new Date(r.getFullYear(),r.getMonth(),r.getDate()).getDate()!==new Date(r.getFullYear(),r.getMonth()+1,0).getDate())||x===j;)r.setDate(r.getDate()+1),j=r.getDate();else r.setMonth(r.getMonth()+1);t.db.modifyTask(a.uid,a.tid,{isComplete:!1,due:r})}else"yearly"===o&&(s?(E=r-s,r.setFullYear(r.getFullYear()+1),t.db.modifyTask(a.uid,a.tid,{isComplete:!1,due:r,defer:new Date(r-E)})):(r.setFullYear(r.getFullYear()+1),t.db.modifyTask(a.uid,a.tid,{isComplete:!1,due:r})));case 81:return e.abrupt("return",{message:"Todo TODO TODO Todo: undo pack?"});case 82:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},project:{create:function(){var e=Object(u.a)(c.a.mark((function e(a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={name:"",top_level:void 0===a.parent,is_sequential:!1},!a.parent){e.next=7;break}return e.next=4,t.db.newProject(a.uid,n,a.parent);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,t.db.newProject(a.uid,n);case 9:e.t0=e.sent;case 10:return r=e.t0,a.parent&&t.db.associateProject(a.uid,r,a.parent),e.abrupt("return",{uid:a.uid,pid:r});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),delete:function(){var e=Object(u.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.deleteProject(a.uid,a.pid);case 2:return a.parent&&t.db.dissociateProject(a.uid,a.pid,a.parent),e.abrupt("return",{uid:a.uid,TODO:"TODO"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update__name:function(){var e=Object(u.a)(c.a.mark((function e(a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getProjectsandTags(a.uid);case 2:return n=e.sent,r=n[0][0][a.id],e.next=6,t.db.modifyProject(a.uid,a.id,{name:a.name});case 6:return e.abrupt("return",{projectName:r,uid:a.uid});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update__pstate:function(){var e=Object(u.a)(c.a.mark((function e(a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getProjectStructure(a.uid,a.id,!1);case 2:return n=e.sent,r=n,e.next=6,t.db.modifyProject(a.uid,a.id,{is_sequential:a.is_sequential});case 6:return e.abrupt("return",{is_sequential:r,uid:a.uid});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),associate:function(){var e=Object(u.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.associateTask(a.uid,a.tid,a.pid);case 2:return e.abrupt("return",{uid:a.uid,tid:a.tid});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dissociate:function(){var e=Object(u.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.dissociateTask(a.uid,a.tid,a.pid);case 2:return e.abrupt("return",{uid:a.uid,tid:a.tid});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},perspective:{create:function(){var e=Object(u.a)(c.a.mark((function e(a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:"",avail:"remain",tord:"duds",query:""},e.next=3,t.db.newPerspective(a.uid,n);case 3:return r=e.sent,e.abrupt("return",{uid:a.uid,pid:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update__perspective:function(){var e=Object(u.a)(c.a.mark((function e(a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.getPerspectives(a.uid);case 2:return n=e.sent,r=n[0][a.id],e.next=6,t.db.modifyPerspective(a.uid,a.id,a.payload);case 6:return e.abrupt("return",{perspectiveObject:r,uid:a.uid});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),delete__perspective:function(){var e=Object(u.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("perspective delete gruntman func"),e.next=3,t.db.deletePerspective(a.uid,a.id);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},this.undoers={task:{update:"task.set"}},this.backlog=[],this.undolog=[],this.taskLog={},this.canUndo={task:{update:!0}},this.schedulers={},this.updateLock=!1,this.updateInterval=void 0,De(this)}return Object(p.a)(e,[{key:"halt",value:function(){for(var e in this.schedulers)clearTimeout(this.schedulers[e]);this.updateInterval&&clearTimeout(this.updateInterval),this.updateInterval=void 0}},{key:"lockUpdates",value:function(){this.updateLock=!0,this.updateInterval&&clearTimeout(this.updateInterval),this.updateInterval=void 0}},{key:"unlockUpdates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:580;this.updateLock=!1,this.updateInterval=setTimeout(this.refresher,e)}},{key:"requestRefresh",value:function(){!this.updateLock&&this.callbackRefresherReleased&&this.refresher()}},{key:"registerRefresher",value:function(e){var t=this;this.refresher=e,this.releaseTimeout&&clearTimeout(this.releaseTimeout),this.callbackRefresherReleased=!1,this.releaseTimeout=setTimeout((function(){t.callbackRefresherReleased=!0,t.releaseTimeout=void 0}),this.conflictResolution)}},{key:"registerScheduler",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;this.schedulers[t]&&clearTimeout(this.schedulers[t]),this.schedulers[t]=setTimeout(e,a)}},{key:"do",value:function(){var e=Object(u.a)(c.a.mark((function e(t,a,n,r,s){var i,o,u,l,p=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.releaseTimeout&&clearTimeout(this.releaseTimeout),this.callbackRefresherReleased=!1,this.releaseTimeout=setTimeout((function(){p.callbackRefresherReleased=!0,p.releaseTimeout=void 0}),this.conflictResolution),i=this.random(),o=t.split("."),u=this.doers;o.length>0;)u=u[o.shift()];return r?this.undolog.push(i):this.backlog.push(i),e.next=10,u(a);case 10:return l=e.sent,this.taskLog[i]=[t,l],this.updateLock||n||this.refresher(),s&&this.refresher(),e.next=16,l;case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r,s){return e.apply(this,arguments)}}()},{key:"random",value:function(){return(65536*(1+Math.random())|0).toString(16)+"-"+(65536*(1+Math.random())|0).toString(16)}}]),e}(),Ne=a(37),Te=(a(169),a(261),a(264),a(39)),Ce=(g.Plugins.Storage,function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;Object(l.a)(this,a);var r=["Hello,","Hey,","Heyo,","Aloha,","Yo!"];return(n=t.call(this,e)).state={authMode:0,showExtra:!1,greeting:r[Math.floor(Math.random()*r.length)]},Te(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"doLogin",value:function(){var e=this;Ne.auth().setPersistence(Ne.auth.Auth.Persistence.LOCAL).then((function(){Ne.auth().signInWithEmailAndPassword(b()("#email").val(),b()("#password").val()).then((function(){Ne.auth().currentUser.emailVerified?e.props.dispatch({service:"firebase",operation:"login"}):e.setState({authMode:3})})).catch((function(e){e.code,e.message;console.log(e),b()(".auth-upf").addClass("wrong")}))}))}},{key:"doCreate",value:function(){var e=this,t=!1;Ne.auth().createUserWithEmailAndPassword(b()("#email").val(),b()("#password").val()).catch((function(a){e.setState({showExtra:!0},(function(){return b()("#need-verify").html(a.message)})),t=!0})).then((function(){t||(Ne.auth().currentUser.sendEmailVerification(),Ne.auth().currentUser.updateProfile({displayName:b()("#name").val()}),e.setState({authMode:4,showExtra:!0}))}))}},{key:"dispatchCreate",value:function(){var e=this;Ne.auth().currentUser.reload().then((function(){Ne.auth().currentUser.emailVerified?e.props.dispatch({service:"firebase",operation:"create"}):b()("#need-verify").html("Please double-check that you tapped the verification link in your email.")}))}},{key:"doRecover",value:function(){var e=!1,t=this;Ne.auth().sendPasswordResetEmail(b()("#email").val()).catch((function(a){t.setState({showExtra:!0}),b()("#need-verify").html(a.message),e=!0})).then((function(){e||t.setState({authMode:5})}))}},{key:"doLocal",value:function(){this.props.dispatch({service:"json",operation:"login"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"auth-content-wrapper"},r.a.createElement("div",{id:"auth-left-menu"},r.a.createElement("div",{className:"menu-area",style:{height:"100%"}},r.a.createElement("div",{className:"auth-component"}),r.a.createElement("div",{className:"auth-component"}),r.a.createElement("span",{id:"auth-image-credit"},"Image by ",r.a.createElement("span",{style:{fontWeight:500}},"Tobias Keller/Pawe\u0142 Czerwi\u0144ski")))),r.a.createElement("div",{id:"authwall"},r.a.createElement("h1",{id:"greeting-auth"},this.state.greeting),r.a.createElement("span",{id:"welcome-auth-msg"},"Welcome to Condution."),r.a.createElement("h3",{className:"greeting-auth-subtitle",id:"greeting-auth-normal"},function(){switch(e.state.authMode){case 2:return"No worries! Let's recover your password.";default:return"Good to see you. Please sign in or tap Use Locally."}}()),r.a.createElement("input",{className:"auth-upf",id:"name",type:"text",autoComplete:"off",defaultValue:"",placeholder:"What should we call you?",style:{display:1===this.state.authMode?"block":"none"}}),r.a.createElement("input",{className:"auth-upf",id:"email",type:"email",autoComplete:"off",defaultValue:"",placeholder:"Email"}),r.a.createElement("input",{className:"auth-upf",id:"password",type:"password",autoComplete:"off",defaultValue:"",placeholder:"Password",style:{display:2!==this.state.authMode?"block":"none"},onKeyPress:function(t){if("Enter"===t.key)switch(e.state.authMode){case 0:e.doLogin();break;case 1:e.doCreate();break;case 2:e.doRecover();break;case 4:e.dispatchCreate();break;case 5:e.doLogin()}}}),function(){if(3===e.state.authMode||4===e.state.authMode||5===e.state.authMode||e.state.showExtra)return r.a.createElement("span",{id:"need-verify"},function(){switch(e.state.authMode){case 3:return"Check and verify your email, then tap Let's Do This!";case 4:return"Check and verify your email, then tap Proceed!";case 5:return"Check and verify your email, then return to login."}}())}(),r.a.createElement("span",{id:"recover-password",style:{display:3===this.state.authMode?"none":"block"},onClick:function(){switch(e.state.authMode){case 2:return e.setState({authMode:0});default:return e.setState({authMode:2})}}},function(){switch(e.state.authMode){case 2:return"Remembered? Login";default:return"Recover Password"}}()),r.a.createElement("div",{id:"auth-actiongroup"},r.a.createElement("div",{id:"newuser",onClick:function(){switch(e.state.authMode){case 1:return e.setState({authMode:0});default:return e.setState({authMode:1})}}},function(){switch(e.state.authMode){case 1:return"Log in";default:return"Make an account"}}()),r.a.createElement("div",{id:"login",onClick:function(){switch(e.state.authMode){case 0:e.doLogin();break;case 1:e.doCreate();break;case 2:e.doRecover();break;case 4:e.dispatchCreate()}}},r.a.createElement("i",{className:"fas fa-snowboarding",style:{paddingRight:"5px"}}),r.a.createElement("span",{id:"login-text"},function(){switch(e.state.authMode){case 0:case 3:return"Let's Do This!";case 1:return"Verify Email!";case 2:return"Let's Recover!";case 4:case 5:return"Proceed!"}}())),function(){if(2!==e.state.authMode)return r.a.createElement("div",{className:"convert-src",id:"ulac",onClick:e.doLocal},"Use Locally")}())))}}]),a}(n.Component));a(71),a(39);var _e=function(e){return r.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement("div",{style:{marginRight:20,maxWidth:500}},r.a.createElement("b",null,"Condution v1.0.0-alpha.0")," ",r.a.createElement("br",null),r.a.createElement("i",null,"Like, why are you reading this?")," ",r.a.createElement("br",null),"If there is something here [",e.error,"], ",r.a.createElement("br",null),"then talk to Jack or something. Or fix it. ",r.a.createElement("br",null),"INTERNAL USE ONLY. DO NOT DISTRIBUTE."),r.a.createElement("div",{style:{marginLeft:20,maxWidth:500}},r.a.createElement("br",null),r.a.createElement("pre",{style:{fontSize:10}},"\n    Copyright (C) 2019-2020. Shabang Systems, LLC\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see https://www.gnu.org/licenses/.\n                    ")))},Pe=a(191),Re=a(39),Me=g.Plugins.Storage;Object(h.x)({swipeBackEnabled:!1});var Ie=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={authMode:"loader",uid:"",displayName:""},window.matchMedia("(prefers-color-scheme:dark)").matches?(b()("body").removeClass(),b()("body").addClass("condutiontheme-default-dark")):(b()("body").removeClass(),b()("body").addClass("condutiontheme-default-light")),n.gruntman=new Se(Ee),Re(Object(d.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this,e.next=3,Ee.start({firebase:Ne},"firebase","json");case 3:Me.get({key:"condution_stotype"}).then((function(e){switch(e.value){case"firebase":Ne.auth().onAuthStateChanged((function(e){e?(Ee.use("firebase",t.gruntman.requestRefresh),t.setState({authMode:"firebase",uid:e.uid,displayName:e.displayName})):t.authDispatch({operation:"logout"})}));break;case"json":Ee.use("json",t.gruntman.requestRefresh),a.setState({authMode:"json",uid:"hard-storage-user"});break;default:a.setState({authMode:"none",uid:void 0})}}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authDispatch",value:function(e){var t,a;switch(e.operation){case"login":switch(Ee.use(e.service,this.gruntman.requestRefresh),Me.set({key:"condution_stotype",value:e.service}),e.service){case"firebase":t=Ne.auth().currentUser.uid,a=Ne.auth().currentUser.displayName;break;default:t="hard-storage-user",a=""}this.setState({authMode:e.service,uid:t,displayName:a});break;case"create":switch(Ee.use(e.service,this.gruntman.requestRefresh),Me.set({key:"condution_stotype",value:e.service}),e.service){case"firebase":t=Ne.auth().currentUser.uid,a=Ne.auth().currentUser.displayName;break;default:t="hard-storage-user",a=""}console.log("I would be onboarding, but... alas."),this.setState({authMode:e.service,uid:t,displayName:a});break;case"logout":Me.set({key:"condution_stotype",value:"none"}),Ne.auth().signOut(),this.setState({authMode:"none",name:""})}}},{key:"render",value:function(){switch(this.state.authMode){case"loader":return r.a.createElement(_e,null);case"none":return r.a.createElement(Ce,{dispatch:this.authDispatch});case"firebase":case"json":return r.a.createElement(Pe.a,{engine:Ee,uid:this.state.uid,dispatch:this.authDispatch,gruntman:this.gruntman,displayName:this.state.displayName});default:return console.error("CentralDispatchError: Wut Esta ".concat(this.state.authMode)),r.a.createElement(_e,{isError:!0,error:this.state.authMode})}}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},47:function(e,t,a){"use strict";var n=a(46),r=a(34),s=a(1),i=a.n(s),o=a(4),c=a(9),u=a(10),l=a(7),p=a(11),d=a(12),f=a(6),m=a(0),h=a.n(m),g=a(88),v=a(149),b=a.n(v),y=(a(91),a(28)),k=a(79),w=a(193),j=(a(136),a(39)),x=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),n=t.call(this,e),j(Object(l.a)(n)),n.state={name:"",rule:"none",advanced:!1,on:void 0},n}return Object(u.a)(a,[{key:"loadTask",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.engine.db.getTaskInformation(this.props.uid,this.props.tid);case 2:t=e.sent,this.setState({name:t.name,rule:t.repeat?t.repeat.rule:"none",advanced:!!t.repeat&&void 0!==t.repeat.on,on:t.repeat?t.repeat.on:void 0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.loadTask()}},{key:"render",value:function(){var e=this;return h.a.createElement(f.f,{ref:this.props.reference,isOpen:this.props.isShown,onDidDismiss:function(){e.props.onDidDismiss&&e.props.onDidDismiss()},style:{borderRadius:5},cssClass:"task-repeat "+function(){switch(e.state.rule){case"none":case"daily":return"task-repeat__default";case"weekly":return e.state.advanced?"task-repeat__advanced-weekly":"task-repeat__default";case"monthly":return e.state.advanced?"task-repeat__advanced-monthly":"task-repeat__default";case"yearly":return"task-repeat__default"}}()},h.a.createElement("div",null,h.a.createElement("div",{className:"repeat-header"},h.a.createElement("span",{style:{display:"flex",alignItems:"center",width:"100%"}},h.a.createElement("b",{className:"bold-prefix"},"Repeat"),h.a.createElement("div",{className:"repeat-task-name"},this.state.name)),h.a.createElement("a",{className:"repeat-close",onClick:this.props.onDidDismiss},h.a.createElement("i",{className:"fa fa-times"}))),h.a.createElement("div",null,h.a.createElement("div",{className:"repeat-basic-row"},h.a.createElement("div",{className:"repeat-rule-selector"},h.a.createElement("span",null,h.a.createElement("i",{className:"repeat-label fa fa-redo"}),h.a.createElement("span",{className:"repeat-label"},"Repeat")),h.a.createElement(f.k,{className:"repeat-select",interface:"popover",value:this.state.rule,mode:"ios",onIonChange:function(t){e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{repeat:{rule:t.detail.value}}}),e.setState({rule:t.detail.value,advanced:!1,on:void 0})}},h.a.createElement(f.l,{className:"repeat-select__option",value:"none"},"None"),h.a.createElement(f.l,{className:"repeat-select__option",value:"daily"},"Daily"),h.a.createElement(f.l,{className:"repeat-select__option",value:"weekly"},"Weekly"),h.a.createElement(f.l,{className:"repeat-select__option",value:"monthly"},"Monthly"),h.a.createElement(f.l,{className:"repeat-select__option",value:"yearly"},"Yearly"))),h.a.createElement("a",{style:{color:"var(--decorative-light-alt)",float:"right",cursor:"pointer",display:["weekly","monthly"].includes(this.state.rule)?"inline":"none"},className:"fas "+(this.state.advanced?"fa-caret-down":"fa-caret-up"),onClick:function(){e.state.advanced?(e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{repeat:{rule:e.state.rule}}}),e.setState({rule:e.state.rule,advanced:!1,on:void 0})):(e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{repeat:{rule:e.state.rule,on:[]}}}),e.setState({rule:e.state.rule,advanced:!0,on:[]}))}}))),h.a.createElement("div",{style:{margin:"10px 20px",color:"var(--content-normal-alt)"}},function(){if(e.state.advanced)switch(e.state.rule){case"weekly":return h.a.createElement("div",{className:"repeat-weekgrid"},[["M","M"],["T","T"],["W","W"],["Th","Th"],["F","F"],["S","S"],["Su","Su"]].map((function(t){return h.a.createElement("a",{key:t,className:"repeat-weekgrid-number "+(e.state.on&&e.state.on.includes(t[0])?"repeat-weekgrid-number-selected":""),onClick:function(){if(e.state.on.includes(t[0])){var a=e.state.on.filter((function(e){return e!==t[0]}));e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{repeat:{rule:e.state.rule,on:a}}}),e.setState({on:a})}else{var n=e.state.on;n.push(t[0]);var r=n;e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{repeat:{rule:e.state.rule,on:r}}}),e.setState({on:r})}}},t[1])})));case"monthly":return h.a.createElement("div",{className:"repeat-dategrid"},["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","Last"].map((function(t){return h.a.createElement("a",{key:t,className:"repeat-dategrid-number "+(e.state.on&&e.state.on.includes(t.toLowerCase())?"repeat-dategrid-number-selected":""),onClick:function(){if(e.state.on.includes(t.toLowerCase())){var a=e.state.on.filter((function(e){return e!==t.toLowerCase()}));e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{repeat:{rule:e.state.rule,on:a}}}),e.setState({on:a})}else{var n=e.state.on;n.push(t.toLowerCase());var r=n;e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{repeat:{rule:e.state.rule,on:r}}}),e.setState({on:r})}}},t)})))}}())))}}]),a}(m.Component),E=(a(39),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return h.a.createElement(f.f,{ref:this.props.reference,isOpen:this.props.isShown,onDidDismiss:function(){e.props.onDidDismiss&&e.props.onDidDismiss()},style:{borderRadius:5},cssClass:"tag-editor"},h.a.createElement("div",{className:"TagEditor-header"},h.a.createElement("span",{style:{display:"flex",alignItems:"center",width:"100%"}},h.a.createElement("b",{className:"bold-prefix"},"Tags")),h.a.createElement("a",{className:"TagEditor-close",onClick:this.props.onDidDismiss},h.a.createElement("i",{className:"fa fa-times"}))),h.a.createElement("div",{className:"tag-list"}))}}]),a}(m.Component)),O=(a(327),a(64),a(162).parseFromTimeZone),D=a(39),S=g.Keyframes.Spring({hide:{to:{taskHeight:38,taskMargin:"2px 8px",taskBackground:"",taskPadding:3,taskEditOpacity:0,taskEditMaxHeight:0,taskOpacity:1,taskNameDecoration:"",taskPosition:"",taskDisplay:"",taskMaxHeight:40},config:{tension:200,friction:25,mass:1},reset:!1},show:{to:{taskHeight:38,taskMargin:"15px 25px",taskBackground:"var(--task-feature)",taskPadding:10,taskEditOpacity:1,taskDisplay:"",taskOpacity:1,taskEditMaxHeight:300,taskNameDecoration:"",taskPosition:"",taskMaxHeight:500},config:{tension:200,friction:25,mass:1},reset:!1},complete:[{to:{taskMargin:"14px 8px",taskNameDecoration:"line-through",taskOpacity:1,taskPosition:""},config:{tension:200,friction:25,mass:1}},{to:{taskMaxHeight:0,taskHeight:0,taskOpacity:0,taskMargin:"0px 8px",taskPadding:0,taskPosition:"absolute"},config:{tension:800,friction:50,mass:1}}]}),N=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentWillUnmount=function(){return document.removeEventListener("mousedown",n.detectOutsideClick,!1)},n.toggleTask=function(){return n.setState((function(e){return{expanded:!e.expanded}}))},D(Object(l.a)(n)),n.state={expanded:!1,deferDate:void 0,dueDate:void 0,name:"",desc:"",isFlagged:!1,isFloating:!1,project:"",tags:[],decoration:"",availability:!0,isComplete:!1,showRepeat:!1,showTagEditor:!1,startingCompleted:n.props.startingCompleted,possibleTags:n.props.datapack[0],haveBeenExpanded:void 0!==n.props.startOpen&&!1!==n.props.startOpen},n.initialRenderDone=!1,n.me=h.a.createRef(),n.repeater=h.a.createRef(),n.checkbox=h.a.createRef(),n.TagEditorRef=h.a.createRef(),n.actualCheck=h.a.createRef(),n}return Object(u.a)(a,[{key:"showRepeat",value:function(){this.setState({showRepeat:!0})}},{key:"hideRepeat",value:function(){this.setState({showRepeat:!1})}},{key:"showTagEditor",value:function(){this.setState({showTagEditor:!0})}},{key:"showTageEditor",value:function(){this.setState({showTageEditor:!1})}},{key:"loadTask",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.engine.db.getTaskInformation(this.props.uid,this.props.tid);case 2:t=e.sent,this.setState({name:t.name,desc:t.desc,project:t.project,tags:t.tags,isFloating:t.isFloating,isFlagged:t.isFlagged,isComplete:t.isComplete,dueDate:t.due?t.isFloating?new Date(1e3*t.due.seconds):O(new Date(1e3*t.due.seconds).toISOString(),{timeZone:t.timezone}):void 0,deferDate:t.defer?t.isFloating?new Date(1e3*t.defer.seconds):O(new Date(1e3*t.defer.seconds).toISOString(),{timeZone:t.timezone}):void 0}),this.refreshDecorations(),this.initialRenderDone=!0;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshDecorations",value:function(){this.state.dueDate&&(this.state.dueDate-new Date<0?this.setState({decoration:"od"}):this.state.dueDate-new Date<864e5?this.setState({decoration:"ds"}):this.setState({decoration:""})),this.state.deferDate&&(this.state.deferDate-new Date>0?this.setState({availability:!1}):!0===this.props.availability?this.setState({availability:!0}):this.props.availability||this.setState({availability:!1}))}},{key:"componentDidMount",value:function(){this.loadTask(),document.addEventListener("mousedown",this.detectOutsideClick,!1)}},{key:"closeTask",value:function(){this.setState({expanded:!1})}},{key:"openTask",value:function(){var e=this;this.state.haveBeenExpanded?this.setState({expanded:!0}):this.setState({haveBeenExpanded:!0},(function(){return e.setState({expanded:!0})}))}},{key:"_explode",value:function(){var e=this;this.initialRenderDone=!0,this.setState({haveBeenExpanded:!0},(function(){return e.setState({expanded:!0})}))}},{key:"detectOutsideClick",value:function(e){this.me.current&&this.me.current.contains(e.target)||this.repeater.current&&this.repeater.current.contains(e.target)||this.TagEditorRef.current&&this.TagEditorRef.current.contains(e.target)||document.getElementById("parking-lot").contains(e.target)||this.state.showRepeat||this.state.showTagEditor||this.closeTask()}},{key:"componentDidUpdate",value:function(e,t,a){t.deferDate!==this.state.deferDate&&this.refreshDecorations(),t.dueDate!==this.state.dueDate&&this.refreshDecorations(),t.expanded!==this.state.expanded&&!0===this.state.expanded?(Object(f.v)().includes("mobile")&&(document.getElementById("abtib").style.display="none"),this.props.setDragEnabled&&this.props.setDragEnabled(!1),this.props.gruntman.lockUpdates()):t.expanded!==this.state.expanded&&!1===this.state.expanded&&(Object(f.v)().includes("mobile")&&(document.getElementById("abtib").style.display="block"),this.props.setDragEnabled&&this.props.setDragEnabled(!0),this.props.gruntman.unlockUpdates()),e.startOpen!==this.props.startOpen&&this.props.startOpen&&this.openTask()}},{key:"render",value:function(){var e=this;return h.a.createElement("div",null,h.a.createElement(S,{native:!0,state:this.initialRenderDone?this.state.isComplete?this.state.startingCompleted?this.state.expanded?"show":"hide":"complete":this.state.startingCompleted?"complete":this.state.expanded?"show":"hide":"hide"},(function(t){var a;return h.a.createElement(g.animated.div,{onClick:function(t){e.state.expanded||t.target===e.checkbox.current||t.target===e.actualCheck.current||e.props.freeze||e.state.isComplete&&!e.state.startingCompleted||e.openTask()},className:"task "+(e.state.expanded?"expanded":"collapsed"),ref:e.me,style:{minHeight:t.taskHeight,maxHeight:t.taskMaxHeight,margin:t.taskMargin,background:t.taskBackground,opacity:t.taskOpacity,overflow:"hidden",display:t.taskDisplay,position:g.animated.taskPosition,padding:t.taskPadding}},h.a.createElement(x,{tid:e.props.tid,reference:e.repeater,isShown:e.state.showRepeat,onDidDismiss:e.hideRepeat,uid:e.props.uid,engine:e.props.engine,gruntman:e.props.gruntman}),h.a.createElement(E,{reference:e.TagEditorRef,isShown:e.state.showTagEditor,onDidDismiss:e.hideTagEditor,uid:e.props.uid,engine:e.props.engine,gruntman:e.props.gruntman}),h.a.createElement("div",{style:{display:"inline-block",transform:"translateY(-3px)"}},h.a.createElement("input",{type:"checkbox",ref:e.actualCheck,id:"task-check-"+e.props.tid,className:"task-check",defaultChecked:e.props.startingCompleted,onChange:function(){e.state.isComplete?(e.props.gruntman.lockUpdates(),e.setState({isComplete:!1}),e.props.gruntman.do("task.update__uncomplete",{uid:e.props.uid,tid:e.props.tid},!0),e.props.gruntman.unlockUpdates(1e3)):e.state.isComplete||(e.props.gruntman.lockUpdates(),e.setState({isComplete:!0}),e.props.gruntman.do("task.update__complete",{uid:e.props.uid,tid:e.props.tid},!0),e.props.gruntman.unlockUpdates(1e3))},style:{opacity:e.state.availability?1:.35}}),h.a.createElement("label",{ref:e.checkbox,className:"task-pseudocheck "+e.state.decoration,id:"task-pseudocheck-"+e.props.tid,htmlFor:"task-check-"+e.props.tid},"\u200c")),h.a.createElement(g.animated.input,(a={defaultValue:e.state.name,placeholder:"LOCALIZE: Task Name",onChange:function(t){t.persist(),e.props.gruntman.registerScheduler((function(){return e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{name:t.target.value}})}),"task-name-".concat(e.props.tid,"-update"))},onFocus:function(t){e.state.expanded||Object(f.v)().includes("mobile")&&t.target.blur()},className:"task-name "+(e.state.expanded?"":"no-select"),readOnly:!e.state.expanded,type:"text",autoComplete:"off"},Object(r.a)(a,"placeholder","LOCALIZE: Task Name"),Object(r.a)(a,"style",{opacity:e.state.availability?1:.35,textDecoration:t.taskNameDecoration}),a)),function(){if(!0===e.state.haveBeenExpanded)return h.a.createElement(g.animated.div,{className:"task-edit",style:{opacity:t.taskEditOpacity,overflow:"hidden",maxHeight:t.taskEditMaxHeight}},h.a.createElement("textarea",{placeholder:"LOCALIZE:Description",className:"task-desc",style:{marginBottom:10},defaultValue:e.state.desc,onChange:function(t){t.persist(),e.props.gruntman.registerScheduler((function(){return e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{desc:t.target.value}})}),"task-desc-".concat(e.props.tid,"-update"))}}),h.a.createElement("div",{style:{display:"inline-block",marginBottom:6,transform:"translateY(-5px)"}},h.a.createElement("a",{"data-tip":"LOCALIZE: Flagged",className:"task-icon",style:{borderColor:e.state.isFlagged?"var(--task-flaggedRing)":"var(--task-checkbox-feature-alt)",cursor:"pointer"},onClick:function(){e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{isFlagged:!e.state.isFlagged}}),e.setState({isFlagged:!e.state.isFlagged})}},h.a.createElement("i",{className:"fas fa-flag",style:{margin:3,color:e.state.isFlagged?"var(--task-flagged)":"var(--task-textbox)",fontSize:15,transform:"translate(7px, 5px)"}})),h.a.createElement("a",{"data-tip":"LOCALIZE: Floating",className:"task-icon",style:{borderColor:e.state.isFloating?"var(--task-flaggedRing)":"var(--task-checkbox-feature-alt)",cursor:"pointer"},onClick:function(){e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{isFloating:!e.state.isFloating}}),e.setState({isFloating:!e.state.isFloating})}},h.a.createElement("i",{className:"fas fa-globe-americas",style:{margin:3,color:e.state.isFloating?"var(--task-flagged)":"var(--task-textbox)",fontSize:15,transform:"translate(7px, 5px)"}})),h.a.createElement("a",{onClick:e.showRepeat,className:"task-icon",style:{borderColor:"var(--task-checkbox-feature-alt)",marginRight:20,cursor:"pointer"},"data-tip":"LOCALIZE: Repeat"},h.a.createElement("i",{className:"fas fa-redo",style:{margin:3,color:"var(--task-textbox)",fontSize:15,transform:"translate(6.5px, 5.5px)"}})),h.a.createElement("a",{onClick:e.showTagEditor,className:"task-icon",style:{borderColor:"var(--task-checkbox-feature-alt)",marginRight:20,cursor:"pointer"},"data-tip":"LOCALIZE: Freaking TagEditor"},h.a.createElement("i",{className:"fas fa-tags",style:{margin:3,color:"var(--task-textbox)",fontSize:15,transform:"translate(6.5px, 5.5px)"}}))),h.a.createElement("div",{style:{display:"inline-block",marginBottom:8}},h.a.createElement("div",{style:{display:"inline-block",marginRight:10,marginBottom:5,marginLeft:6}},h.a.createElement("i",{className:"fas fa-play","data-tip":"LOCALIZE: Defer Date",style:{transform:"translateY(-1px)",marginRight:10,color:"var(--task-icon)",fontSize:10}}),function(){var t=function(t){var a=t.value,n=t.onClick;return h.a.createElement("input",{className:"task-datebox",readOnly:Object(f.v)().includes("mobile"),defaultValue:a,onChange:function(t){t.persist(),e.props.gruntman.registerScheduler((function(){var a=y.parseDate(t.target.value);a&&e.setState({deferDate:a}),a&&e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{defer:a,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})}),"task-defer-".concat(e.props.tid,"-update"))},onFocus:function(e){n(),e.target.focus()}})},a=function(e){var t=e.value,a=e.onChange;return":0"===t.slice(t.length-2,t.length)&&(t+="0"),h.a.createElement("input",{className:"task-timebox",defaultValue:t,onKeyPress:function(e){var t=y.parseDate(e.target.value);t&&"Enter"===e.key&&a(t.getHours()+":"+t.getMinutes()+":"+t.getSeconds())}})};return h.a.createElement(b.a,{selected:e.state.deferDate,portalId:"parking-lot",onChange:function(t){e.setState({deferDate:t}),e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{defer:t,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})},showTimeInput:!0,dateFormat:"MM/dd/yyyy h:mm aa",customTimeInput:h.a.createElement(a,null),customInput:h.a.createElement(t,null)})}()),h.a.createElement("div",{style:{display:"inline-block",marginBottom:5,marginLeft:6}},h.a.createElement("i",{className:"fas fa-stop","data-tip":"LOCALIZE: Due Date",style:{transform:"translateY(-1px)",marginRight:10,color:"var(--task-icon)",fontSize:10}}),function(){var t=function(t){var a=t.value,n=t.onClick;return h.a.createElement("input",{className:"task-datebox",readOnly:!!Object(f.v)().includes("mobile"),defaultValue:a,onChange:function(t){t.persist(),e.props.gruntman.registerScheduler((function(){var a=y.parseDate(t.target.value);a&&e.setState({dueDate:a}),a&&e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{due:a,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})}),"task-due-".concat(e.props.tid,"-update"))},onFocus:function(e){n(),e.target.focus()}})},a=function(e){var t=e.value,a=e.onChange;return":0"===t.slice(t.length-2,t.length)&&(t+="0"),h.a.createElement("input",{className:"task-timebox",defaultValue:t,onKeyPress:function(e){var t=y.parseDate(e.target.value);t&&"Enter"===e.key&&a(t.getHours()+":"+t.getMinutes()+":"+t.getSeconds())}})};return h.a.createElement(b.a,Object(r.a)({selected:e.state.dueDate,portalId:"parking-lot",onChange:function(t){return e.setState({dueDate:t})},showTimeInput:!0,isClearable:!0,dateFormat:"MM/dd/yyyy h:mm aa",customTimeInput:h.a.createElement(a,null),customInput:h.a.createElement(t,null)},"onChange",(function(t){e.setState({dueDate:t}),e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{due:t,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone}})})))}())),h.a.createElement("div",null,h.a.createElement("span",{className:"task-project-container"},h.a.createElement("i",{className:"fas fa-list-ul",style:{margin:3,color:"var(--task-icon)",fontSize:13,marginRight:5,transform:"translateY(5px)"}}),h.a.createElement(k.a,{options:e.props.datapack[1],className:"task-project",classNamePrefix:"task-select",isClearable:!0,styles:{menuPortal:function(e){return Object(n.a)(Object(n.a)({},e),{},{zIndex:"99999 !important"})}},menuPortalTarget:e.props.envelope?e.props.envelope.current:e.me.current,value:e.props.datapack[1].filter((function(t){return t.value===e.state.project})),onChange:function(t){e.props.gruntman.do("task.update__project",{uid:e.props.uid,tid:e.props.tid,oldProject:""===e.state.project?void 0:e.state.project,project:t?t.value:""}),e.setState({project:t?t.value:""})}})),h.a.createElement("span",{className:"task-tag-container"},h.a.createElement("i",{className:"fas fa-tags",style:{margin:3,color:"var(--task-icon)",fontSize:13,transform:"translateY(5px)"}}),h.a.createElement(w.a,{options:e.props.datapack[0],className:"task-tag",classNamePrefix:"task-select",isClearable:!0,isMulti:!0,styles:{menuPortal:function(e){return Object(n.a)(Object(n.a)({},e),{},{zIndex:"99999 !important"})}},menuPortalTarget:e.props.envelope?e.props.envelope.current:e.me.current,value:e.props.datapack[0].filter((function(t){return e.state.tags.includes(t.value)})),onChange:function(t,a){var n=e,r=t?t.map(function(){var e=Object(o.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.__isNew__){e.next=10;break}return e.next=3,n.props.gruntman.do("tag.create",{uid:n.props.uid,name:t.label});case 3:return a=e.sent.id,(r=n.state.possibleTags).push({label:t.label,value:a}),n.setState({possibleTags:r}),e.abrupt("return",a);case 10:return e.abrupt("return",t.value);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):[];Promise.all(r).then((function(t){e.setState({tags:t}),e.props.gruntman.do("task.update",{uid:e.props.uid,tid:e.props.tid,query:{tags:t}})}))}}))))}())})))}}]),a}(m.Component);t.a=N},71:function(e,t,a){},87:function(e,t,a){"use strict";(function(e){var n,r,s,i,o,c,u=a(18),l=a(27),p=a(23),d=a(1),f=a.n(d),m=a(4),h=a(80),g=h.FilesystemDirectory,v=h.FilesystemEncoding,b=h.Plugins,y=(b.Device,b.Filesystem),k=function(){var e=new Map,t=new Map;function a(e){var t=s;console.assert("string"===typeof e[0]),t=e[0].includes("/")?t.collectionGroup(e[0]):t.collection(e[0]);var a,n=Object(l.a)(e.slice(1));try{for(n.s();!(a=n.n()).done;){var r=a.value;if("string"===typeof r)if(t instanceof i.DocumentReference)t=t.collection(r);else{if(!(t instanceof i.Query))throw new Error("Unknown reference",t.toString());t=t.doc(r)}else{if(!Array.isArray(r))throw new Error("Cannot parse",r.toString());if(!(t instanceof i.Query))throw new Error("Cannot query with",r.toString());var o;t=(o=t).where.apply(o,Object(u.a)(r)),console.assert(t instanceof i.Query)}}}catch(c){n.e(c)}finally{n.f()}return t}function c(){return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)}function p(){return(p=Object(m.a)(f.a.mark((function n(r){var s,i;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=JSON.stringify(r),e.has(s)||(i=a(r),e.set(s,i.get()),t.set(s,i.onSnapshot({error:console.trace,next:function(t){e.set(s,t),o()}}))),n.next=4,e.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var d=function(){var e=g.Data;return{read:function(){var t=Object(m.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.readFile({path:"condution.json",directory:e,encoding:v.UTF8});case 2:a=t.sent.data,r=JSON.parse(a);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),write:function(){var t=Object(m.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.writeFile({path:"condution.json",directory:e,data:JSON.stringify(r),encoding:v.UTF8});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}();function h(){return(h=Object(m.a)(f.a.mark((function e(t){var a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"sqlite3"===n?console.error("Algobert go bontehu"):"json"===n&&(a=r,t.some((function(e){return void 0===(a=a[e])}))),s=function(e){var t=[],a=function(a){t.push({id:a,data:function(){return Object.assign({},e[a])},exists:!0})};for(var n in e)a(n);return{docs:t}}(a),e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(m.a)(f.a.mark((function e(t,a){var s,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sqlite3"!==n){e.next=4;break}console.error("Algobert go bontehu"),e.next=13;break;case 4:if("json"!==n){e.next=13;break}for(s=r,t.forEach((function(e){s[e]||(s[e]={}),s=s[e]})),i=c();s[i];)i=c();for(o in a)a[o]instanceof Date&&(a[o]={seconds:Math.round(a[o].getTime()/1e3)-5});return s[i]=a,e.next=13,d.write();case 13:return e.abrupt("return",Object.assign({},{id:i,data:a,exists:!0}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(m.a)(f.a.mark((function e(t){var a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sqlite3"!==n){e.next=4;break}console.error("Algobert go bontehu"),e.next=11;break;case 4:if("json"!==n){e.next=11;break}return a=r,s=t.pop(),t.forEach((function(e){a[e]||(a[e]={}),a=a[e]})),delete a[s],e.next=11,d.write();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(m.a)(f.a.mark((function e(t,a){var s,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sqlite3"!==n){e.next=4;break}console.error("Algobert go bontehu"),e.next=12;break;case 4:if("json"!==n){e.next=12;break}for(o in s=r,i=t.pop(),t.forEach((function(e){s[e]||(s[e]={}),s=s[e]})),a)a[o]instanceof Date&&(a[o]={seconds:Math.round(a[o].getTime()/1e3)-5});return s[i]=a,e.next=12,d.write();case 12:return e.abrupt("return",Object.assign({},{id:void 0,data:a,exists:!0}));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(m.a)(f.a.mark((function e(t,a){var s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("sqlite3"!==n){e.next=4;break}console.error("Algobert go bontehu"),e.next=11;break;case 4:if("json"!==n){e.next=11;break}for(i in s=r,t.forEach((function(e){s[e]||(s[e]={}),s=s[e]})),a)a[i]instanceof Date&&(a[i]={seconds:Math.round(a[i].getTime()/1e3)-5});return s=Object.assign(s,a),e.next=11,d.write();case 11:return e.abrupt("return",Object.assign(a,{id:void 0,data:a,exists:!0}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return Object.assign(a(e),{get:function(){return function(e){return p.apply(this,arguments)}(e)}})}function E(){console.error("bad news bears")}function O(e){return{id:E,add:function(t){return function(e,t){return b.apply(this,arguments)}(e,t)},get:function(){return function(e){return h.apply(this,arguments)}(e)},set:function(t){return function(e,t){return w.apply(this,arguments)}(e,t)},update:function(t){return function(e,t){return j.apply(this,arguments)}(e,t)},delete:function(){return function(e){return k.apply(this,arguments)}(e)}}}return[function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];switch(n){case"firebase":return x(t);default:return O(t)}},function(){e=new Map,t=new Map}]}(),w=Object(p.a)(k,2),j=w[0],x=w[1];t.a={__init__:function(t){for(var n=[],o=arguments.length,u=new Array(o>1?o-1:0),l=1;l<o;l++)u[l-1]=arguments[l];if(u.includes("firebase")){var p=a(232);t.firebase.initializeApp(p.dbkeys.deploy);var d=[t.firebase.firestore(),t.firebase.firestore];s=d[0],i=d[1],s.enablePersistence({synchronizeTabs:!0}).catch(console.error),n.push(new Promise((function(e){return e(i)})))}if(u.includes("sqlite")){console.error("algobert come to the rescue!"),console.error("algobert come to the rescue!"),console.error("algobert come to the rescue!"),console.error("algobert come to the rescue!"),console.error("algobert come to the rescue!"),console.error("algobert come to the rescue!"),console.error("algobert come to the rescue!");var h=a(80),b=h.FilesystemDirectory,k=h.Plugins,w=k.Device;n.push(Object(m.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getInfo();case 2:return t.t0=t.sent.platform,a="web"!==t.t0,a?b.Data:e.resourcesPath,"/condution.db",t.abrupt("return",void 0);case 7:case"end":return t.stop()}}),t)})))())}return u.includes("json")&&n.push(Object(m.a)(f.a.mark((function e(){var t,a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.Data,a="condution.json",e.prev=2,e.next=5,y.readFile({path:a,directory:t,encoding:v.UTF8});case 5:n=e.sent.data,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),n="{}",e.next=13,y.writeFile({path:a,directory:t,data:JSON.stringify({}),encoding:v.UTF8});case 13:r=JSON.parse(n);case 14:case"end":return e.stop()}}),e,null,[[2,8]])})))()),c=Promise.all(n)},cRef:j,flush:x,useDb:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return n=e,o=t,c}}}).call(this,a(54))}},[[207,3,4]]]);
//# sourceMappingURL=main.878098b6.chunk.js.map