{"version":3,"sources":["pages/Components/CalendarPopover.jsx","pages/Components/Sortable.jsx","pages/Home.jsx","pages/Upcoming.jsx","pages/Components/WorkspaceModal.jsx","pages/Calendar.jsx","pages/Components/CalendarTasklistPopover.jsx","pages/Completed.jsx","pages/Perspectives.jsx","pages/Components/PerspectiveEditor.jsx","pages/Projects.jsx","pages/Components/FloatingActionButton.jsx","pages/Components/QuickSwitcher.jsx","pages/Components/KeybindManager.jsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","pages/Components/Repeat.jsx","pages/Components/TagEditor.jsx","pages/Components/Task.jsx","backend/src/ObjectManager.js","backend/src/PerspectiveManager.js","backend/CondutionEngine.js","gruntman.js","pages/Auth.jsx","pages/Loader.jsx","pages/Onboarding.jsx","App.jsx","serviceWorker.ts","index.jsx","backend/src/DBManager.js"],"names":["CalendarUnit","props","useState","initialDate","Date","dateSelected","setDateSelected","currentMonth","getMonth","currentYear","getFullYear","firstDayMonth","lastDayMonth","lastDayLastMonth","firstDayDayname","getDay","__util_calculate_gradient","left","right","gradientAmount","color1","color2","ratio","hex","x","toString","length","r","Math","ceil","parseInt","substring","g","b","daysBefore","Array","map","_","i","type","content","getDate","daysAfter","contentDays","heat","setHeat","prototype","max","apply","this","useEffect","a","Map","hm","engine","db","selectTasksInRange","uid","forEach","val","date","due","seconds","setHours","time","has","set","get","values","from","style","getComputedStyle","document","body","hexes","e","getPropertyValue","trim","slice","keys","id","display","className","backgroundColor","border","onClick","onDateSelected","disableOnclick","toLocaleString","gruntman","localizations","getLanguage","weekday","month","useTime","defaultValue","toLocaleTimeString","onKeyPress","d","chrono","target","value","key","newDate","getHours","getMinutes","getSeconds","clbtd","marginRight","float","onDidDismiss","CalendarPopover","ref","reference","isOpen","isShown","borderRadius","cssClass","SortableTaskList","activelyDragging","setActivelyDragging","order","useRef","moveApplied","currentIndex","dragEnvelope","dragEnabled","setDragEnabled","objRefs","list","React","createRef","getAnimationDestinationFromIndex","activeIndex","mY","currentOrder","noAnim","down","indx","y","indexOf","zIndex","config","tension","friction","mass","clamp","immediate","useSprings","current","springs","bind","useDrag","args","index","movement","movementY","first","last","tap","includes","onSortStart","sorted","sortedID","moveBy","floor","abs","newIndex","splice","setTimeout","filter","do","items","onSortEnd","newOrder","drag","delay","filterTaps","enabled","anim","div","position","cursor","transform","interpolate","onClickCapture","stopPropagation","tid","prefix","datapack","availability","envelope","SortableProjectList","item","activeTaskID","activeTaskRef","opacity","paginate","history","push","possibleProjects","autoBind","require","isPlatform","createHashHistory","createBrowserHistory","Home","switch","workspaceType","workspaceify","userlandify","setState","isWorkspace","workspace","to","itemSelected","state","projects","perspectives","undefined","abtibRef","menu","url","URL","uri","pathname","split","hash","refresh","prevProps","prevState","snapshot","sends","getTopLevelProjects","tlp","getPerspectives","psp","Router","IonReactHashRouter","IonReactRouter","keybindRef","abtib","noBounce","forceOverscroll","contentId","mode","window","navigator","platform","process","fontSize","icon","chevronForwardCircle","upcoming","checkmarkCircle","completed","calendar","close","npid","pid","f","paddingRight","name","proj","listOutline","dispatch","operation","logout","render","exact","path","displayName","actualUID","authType","match","params","menuRefresh","options","create","Component","Upcoming","tomorrow","setDate","greetings","greetings_setA","inbox","dueSoon","possibleTags","possibleProjectsRev","possibleTagsRev","projectSelects","tagSelects","projectDB","timeline","timelineShown","greeting","random","workspaces","workspacesPopoverShown","workspaceModalShown","currentlyEditedWorkspace","currentWorkspace","personal_workspace","updatePrefix","workspaceButton","registerRefresher","getItemAvailability","avail","getInboxandDS","pandt","getProjectsandTags","pPandT","projectList","tagsList","label","views","pdb","topLevels","getProjectStructure","buildSelectString","p","level","children","isSameDateAs","pDate","refrenceDate","tcontent","task","n","workspaceNames","getWorkspaces","Promise","all","getWorkspace","meta","halt","overflow","getUserByEmail","onTouchMove","preventDefault","marginLeft","color","background","width","height","fontWeight","nativeEvent","showBackdrop","event","dismiss","overflowY","flexGrow","unsorted","ds","marginTop","hide","show","timelineItem","toLocaleDateString","year","day","paddingLeft","paddingTop","WorkspaceModal","workspaceName","setWorkspaceName","workspaceEditors","setWorkspaceEditors","editors","perspective_build_callout","minWidth","placeholder","onChange","persist","registerScheduler","query","refreshed","CalPageBigOllendar","isPopoverShown","setIsPopoverShown","shownList","setShownList","names","ids","nameList","idList","currentDate","marginBottom","Calendar","today","taskList","popoverIsVisible","repeater","showEdit","endDate","effect","offset","top","isMobile","getTime","class","withGetScreen","mobileLimit","tabletLimit","shouldListenOnResize","CalendarTasklistPopover","refs","onModal","then","result","TaskObject","contents","Completed","tasksShown","taskCats","rendering","taskArr","getCompletedTasks","full","cat","startingCompleted","handleFetchMore","Perspectives","perspectiveName","perspectiveQuery","perspectiveAvail","perspectiveTord","possiblePerspectives","perspectiveObject","perspective","calc","tord","payload","hideEdit","updateName","startHighlighted","data-tip","borderColor","margin","handleDelete","withRouter","PerspectiveEdit","inputEvent","expanded","focus","console","log","open","onWillPresent","lockUpdates","unlockUpdates","alignItems","whiteSpace","handleQueryChange","perspective_include","interface","onIonChange","detail","psp_rem","psp_avil","psp_flg","perspective_order","psp_abd","psp_dbd","psp_abe","psp_dbe","psp_alpha","handleHelp","autoFocus","animated","spellcheck","debounce","Projects","parent","is_sequential","currentProject","activeTask","cProject","parentProj","overflowX","_explode","nb_at","nb_ap","ABTIB","qa_content","isExpanded","setisExpanded","isSaving","setisSaving","useSpring","input","readOnly","onFocus","onBlur","onKeyUp","taskName","dateInfo","defer","end","start","replace","text","npobj","blur","QuickSwitcher","filteredList","direction","selected","prop_store","projs","searcher","currentlySelected","processItems","getProjs","subs","mod","Object","entries","setFocus","searchTerm","toLowerCase","o","keyname","selectedItem","filterItems","slicedSelectedItem","updateIdx","goBack","goForward","idx","len","ctrlKey","scrollIntoView","behavior","block","qs_show","onDidPresent","focusRef","onKeyDown","handleKeydown","Keybinds","bindings","sidebar_switcher","sidebar_list","sidebar_incrimentor","focusElement","globalBindings","manageQs","sidebar_index","that","num","loca","sidebarItem","arraysAreIdentical","arr1","arr2","combo","Mousetrap","bindGlobal","unbind","setSidebarIndex","webpackAsyncContext","req","__webpack_require__","resolve","Error","code","module","exports","Repeat","rule","advanced","on","getTaskInformation","taskInfo","repeat","loadTask","repeat_word","repeat_every_day","repeat_every_week","repeat_every_month","repeat_every_year","repeat_datework_weekname_m","repeat_datework_weekname_tu","repeat_datework_weekname_w","repeat_datework_weekname_th","repeat_datework_weekname_f","repeat_datework_weekname_sa","repeat_datework_weekname_su","newOn","elem","oldOn","TagEditor","tagList","getTags","setTagState","tag","tagClicked","parseFromTimeZone","AnimationFactory","Keyframes","Spring","taskHeight","taskMargin","taskBackground","taskPadding","taskEditOpacity","taskEditMaxHeight","taskOpacity","taskNameDecoration","taskPosition","taskDisplay","taskMaxHeight","reset","complete","Task","componentWillUnmount","removeEventListener","detectOutsideClick","toggleTask","deferDate","dueDate","desc","isFlagged","isFloating","project","tags","decoration","isComplete","showRepeat","showTagEditor","deferPopoverShown","duePopoverShown","haveBeenExpanded","startOpen","notificationPopoverShown","notificationCalendarShown","hasNotification","initialRenderDone","me","checkbox","TagEditorRef","actualCheck","duePopover","deferPopover","notificationPopover","notificationCalender","showTageEditor","toISOString","timeZone","timezone","checkNotification","refreshDecorations","addEventListener","contains","getElementById","closeTask","getPlatforms","openTask","native","animatedProps","freeze","minHeight","maxHeight","padding","hideRepeat","defaultChecked","htmlFor","autoComplete","nt","textDecoration","tabIndex","cancelNotification","scheduleNotification","notifPermissionGranted","showNotificationPopover","Intl","DateTimeFormat","resolvedOptions","DateInput","TimeInput","portalId","showTimeInput","dateFormat","customTimeInput","customInput","isClearable","classNamePrefix","styles","menuPortal","provided","menuPortalTarget","option","oldProject","isMulti","base","newValue","actionMeta","view","tids","__isNew__","tagID","originalTags","tagIDs","cRef","dbManager","util","select","compare","lhs","cmp","rhs","TypeError","requirements","doc","dat","data","any","atLeast","threshold","counter","atMost","debug","arg","trace","setWorkspaceMode","workspaceMode","userID","oldWorkspaces","add","workspaceID","update","userData","snap","docs","catch","err","error","getTasksWithQuery","taskDocs","getInboxTasks","sort","inboxDocs","getDSTasks","available","wrt","dsTime","dsDocs","dueTasks","min","returnFull","tasks","avaliable","warn","ibt","dsTasks","prev","cache","dst","avalibility","dstWithoutIbt","taskID","paramName","ti","projectIdByName","projectNameById","projectsSorted","exists","top_level","projElem","sortOrder","ret","tagIdByName","tagNameById","pInfobyName","pInfobyID","ps","pstp","projectID","updateQuery","modifyTask","newTask","taskObj","ibtL","projL","newProject","projObj","size","obj","hasOwnProperty","newPerspective","pstObj","newTag","tagName","dissociateTask","dump","t","originalChildren","associateTask","assosProjID","willDissociateTask","taskData","delete","perspectiveID","deleteProject","struct","cpLtTasks","cpLt","concat","recursive","itemID","recursivelyGetBlocks","bstat","projStruct","child","assign","tlps","blockstatus","blocks","completedTasks","taskItems","tsk","cpSorted","taskA","taskB","completeDate","yesterday","thisWeek","thisMonth","setMonth","tasksToday","tsks","tasksYesterday","tasksWeek","tasksMonth","evenBefore","tz","username","cdyrslf","npd","od","odid","dsID","nice","sequential","blocked","click","pspDir","pspsp","specific","sp","promotion","online","dis","patreon","yiipee","getTasks","removeParamFromTask","modifyProject","modifyPerspective","completeTask","associateProject","dissociateProject","deleteTask","deletePerspective","getDSRow","deleteTag","onBoard","generateWorkspace","perspectiveHandler","cgs","taskFilter","taskCaptureGroup","logicCaptureGroup","globalCaptureGroup","clear","lastIndex","getCaptureGroups","str","parseTaskCaptureGroup","parseSpecialVariables","vr","compileTask","pPaT","additionalFilter","queries","taskCache","antiCache","dbObj","pS","compileLogicCaptureGroup","ltr","taskCompValues","util_datesequal","dateA","dateB","pStr","pRes","fquery","logicSort","exec","test","Set","flat","taskObjs","aval","it","dbRefObj","__init__","use","useDb","dbFuncs","pspObj","flush","LocalNotifications","Plugins","Permissions","Gruntman","requestPermission","granted","platforms","addListener","handleNotificationAction","hashCode","s","reduce","charCodeAt","refresher","callbackRefresherReleased","conflictResolution","releaseTimeout","doers","macro","applyOrder","ntObject","ntID","tInfo","update__project","update__uncomplete","update__complete","rRule","defDistance","rOn","dow","oDow","setFullYear","message","TODO","update__name","projectName","update__pstate","associate","dissociate","pObj","npspid","update__perspective","delete__perspective","undoers","backlog","undolog","taskLog","canUndo","schedulers","updateLock","updateInterval","secretLocalizedStrings","clearTimeout","interval","title","schedule","notifications","at","sound","attachments","extra","action","notification","actionId","cancel","expectedID","getPending","pending","needed","callback","identifier","wait","actionName","bypassUpdates","isUndo","unsafe_FORCE_UPDATES","actionID","nodes","shift","resources","Auth","Storage","greetings_setB","authMode","showExtra","firebase","setPersistence","Persistence","LOCAL","signInWithEmailAndPassword","$","currentUser","emailVerified","service","addClass","problem","createUserWithEmailAndPassword","html","sendEmailVerification","updateProfile","reload","sendPasswordResetEmail","welcome_auth_msg","nowirres","greeting_auth_normal","what_should_we","email","password","doLogin","doCreate","doRecover","dispatchCreate","need_and_do","need_verify","need_and_login","remembered","rec_pswd","login","newuser","lds","verifem","lerec","proceed","doLocal","ulac","LoadSpinner","defaultOptions","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","Loader","justifyContent","isStopped","isPaused","bottom","Onboarding","maxWidth","setupConfig","swipeBackEnabled","App","LocalizedStrings","en","zh","de","matchMedia","matches","removeClass","Engine","dbType","onAuthStateChanged","user","requestRefresh","authDispatch","onboarding_content","signOut","isError","Boolean","location","hostname","ReactDOM","serviceWorker","ready","registration","unregister","storageType","memoryDB","firebaseDB","fsRef","readiness","FilesystemDirectory","FilesystemEncoding","Filesystem","Device","unsubscribeCallbacks","getFirebaseRef","assert","collectionGroup","collection","nav","DocumentReference","Query","isArray","where","generateRandomString","TODOstring","JSON","stringify","onSnapshot","next","diskJSONDB","dbRoot","Data","read","readFile","directory","encoding","UTF8","parse","write","writeFile","pointer","some","parsed","docRefs","docID","round","pop","cacheRef","cachedRead","storageRef","storageAdd","storageRead","storageSet","storageUpdate","storageDel","loaders","features","initializeApp","dbkeys","deploy","firestore","enablePersistence","synchronizeTabs","getInfo","resourcesPath","sqliteDB","dbPath"],"mappings":"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","file":"static/js/main.707d8897.chunk.js","sourcesContent":["import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component, useState, useEffect } from 'react';\nimport '../Calendar.css';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the repeat UI\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\n\nfunction CalendarPopover(props) {\n    let [dateSelected, setDateSelected] = useState(props.initialDate ? props.initialDate : new Date());\n\n    let currentMonth = dateSelected.getMonth();\n    let currentYear = dateSelected.getFullYear();\n\n    let firstDayMonth = new Date(currentYear, currentMonth, 1);\n    let lastDayMonth = new Date(currentYear, currentMonth+1, 0);\n    let lastDayLastMonth = new Date(currentYear, currentMonth, 0);\n\n    let firstDayDayname = firstDayMonth.getDay()+1;\n\n    function __util_calculate_gradient(left, right, gradientAmount) {\n        let color1 = left;\n        let color2 = right;\n        let ratio = gradientAmount;\n        let hex = function(x) {\n            x = x.toString(16);\n            return (x.length == 1) ? '0' + x : x;\n        };\n\n        let r = Math.ceil(parseInt(color1.substring(0,2), 16) * ratio + parseInt(color2.substring(0,2), 16) * (1-ratio));\n        let g = Math.ceil(parseInt(color1.substring(2,4), 16) * ratio + parseInt(color2.substring(2,4), 16) * (1-ratio));\n        let b = Math.ceil(parseInt(color1.substring(4,6), 16) * ratio + parseInt(color2.substring(4,6), 16) * (1-ratio));\n\n        return hex(r) + hex(g) + hex(b);\n    }\n\n    let daysBefore = [...new Array(firstDayDayname-1)].map((_, i)=>{return {type: \"pre\", content: i+lastDayLastMonth.getDate()-(firstDayDayname-1)+1}});\n\n    let daysAfter = [...new Array((6-lastDayMonth.getDay()===-1)?6:6-lastDayMonth.getDay())].map((_, i)=>{return {type:\"post\", content:i+1}});\n\n    let contentDays = [...new Array(lastDayMonth.getDate())].map((_, i)=>{return {type:\"actual\", content:i+1}});\n\n    \n    let [heat, setHeat] = useState({});\n    \n \n    Array.prototype.max = function() {\n        return Math.max.apply(null, this);\n    };\n\n    \n    useEffect(()=>{\n        (async function() {\n            let map = new Map();\n            let hm = {};\n            let taskList = await props.engine.db.selectTasksInRange(props.uid, firstDayMonth, lastDayMonth, true);\n            taskList.forEach(([_, val])=>{\n                let date = new Date(val.due.seconds*1000);\n                date.setHours(0, 0, 0, 0);\n                let time = date.getDate();\n                if(map.has(time))\n                    map.set(time, map.get(time)+1);\n                else\n                    map.set(time, 1);\n            });\n            let values = Array.from(map.values());\n            if (values.length > 0) {\n                let max = values.max();\n                let style = getComputedStyle(document.body);\n                let hexes = values.map(e=>__util_calculate_gradient(style.getPropertyValue('--heatmap-darkest').trim().slice(1), style.getPropertyValue('--heatmap-lightest').trim().slice(1), e/max));\n                Array.from(map.keys()).forEach((e, i)=>{hm[e]=hexes[i]});\n            }\n            setHeat(hm);\n        })();\n    },[dateSelected, props.initialDate]);\n\n    // @NEEDLOC days of the week\n    return (\n        <IonModal ref={props.reference} isOpen={props.isShown} onDidDismiss={() => {if(props.onDidDismiss) props.onDidDismiss()}} style={{borderRadius: 5}} cssClass=\"calendar-popover\">\n            <div id=\"calendar-page-calendar-wrapper\" style={{display: \"inline-block\", ...props.style}}>\n                <div id=\"calendar-wrapper-popover\">\n                    <div id=\"calendar-daterow\">\n                        <span className=\"calendar-daterow-item\">Sun</span>\n                        <span className=\"calendar-daterow-item\">Mon</span>\n                        <span className=\"calendar-daterow-item\">Tues</span>\n                        <span className=\"calendar-daterow-item\">Wed</span>\n                        <span className=\"calendar-daterow-item\">Thu</span>\n                        <span className=\"calendar-daterow-item\">Fri</span>\n                        <span className=\"calendar-daterow-item\">Sat</span>\n                    </div>\n                    <div id=\"calendar-container\">\n                        {[...daysBefore,...contentDays,...daysAfter].map(i =>\n                        <span className={`calendar-container-item calendar-container-item-${i.type} calendar-container-item-${i.content}`} style={{\n                            backgroundColor: ((heat[i.content]&&i.type === \"actual\") ? \n                                `#${heat[i.content]}` :\n                                \"inherit\"),\n                            border:  (i.type === \"actual\" && i.content === dateSelected.getDate()) ? \n                            \"2px solid var(--decorative-light)\" :\n                            \"0\"}} \n\n                            onClick={(e)=>{\n\n                                let date;\n                                if (i.type === \"pre\")\n                                    date = new Date(lastDayLastMonth.getFullYear(), lastDayLastMonth.getMonth(), i.content);\n                                if (i.type === \"actual\") \n                                    date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth(), i.content);\n                                if (i.type === \"post\") \n                                    date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, i.content);\n                                setDateSelected(date);\n                                if (props.onDateSelected && !props.disableOnclick)\n                                    props.onDateSelected(date);\n                            }}>{i.content}</span>\n                        )}\n                    </div>\n                    <div id=\"calendar-infopanel\">\n                    <div className=\"calendar-infopanel-dateselected\">{dateSelected.getDate()}</div>\n                    <div className=\"calendar-infopanel-datename\">{dateSelected.toLocaleString('en-us', {  weekday: 'long' })}</div>\n                    <div className=\"calendar-infopanel-month\">{dateSelected.toLocaleString('en-us', { month: 'long' })}</div>\n                    <div className=\"calendar-infopanel-year\">{dateSelected.getFullYear()}</div>\n                    </div>\n                    {(()=>{\n                        if (props.useTime)\n                            return <div className=\"calendar-timeunit\">   \n                                <span className=\"calendar-time\">\n                                    Time\n                                </span>\n                                <input\n                                    className=\"calendar-timebox\"\n                                    defaultValue={dateSelected.toLocaleTimeString()}\n                                    onKeyPress={e => {\n                                        // TIMEHANDLING is here. If you are searching for that, it's here.\n                                        // But anyway, on change, parse the time\n                                        let d = chrono.parseDate(e.target.value); //TODO bad?\n                                        // ...and throw away the date \n                                        if (d && e.key === \"Enter\") {\n                                            let newDate = new Date(dateSelected.getFullYear(), dateSelected.getMonth(), dateSelected.getDate(), d.getHours(), d.getMinutes(), d.getSeconds());\n                                            setDateSelected(newDate); // TODO make this with the onChange API\n                                            e.target.value = newDate.toLocaleTimeString();\n                                            if (props.onDateSelected && !props.disableOnclick)\n                                                props.onDateSelected(newDate);\n\n                                        }\n                                    }}\n                                />\n                            </div>\n                    })()}\n                    <div id=\"calendar-tools\">\n                    <a className=\"fas fa-caret-left calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()-1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <a className=\"fas fa-caret-right calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <div className=\"calendar-today\" onClick={()=>{\n                        setDateSelected(new Date());\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(new Date());\n\n                    }}>{props.gruntman.localizations.clbtd}</div>\n                        <div className=\"calendar-today\" style={{marginRight: 10, float: \"right\"}} onClick={()=>{\n                            if (dateSelected)\n                                props.onDateSelected(dateSelected);\n                            props.onDidDismiss()\n                        }}>Done</div>\n                </div>\n                </div>\n            </div>\n        </IonModal>\n    )\n}\n\nfunction CalendarUnit(props) {\n    let [dateSelected, setDateSelected] = useState(props.initialDate ? props.initialDate : new Date());\n\n    let currentMonth = dateSelected.getMonth();\n    let currentYear = dateSelected.getFullYear();\n\n    let firstDayMonth = new Date(currentYear, currentMonth, 1);\n    let lastDayMonth = new Date(currentYear, currentMonth+1, 0);\n    let lastDayLastMonth = new Date(currentYear, currentMonth, 0);\n\n    let firstDayDayname = firstDayMonth.getDay()+1;\n\n    function __util_calculate_gradient(left, right, gradientAmount) {\n        let color1 = left;\n        let color2 = right;\n        let ratio = gradientAmount;\n        let hex = function(x) {\n            x = x.toString(16);\n            return (x.length == 1) ? '0' + x : x;\n        };\n\n        let r = Math.ceil(parseInt(color1.substring(0,2), 16) * ratio + parseInt(color2.substring(0,2), 16) * (1-ratio));\n        let g = Math.ceil(parseInt(color1.substring(2,4), 16) * ratio + parseInt(color2.substring(2,4), 16) * (1-ratio));\n        let b = Math.ceil(parseInt(color1.substring(4,6), 16) * ratio + parseInt(color2.substring(4,6), 16) * (1-ratio));\n\n        return hex(r) + hex(g) + hex(b);\n    }\n\n    let daysBefore = [...new Array(firstDayDayname-1)].map((_, i)=>{return {type: \"pre\", content: i+lastDayLastMonth.getDate()-(firstDayDayname-1)+1}});\n\n    let daysAfter = [...new Array((6-lastDayMonth.getDay()===-1)?6:6-lastDayMonth.getDay())].map((_, i)=>{return {type:\"post\", content:i+1}});\n\n    let contentDays = [...new Array(lastDayMonth.getDate())].map((_, i)=>{return {type:\"actual\", content:i+1}});\n\n    \n    let [heat, setHeat] = useState({});\n    \n \n    Array.prototype.max = function() {\n        return Math.max.apply(null, this);\n    };\n\n    \n    useEffect(()=>{\n        (async function() {\n            let map = new Map();\n            let hm = {};\n            let taskList = await props.engine.db.selectTasksInRange(props.uid, firstDayMonth, lastDayMonth, true);\n            taskList.forEach(([_, val])=>{\n                let date = new Date(val.due.seconds*1000);\n                date.setHours(0, 0, 0, 0);\n                let time = date.getDate();\n                if(map.has(time))\n                    map.set(time, map.get(time)+1);\n                else\n                    map.set(time, 1);\n            });\n            let values = Array.from(map.values());\n            if (values.length > 0) {\n                let max = values.max();\n                let style = getComputedStyle(document.body);\n                let hexes = values.map(e=>__util_calculate_gradient(style.getPropertyValue('--heatmap-darkest').trim().slice(1), style.getPropertyValue('--heatmap-lightest').trim().slice(1), e/max));\n                Array.from(map.keys()).forEach((e, i)=>{hm[e]=hexes[i]});\n            }\n            setHeat(hm);\n        })();\n    },[dateSelected, props.initialDate]);\n    return (\n        <div id=\"calendar-page-calendar-wrapper\" style={{display: \"inline-block\", ...props.style}}>\n            <div id=\"calendar-wrapper-popover\">\n                <div id=\"calendar-daterow\">\n                    <span className=\"calendar-daterow-item\">Sun</span>\n                    <span className=\"calendar-daterow-item\">Mon</span>\n                    <span className=\"calendar-daterow-item\">Tues</span>\n                    <span className=\"calendar-daterow-item\">Wed</span>\n                    <span className=\"calendar-daterow-item\">Thu</span>\n                    <span className=\"calendar-daterow-item\">Fri</span>\n                    <span className=\"calendar-daterow-item\">Sat</span>\n                </div>\n                <div id=\"calendar-container\">\n                    {[...daysBefore,...contentDays,...daysAfter].map(i =>\n                    <span className={`calendar-container-item calendar-container-item-${i.type} calendar-container-item-${i.content}`} style={{\n                        backgroundColor: ((heat[i.content]&&i.type === \"actual\") ? \n                            `#${heat[i.content]}` :\n                            \"inherit\"),\n                        border:  (i.type === \"actual\" && i.content === dateSelected.getDate()) ? \n                        \"2px solid var(--decorative-light)\" :\n                        \"0\"}} \n\n                        onClick={(e)=>{\n\n                            let date;\n                            if (i.type === \"pre\")\n                                date = new Date(lastDayLastMonth.getFullYear(), lastDayLastMonth.getMonth(), i.content);\n                            if (i.type === \"actual\") \n                                date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth(), i.content);\n                            if (i.type === \"post\") \n                                date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, i.content);\n                            setDateSelected(date);\n                            if (props.onDateSelected && !props.disableOnclick)\n                                props.onDateSelected(date);\n                        }}>{i.content}</span>\n                    )}\n                </div>\n                <div id=\"calendar-infopanel\">\n                    <div className=\"calendar-infopanel-dateselected\">{dateSelected.getDate()}</div>\n                    <div className=\"calendar-infopanel-datename\">{dateSelected.toLocaleString(props.gruntman.localizations.getLanguage(), {  weekday: 'long' })}</div>\n                    <div className=\"calendar-infopanel-month\">{dateSelected.toLocaleString(props.gruntman.localizations.getLanguage(), { month: 'long' })}</div>\n                    <div className=\"calendar-infopanel-year\">{dateSelected.getFullYear()}</div>\n                </div>\n                {(()=>{\n                    if (props.useTime)\n                        return <div className=\"calendar-timeunit\">   \n                            <span className=\"calendar-time\">\n                                Time\n                            </span>\n                            <input\n                                className=\"calendar-timebox\"\n                                defaultValue={dateSelected.toLocaleTimeString()}\n                                onKeyPress={e => {\n                                    // TIMEHANDLING is here. If you are searching for that, it's here.\n                                    // But anyway, on change, parse the time\n                                    let d = chrono.parseDate(e.target.value); //TODO bad?\n                                    // ...and throw away the date \n                                    if (d && e.key === \"Enter\") {\n                                        let newDate = new Date(dateSelected.getFullYear(), dateSelected.getMonth(), dateSelected.getDate(), d.getHours(), d.getMinutes(), d.getSeconds());\n                                        setDateSelected(newDate); // TODO make this with the onChange API\n                                        e.target.value = newDate.toLocaleTimeString();\n                                        if (props.onDateSelected && !props.disableOnclick)\n                                            props.onDateSelected(newDate);\n\n                                    }\n                                }}\n                            />\n                        </div>\n                })()}\n                <div id=\"calendar-tools\">\n                    <a className=\"fas fa-caret-left calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()-1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <a className=\"fas fa-caret-right calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <div className=\"calendar-today\" onClick={()=>{\n                        setDateSelected(new Date());\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(new Date());\n\n                    }}>{props.gruntman.localizations.clbtd}</div>\n                    <div className=\"calendar-today\" style={{marginRight: 10, float: \"right\"}} onClick={()=>{\n                        if (dateSelected)\n                            props.onDateSelected(dateSelected);\n                        props.onDidDismiss()\n                    }}>Done</div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\n\nexport default CalendarPopover;\nexport { CalendarUnit };\n\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useDrag } from 'react-use-gesture'\nimport { useSprings, animated, interpolate } from 'react-spring'\n\nimport '../Projects.css';\n\nimport Task from './Task';\n\n\n\n/*\n *\n * Hello human,\n * good afternoon.\n *\n * I am clumsy sortable!\n *\n * Use me to sort things\n * and make sortable task lists\n *\n * TODO => put actual documentation here\n *\n * So there.\n *\n * @jemoka\n *\n */\n\nconst SortableTaskList = (props)=>{\n\n    const itemHeight = 42; // height of single item to calculate animation\n\n    const [activelyDragging, setActivelyDragging] = useState([]); // we are actively dragging...\n\n    const order = useRef();\n    const moveApplied = useRef();\n    const currentIndex = useRef();\n    const dragEnvelope = useRef();\n    const [dragEnabled, setDragEnabled] = useState(true);\n\n\n    let objRefs = props.list.map(_ => React.createRef());\n\n    const getAnimationDestinationFromIndex = (activeIndex, mY, currentOrder, noAnim, down) => (indx) => {\n        return activeIndex === indx ?  {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight + (down ? mY-((currentOrder.indexOf(indx)-indx)*itemHeight):0), // number of tasks the index is out of place * height of task + cursor movement => correct dragged position offset\n                zIndex:1000, \n                config: {tension: 100, friction: 2, mass: 1, clamp: true},\n            immediate:noAnim\n        } : {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight,  // number of tasks the index is out of place * height of task => correct adjustment to position\n                zIndex:0, \n            immediate:noAnim\n        }; // if the index is the one that's being dragged, move up by howevermuch needed\n    }\n\n\n    //const [{ x, y }, set] = useSpring(() => ({ x: 0, y: 0 }))\n    const [springs, set, stop] = useSprings(props.list.length, getAnimationDestinationFromIndex(-1, 0, order.current, true))\n\n    // initialize presistant refs\n    useEffect(() => {\n        order.current = props.list.map((_, i)=>i);\n        moveApplied.current = 0; // moves applied\n        currentIndex.current = 0; // currentIndex\n        set(getAnimationDestinationFromIndex(-1, 0, order.current, true)) // initialize the animation function\n    }, [props.list, props.uid]);\n\n    // Set the drag hook and define component movement based on gesture data\n    const bind = useDrag( (async function ({ args: [index], down, movement: [_, movementY] , first, last, tap}) {\n\n        if (first) {\n            currentIndex.current = index;\n\n            if (!activelyDragging.includes(index))\n                setActivelyDragging([...activelyDragging, index]);\n\n            if (props.onSortStart)\n                props.onSortStart({sorted: index, sortedID: props.list[index], list: props.list});\n        }\n\n        let moveBy = Math.floor(movementY/itemHeight) // the amount of tasks the active task moved over\n        moveBy = moveBy <= -index ? -index : (moveBy >= (props.list.length-index) ? props.list.length-1 : moveBy); // clip moveby by the total task it could possibly move over\n\n        if (Math.abs(moveBy) > 0 && moveBy!==moveApplied.current) {\n            // @enquierer crushing @jemoka's hopes and dreams\n            let newIndex = index+moveBy;\n            order.current.splice(currentIndex.current, 1); // splice element out\n            order.current.splice(newIndex, 0, index); // splice the index in, noting that we just took something out\n            moveApplied.current = moveBy;\n            currentIndex.current = newIndex;\n        }\n\n        //if (!tap) { // TODO THIS LINE IS EVIL\n            set(getAnimationDestinationFromIndex(index, movementY, order.current, false, down)) // set the animation function\n        //} // TODO CANNOT UNCOMMENT, OR YOU RISK BREAKING THE DATEPICKER\n        // As to why something in Sortable checking for taps breaks the datepicker, I blame Chuck Norris. Why not?\n\n\n        if (last) {// if we are done dragging\n            setTimeout(()=> setActivelyDragging(activelyDragging.filter(x=>x!==index)), 100); // wait for the lovely event bubble and say we are done\n            moveApplied.current = 0; // moves applied\n            currentIndex.current = 0; // currentIndex\n            await props.gruntman.do( // call a gruntman function\n                \"macro.applyOrder\", { \n                    uid: props.uid, // pass it the things vvv\n                    order: order.current, \n                    items: props.list.map(i=>{return {type:\"task\", content:i}}),\n                }\n            );\n\n            if (props.onSortEnd)\n                props.onSortEnd({sorted: index, sortedID: props.list[index], newOrder: order.current, movementY, moveBy, list:props.list});\n\n        }\n\n\n    }).bind(this), {drag:{delay:100}, filterTaps: true, enabled: dragEnabled})\n\n    return props.list.map((id, i) => {\n        let anim = springs[i];\n        return (\n            <div ref={(e)=>{dragEnvelope.current=e}}>\n            <animated.div \n                {...bind(i)} \n                className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                style={{\n                    borderRadius: 7,\n                    position: \"relative\",\n                    cursor: \"pointer\",\n                    zIndex: anim.zIndex,  // z-index is 1000 during drag\n                    transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                }} \n                onClickCapture={(e)=>{\n                    if (activelyDragging.includes(i)){ // if we are still dragging\n                        e.stopPropagation(); // no clicky!\n                    }\n                }}\n            >\n                <Task ref={objRefs[i]} tid={id} key={id+\"-\"+props.prefix} datapack={props.datapack} uid={props.uid} engine={props.engine} gruntman={props.gruntman} availability={props.availability[id]} envelope={dragEnvelope} setDragEnabled={setDragEnabled} />\n            </animated.div>\n            </div>\n    )\n    });\n}\n\nconst SortableProjectList = (props)=>{\n\n    const itemHeight = 42; // height of single item to calculate animation\n\n    const [activelyDragging, setActivelyDragging] = useState([]); // we are actively dragging...\n\n    const order = useRef();\n    const moveApplied = useRef();\n    const currentIndex = useRef();\n    const dragEnvelope = useRef();\n    const [dragEnabled, setDragEnabled] = useState(true);\n\n\n    let objRefs = props.list.map(_ => React.createRef());\n\n    const getAnimationDestinationFromIndex = (activeIndex, mY, currentOrder, noAnim, down) => (indx) => {\n        return activeIndex === indx ?  {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight + (down ? mY-((currentOrder.indexOf(indx)-indx)*itemHeight):0), // number of tasks the index is out of place * height of task + cursor movement => correct dragged position offset\n                zIndex:1000, \n                config: {tension: 100, friction: 2, mass: 1, clamp: true},\n            immediate:noAnim\n        } : {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight,  // number of tasks the index is out of place * height of task => correct adjustment to position\n                zIndex:0, \n            immediate:noAnim\n        }; // if the index is the one that's being dragged, move up by howevermuch needed\n    }\n\n\n    //const [{ x, y }, set] = useSpring(() => ({ x: 0, y: 0 }))\n    const [springs, set, stop] = useSprings(props.list.length, getAnimationDestinationFromIndex(-1, 0, order.current, true))\n\n    // initialize presistant refs\n    useEffect(() => {\n        order.current = props.list.map((_, i)=>i);\n        moveApplied.current = 0; // moves applied\n        currentIndex.current = 0; // currentIndex\n        set(getAnimationDestinationFromIndex(-1, 0, order.current, true)) // initialize the animation function\n    }, [props.list, props.uid]);\n\n    // Set the drag hook and define component movement based on gesture data\n    const bind = useDrag( (async function ({ args: [index], down, movement: [_, movementY] , first, last, tap}) {\n\n        if (first) {\n            currentIndex.current = index;\n\n            if (!activelyDragging.includes(index))\n                setActivelyDragging([...activelyDragging, index]);\n\n            if (props.onSortStart)\n                props.onSortStart({sorted: index, sortedID: props.list[index], list: props.list});\n        }\n\n        let moveBy = Math.floor(movementY/itemHeight) // the amount of tasks the active task moved over\n        moveBy = moveBy <= -index ? -index : (moveBy >= (props.list.length-index) ? props.list.length-1 : moveBy); // clip moveby by the total task it could possibly move over\n\n        if (Math.abs(moveBy) > 0 && moveBy!==moveApplied.current) {\n            // @enquierer crushing @jemoka's hopes and dreams\n            let newIndex = index+moveBy;\n            order.current.splice(currentIndex.current, 1); // splice element out\n            order.current.splice(newIndex, 0, index); // splice the index in, noting that we just took something out\n            moveApplied.current = moveBy;\n            currentIndex.current = newIndex;\n        }\n\n        //if (!tap) { // TODO THIS LINE IS EVIL\n            set(getAnimationDestinationFromIndex(index, movementY, order.current, false, down)) // set the animation function\n        //} // TODO CANNOT UNCOMMENT, OR YOU RISK BREAKING THE DATEPICKER\n        // As to why something in Sortable checking for taps breaks the datepicker, I blame Chuck Norris. Why not?\n\n\n        if (last) {// if we are done dragging\n            setTimeout(()=> setActivelyDragging(activelyDragging.filter(x=>x!==index)), 100); // wait for the lovely event bubble and say we are done\n            moveApplied.current = 0; // moves applied\n            currentIndex.current = 0; // currentIndex\n            await props.gruntman.do( // call a gruntman function\n                \"macro.applyOrder\", { \n                    uid: props.uid, // pass it the things vvv\n                    order: order.current, \n                    items: props.list.map(i=>{return {type:i.type, content:i.type===\"project\"?i.content.id:i.content}}),\n                }\n            );\n\n            if (props.onSortEnd)\n                props.onSortEnd({sorted: index, sortedID: props.list[index], newOrder: order.current, movementY, moveBy, list:props.list});\n\n        }\n\n\n    }).bind(this), {drag:{delay:100}, filterTaps: true, enabled: dragEnabled})\n\n    return props.list.map((item, i) => {\n        let anim = springs[i];\n        if (item.type === \"task\")\n            return (\n                <div ref = {dragEnvelope}>\n                    <animated.div \n                        {...bind(i)} \n                        className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                        style={{\n                            borderRadius: 7,\n                            position: \"relative\",\n                            cursor: \"pointer\",\n                            zIndex: anim.zIndex,  // z-index is 1000 during drag\n                            transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                        }} \n                        onClickCapture={(e)=>{\n                            if (activelyDragging.includes(i)){ // if we are still dragging\n                                e.stopPropagation(); // no clicky!\n                            }\n                        }}\n                    >\n                        <Task ref={props.activeTaskID===item.content ? props.activeTaskRef : objRefs[i]} tid={item.content} key={item.content+\"-\"+props.prefix} datapack={props.datapack} uid={props.uid} engine={props.engine} gruntman={props.gruntman} availability={props.availability[item.content]} envelope={dragEnvelope} setDragEnabled={setDragEnabled}/>\n                    </animated.div>\n                </div>\n            )\n        else if (item.type === \"project\") {\n            return (\n            <div ref={dragEnvelope}>\n                <animated.div \n                    {...bind(i)} \n                    className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                    style={{\n                        borderRadius: 7,\n                        position: \"relative\",\n                        cursor: \"pointer\",\n                        zIndex: anim.zIndex,  // z-index is 1000 during drag\n                        transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                    }} \n                    onClickCapture={(e)=>{\n                        if (activelyDragging.includes(i)){ // if we are still dragging\n                            e.stopPropagation(); // no clicky!\n                        }\n                    }}\n                >\n                    <a className=\"subproject\" style={{opacity:props.availability[item.content.id]?\"1\":\"0.35\"}} onClick={()=>{props.paginate(\"projects\", item.content.id);props.history.push(`/projects/${item.content.id}`)}}><div><i className=\"far fa-arrow-alt-circle-right subproject-icon\"/><div style={{display: \"inline-block\"}}>{props.possibleProjects[item.content.id]}</div></div></a>\n                </animated.div>\n            </div>\n            )\n        }\n    });\n}\n\nexport { SortableTaskList, SortableProjectList };\n\n\n\n","// A whole lotta imports\n\n// Ionic components\nimport { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, isPlatform } from '@ionic/react';\nimport { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, calendar } from 'ionicons/icons';\n\n// Routing\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\n\n// Like, your heart and soul\nimport React, { Component } from 'react';\n\n// Cool components that we need\nimport Upcoming from './Upcoming';\nimport Calendar from './Calendar';\nimport Completed from './Completed';\nimport Perspectives from './Perspectives';\nimport Projects from './Projects';\nimport ABTIB from './Components/FloatingActionButton';\nimport Keybinds from './Components/KeybindManager';\n\n// Our very own CSS\nimport './Home.css';\n\n// Tootips\nimport ReactTooltip from 'react-tooltip';\n\n// autobind those functions\nconst autoBind = require('auto-bind/react');\nconst history = isPlatform(\"electron\") ? createHashHistory() : createBrowserHistory();\n\n/* \n *\n * Hello, human\n * Good morning\n * Read me please.\n *\n * Use the **state**'s itemSelected \n *     to manage the menu\n * use the **React Router URL** \n *     to manage the page\n *\n * Otherwise, unreload-reload won't work.\n *\n * Thanks. @jemoka.\n *\n */\n\n// Welp. The Home.\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            projects:[], // list of top level projects\n            perspectives:[], // list of perspectives\n            itemSelected:{item:\"upcoming\", id:undefined}, // so what did we actually select\n            isWorkspace:false, // current workspace\n            workspace: this.props.uid, // current workspace/uid\n        };\n\n        if (this.state.isWorkspace)\n            this.props.engine.workspaceify()\n        else\n            this.props.engine.userlandify()\n\n\n        // AutoBind!\n        autoBind(this);\n\n        this.abtibRef = React.createRef();\n\n        this.menu = React.createRef();\n\n    }\n\n    switch = (workspaceType, id=this.props.uid) => { \n        if (workspaceType === \"workspace\")\n            this.props.engine.workspaceify();\n        else\n            this.props.engine.userlandify();\n        this.setState({isWorkspace: workspaceType===\"workspace\", workspace:id});\n    }\n\n    paginate = (to, id) => this.setState({itemSelected:{item:to ,id}}) // Does not actually paginate; instead, it... uh... sets the highlighting of the menu\n\n    componentDidMount() {\n        // This is, indeed, the view\n        // Get the current URI to set which view is selected\n        let url = (new URL(document.URL))\n        let uri = url.pathname.split(\"/\");\n        let hash = url.hash.split(\"/\");\n        if (uri[1] === \"\")\n            this.setState({itemSelected:{item:\"upcoming\", id:\"\"}});\n        else if (isPlatform(\"electron\"))\n            this.setState({itemSelected:{item:hash[1], id:hash[2]}});\n        else\n            this.setState({itemSelected:{item:uri[1], id:uri[2]}});\n\n        this.refresh()\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevState.to !== this.state.to && this.state.to !== undefined)\n             this.setState({sends:{to:undefined, id:undefined}})\n\n        if (prevState.isWorkspace !== this.state.isWorkspace) \n            this.refresh();\n\n/*            if (this.state.isWorkspace)*/\n                //this.props.engine.workspaceify()\n            //else\n                /*this.props.engine.userlandify()*/\n    }\n\n    async refresh() {\n        // Load the top level projects and perspectives\n        // to set into the state and to add to the menu\n        let tlp = await this.props.engine.db.getTopLevelProjects(this.state.workspace);\n        let psp = await this.props.engine.db.getPerspectives(this.state.workspace);\n\n        this.setState({projects: tlp[2], perspectives:psp[2]});\n    }\n\n\n\n\n    render() {\n        const Router = isPlatform(\"electron\") ? IonReactHashRouter : IonReactRouter; // Router workaround for electron\n        return (\n            <IonPage>\n                {/* The central router that controls the routing of views */}\n                <Router history={history}>\n\t\t    <Keybinds \n\t\t\tpaginate={this.paginate} \n\t\t\tref={this.keybindRef} \n\t\t\tperspectives={this.state.perspectives}\n\t\t\tprojects={this.state.projects}\n\t\t\tabtib={this.abtibRef} \n\t\t\tengine={this.props.engine} \n\t\t\tuid={this.state.workspace} \n\t\t\tgruntman={this.props.gruntman} \n\t\t    />\n                    {/* OoIp */}\n                    <ReactTooltip />\n                    {/* App container */}\n                    <IonContent noBounce forceOverscroll={false}>\n                        {/* Menu pane to control mobile view splitting */}\n                        <IonSplitPane id=\"main-split\" contentId=\"main\" mode=\"md\">\n                            {/* The left: menu! */}\n                            <IonMenu id=\"main-menu\" contentId=\"main\" ref={this.menu}>\n                                <br />\n                                <IonContent id=\"menu-content\" className={(()=>{\n                                    if (!isPlatform(\"electron\")) // if we are not running electron\n                                        return \"normal\"; // normal windowing proceeds\n                                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                                        return \"darwin\"; // frameless setup\n                                    }\n                                    else if (process.platform === \"win32\") // windows\n                                        return \"windows\"; // non-frameless\n\n                                })()}>\n                                    {/* === Built Ins: upcoming + completed == */}\n                                    {/* Upcoming button + link */}\n                                    <Link to=\"/upcoming\" onClick={()=>this.setState({itemSelected:{item:\"upcoming\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Upcoming button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"upcoming\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20}} icon={chevronForwardCircle} />{this.props.localizations.upcoming}</div>\n                                    </Link>\n\n                                    {/* Completed button + link */}\n                                    <Link to=\"/completed\" onClick={()=>this.setState({itemSelected:{item:\"completed\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Completed button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"completed\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20, transform: \"translateY(3.5px)\"}} icon={checkmarkCircle} />{this.props.localizations.completed}</div>\n                                    </Link>\n\n                                    {/* Calendar button + link */}\n                                    <Link to=\"/calendar\" onClick={()=>this.setState({itemSelected:{item:\"calendar\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Calendar button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"calendar\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20, transform: \"translateY(3.5px)\"}} icon={calendar} />{this.props.localizations.calendar}</div>\n                                    </Link>\n\n                                    {/* === Perspectives == */}\n                                    <div className=\"menu-sublabel menu-decoration\">{this.props.localizations.perspectives} <a onClick={()=>{\n                                        if (this.menu.current)\n                                            this.menu.current.close();\n                                        let f = (async function() { // minification breaks double-called anonomous functions, so we must declare them explicitly\n                                            let npid = (await this.props.gruntman.do(\n                                                \"perspective.create\", {\n                                                    uid: this.state.workspace,\n                                                },\n                                            )).pid;\n                                            history.push(`/perspectives/${npid}/do`);\n                                            this.paginate(\"perspectives\", npid);\n                                            this.refresh();\n                                        }).bind(this);\n                                        f();\n\n                                    }} className=\"fa fa-plus add\"></a></div>\n\n                                    {/* === Perspective button + link == */}\n                                    {this.state.perspectives.map((psp) => {\n                                        return (\n                                            <Link key={psp.id} to={`/perspectives/${psp.id}`} onClick={()=>this.setState({itemSelected:{item:\"perspectives\", id:psp.id}})}> {/* Link to trigger router */}\n                                                {/* Perspective button */}\n                                                <div className={\"menu-item \"+(this.state.itemSelected.item === \"perspectives\" && this.state.itemSelected.id === psp.id ? \"menu-item-selected\" : \"\")}><i className=\"fas fa-layer-group\" style={{paddingRight: 2}}></i> {psp.name}</div> \n                                            </Link>\n                                        )\n                                    })}\n\n\n                                    {/* === Projects == */}\n                                    <div className=\"menu-sublabel menu-decoration\">{this.props.localizations.projects}<a onClick={()=>{\n                                        if (this.menu.current)\n                                            this.menu.current.close();\n                                        let f = (async function() { // minification breaks double-called anonomous functions, so we must declare them explicitly\n                                            let npid = (await this.props.gruntman.do(\n                                                \"project.create\", {\n                                                    uid: this.state.workspace,\n                                                },\n                                            )).pid;\n                                            history.push(`/projects/${npid}/do`);\n                                            this.paginate(\"projects\", npid);\n                                            this.refresh();\n                                        }).bind(this);\n                                        f();\n\n                                    }} className=\"fa fa-plus add\"></a></div>\n                                    {/* === Project Contents == */}\n                                    {this.state.projects.map((proj) => {\n                                        return (\n                                            <Link key={proj.id} to={`/projects/${proj.id}`} onClick={()=>this.setState({itemSelected:{item:\"projects\", id:proj.id}})}> {/* Link to trigger router */}\n                                                {/* Perspective button */}\n                                                <div className={\"menu-item \"+(this.state.itemSelected.item === \"projects\" && this.state.itemSelected.id === proj.id ? \"menu-item-selected\" : \"\")}><IonIcon icon={listOutline}/>{proj.name}</div></Link> \n                                        )                            \n                                    })}\n\n                                </IonContent>\n\n                                {/* Logout button */}\n                                <div className=\"menu-item\" id=\"logout\" onClick={()=>{history.push(`/`);this.props.dispatch({operation: \"logout\"})}}><i className=\"fas fa-snowboarding\" style={{paddingRight: 5}} />{this.props.localizations.logout}</div>\n                            </IonMenu>\n                            <IonPage id=\"main\">\n                                {/* the add button to inbox button*/}\n                                <ABTIB reference={this.abtibRef} uid={this.state.workspace} gruntman={this.props.gruntman} localizations={this.props.localizations}/>\n                                {/* the portal root for DOM elements to park */}\n                                <div id=\"parking-lot\"></div>\n                                {/* The actual page */}\n                                <IonRouterOutlet>\n                                    {/* empty => /upcoming*/}\n                                    <Route render={() => <Redirect to=\"/upcoming\"/>}/>\n                                    {/* / => /upcoming */}\n                                    <Route exact path=\"/\" render={() => <Redirect to=\"/upcoming\" />} />\n                                    {/* and the perspective switch */}\n                                    <Switch>\n                                        {/* upcoming renders upcoming */}\n                                        <Route path=\"/upcoming\" exact render={()=><Upcoming engine={this.props.engine} uid={this.state.workspace} gruntman={this.props.gruntman} displayName={this.props.displayName} localizations={this.props.localizations} actualUID={this.props.uid} switch={this.switch} authType={this.props.authType}/>} />\n                                        {/* completed renders completed */}\n                                        <Route path=\"/calendar\" exact render={()=><Calendar engine={this.props.engine} uid={this.state.workspace} gruntman={this.props.gruntman} />} localizations={this.props.localizations} />\n\n                                        {/* completed renders completed */}\n                                        <Route path=\"/completed\" exact render={()=><Completed engine={this.props.engine} uid={this.state.workspace} gruntman={this.props.gruntman} localizations={this.props.localizations} />} />\n\n                                        {/* perspective renders perspectives */}\n                                        <Route path=\"/perspectives/:id/:create?\" render={({match})=><Perspectives engine={this.props.engine} paginate={this.paginate} id={match.params.id} uid={this.state.workspace}  gruntman={this.props.gruntman}  menuRefresh={this.refresh}  options={match.params.create} localizations={this.props.localizations}/>}  />\n\n                                        {/* project renders perspectives */}\n                                        <Route path=\"/projects/:id/:create?\" render={({match})=><Projects engine={this.props.engine} id={match.params.id} uid={this.state.workspace}  gruntman={this.props.gruntman}  menuRefresh={this.refresh} paginate={this.paginate} options={match.params.create} localizations={this.props.localizations}/>}  />\n                                        {/* TODO projects */}\n                                    </Switch>\n                                </IonRouterOutlet>\n                            </IonPage>\n                        </IonSplitPane>\n                    </IonContent>\n                </Router>\n            </IonPage>\n        );\n    }\n};\n\nexport default Home;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, IonBadge, isPlatform, IonInfiniteScroll, IonInfiniteScrollContent, IonPopover } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Upcoming.scss';\nimport './Pages.css';\n\nimport { SortableTaskList } from './Components/Sortable';\n\nimport Task from './Components/Task';\n\nimport WorkspaceModal from './Components/WorkspaceModal';\n\nconst autoBind = require('auto-bind/react'); // autobind things! \n\n/* \n * The lack of a poem here is scathing\n * so I thought\n * I'd contribute.\n *\n * The homepage needs no introduction\n * For it explains itself in production.\n *\n * But alas,\n * I still write this.\n *\n * What for?\n *\n * @Jemoka\n *\n */\n\n\nclass Upcoming extends Component { // define the component\n    constructor(props) {\n        super(props);\n\n        let tomorrow = new Date();\n        tomorrow.setDate(tomorrow.getDate()+1);\n\n        let greetings = this.props.localizations.greetings_setA;\n\n        this.state = {\n            inbox: [], // define the inbox\n            dueSoon: [], // whats due soon? \n            possibleProjects:{}, // what are the possible projects? \n            possibleTags:{},  // what are the possible tags?\n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [],  // whats available\n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            timeline: [],\n            timelineShown: false,\n            greeting: greetings[Math.floor(Math.random() * greetings.length)],\n            workspaces: [],\n            workspacesPopoverShown: [false, null],\n            workspaceModalShown: false,\n            currentlyEditedWorkspace: null,\n            currentWorkspace: this.props.localizations.personal_workspace\n        };\n\n        this.updatePrefix = this.random();\n\n        this.workspaceButton = React.createRef();\n\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n\n        autoBind(this);\n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pandt = await this.props.engine.db.getInboxandDS(this.props.uid, avail) // get inbox and due soon \n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n\n        this.updatePrefix = this.random();\n\n        let timeline = await this.props.engine.db.selectTasksInRange(this.props.uid, new Date(), new Date(2100, 1, 1), true);\n        \n                            //timeline.push({type: \"label\", content: timelineRenderedUntil});\n                        //for (let task of fTasks)\n                            //timeline.push({type:\"task\", content:task});\n\n                        //this.setState({timelineRenderedUntil, timelineSoFar: timeline});\n        // Date same date check https://stackoverflow.com/questions/4428327/checking-if-two-dates-have-the-same-date-info\n        timeline = timeline.filter((x)=>!pandt[1].includes(x[0]))\n        Date.prototype.isSameDateAs = function(pDate) {\n          return (\n            this.getFullYear() === pDate.getFullYear() &&\n            this.getMonth() === pDate.getMonth() &&\n            this.getDate() === pDate.getDate()\n          );\n        }\n\n        let refrenceDate = new Date();\n        let tcontent = [];\n        for (let task of timeline) {\n            let due = new Date(task[1].due.seconds*1000);\n            if (!due.isSameDateAs(refrenceDate)) {\n                tcontent.push({type:\"label\", content: due});\n                refrenceDate = due;\n            }\n            tcontent.push({type:\"task\", content: task[0]});\n        }\n\n        let n = this.props.localizations.personal_workspace;\n        let workspaceNames = []\n\n        if (this.props.authType === \"firebase\") {\n            let workspaces = await this.props.engine.db.getWorkspaces(this.props.actualUID);\n\n            workspaceNames = await Promise.all(workspaces.map(async function(e){\n                let name = (await views.props.engine.db.getWorkspace(e)).meta.name\n                if (e===views.props.uid)\n                    n = name;\n                return [e, name]\n            }));\n        }\n\n        this.setState({inbox: pandt[0], dueSoon: pandt[1], possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB, timeline: tcontent, workspaces: workspaceNames, currentWorkspace: n});\n    }\n\n    componentDidMount() {\n        this.refresh();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevProps.uid != this.props.uid) \n            this.refresh();\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n\n    render() {\n        return (\n            <IonPage>\n                <div style={{overflow: \"hidden\"}}>\n                    <div className={\"page-invis-drag \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>&nbsp;</div>\n                    <div className={\"page-content \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>\n                        <WorkspaceModal engine={this.props.engine} gruntman={this.props.gruntman} isShown={this.state.workspaceModalShown} currentWorkspace={this.state.currentlyEditedWorkspace} onDidDismiss={()=>this.setState({workspaceModalShown: false})} getUserByEmail={this.props.getUserByEmail}/>\n                        <div className=\"header-container\" onTouchMove={(e)=>e.preventDefault()}>\n                            <div style={{display: \"inline-block\"}}>\n                                <IonMenuToggle><i className=\"fas fa-bars\" style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} /></IonMenuToggle> <h1 className=\"page-title\"><i style={{paddingRight: 10}} className=\"fas fa-chevron-circle-right\"></i>{this.props.localizations.upcoming}</h1> \n\n                                <div style={{display: \"inline-block\", background: \"var(--decorative-light)\", width: 1, transform:\"translate(-13.5px, 4px)\", height: 20}}>&nbsp;</div> \n                            <div className=\"greeting-datewidget\">\n                                <div style={{display: \"inline-block\"}} className=\"greeting-date\">{(new Date()).getDate()}</div>\n                                <div style={{display: \"inline-block\"}} className=\"greeting-datename\">{new Date().toLocaleString(this.props.localizations.getLanguage(), {  weekday: 'long' })}</div>\n                            </div>\n                            \n\n\n                                <div className=\"greeting-container\"><span id=\"greeting\">{this.state.greeting}</span> <span id=\"greeting-name\" style={{fontWeight: 600}}>{this.props.displayName}</span><a className=\"workspace-name\"  style={{display: this.props.authType===\"firebase\"?\"inline-block\":\"none\"}} onClick={(e)=>this.setState({workspacesPopoverShown: [true, e.nativeEvent]})}>{this.state.currentWorkspace}</a></div>\n                            </div>\n                        </div>\n                        <IonPopover\n                            showBackdrop={false}\n                            ref={this.workspaceButton}\n                            isOpen={this.state.workspacesPopoverShown[0]}\n                            cssClass='workspaces-popover'\n                            mode=\"md\" \n                            onDidDismiss={e => this.setState({workspacesPopoverShown: [false, null]})}\n                            event={this.state.workspacesPopoverShown[1]}\n                        >\n                            <div><div className=\"workspace-name-container\">\n                                <div className=\"workspace-name-selection\" onClick={()=>{\n                                    this.workspaceButton.current.dismiss();\n                                    this.props.switch(\"personal\");\n                                    this.setState({currentWorkspace: this.props.localizations.personal_workspace});\n                                }}><i className=\"fas fa-stream\" style={{marginRight: 10}} />{this.props.localizations.personal_workspace}</div></div>\n                                {this.state.workspaces.map(([id, name])=><div className=\"workspace-name-container\"><div onClick={()=>{\n                                    this.workspaceButton.current.dismiss();\n                                    this.props.switch(\"workspace\", id);\n                                    this.setState({currentWorkspace: name});\n                                }} className=\"workspace-name-selection\"><i className=\"fas fa-stream\" style={{marginRight: 10}} />{name}</div><a className=\"workspace-edit fas fa-pen\" onClick={()=>{\n                                    this.workspaceButton.current.dismiss();\n                                    this.props.switch(\"workspace\", id);\n                                    this.setState({currentWorkspace: name, currentlyEditedWorkspace: id, workspaceModalShown: true});\n                                }} /></div>)}\n                            </div>\n                        </IonPopover>\n                            <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\", flexGrow: 5}}>\n                                <div>\n                                    {(()=>{\n                                        if (this.state.inbox.length > 0)\n                                            return <div className=\"page-label\">{this.props.localizations.unsorted}<IonBadge className=\"count-badge\">{this.state.inbox.length}</IonBadge></div>\n                                })()}\n                                <SortableTaskList list={this.state.inbox} prefix={this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                            </div>\n                            <div>\n                                {(()=>{\n                                    if (this.state.dueSoon.length > 0)\n                                        return <div className=\"page-label\">{this.props.localizations.ds}<IonBadge className=\"count-badge\">{this.state.dueSoon.length}</IonBadge></div>\n                                })()}\n                                {this.state.dueSoon.map(id => (\n                                    <Task tid={id} key={id+\"-\"+this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability[id]} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                                ))}\n                            </div>\n                            <div>\n                                <div className=\"timeline-button\">\n                                    <a \n                                        onClick={()=>\n                                                this.setState({timelineShown: !this.state.timelineShown})} \n                                        // for some reason, css classes don't work, so we have to style here\n                                        // @jack? why don't they? well, styling here's fine anyways. most likely b/c they are overrode by className=timeline-button\n                                        style={{\n                                            marginLeft: 15,\n                                            marginTop: 20, \n                                            display: \"inline-block\", \n                                            fontWeight: 600, \n                                            fontSize: 13, \n                                            //color: \"var(--decorative-light-alt)\", \n                                            cursor: \"pointer\"}}\n                                    >\n                                        <i \n                                            className=\"fas fa-calendar-week\" \n                                            style={{paddingRight: 5}}\n                                        ></i> {this.state.timelineShown? this.props.localizations.hide : this.props.localizations.show} {this.props.localizations.timeline}</a>\n                                </div> \n                                {\n                                    (()=>{\n                                        if (this.state.timelineShown)\n                                            return this.state.timeline.map(timelineItem => {\n                                                if (timelineItem.type === \"task\")\n                                                    return <Task tid={timelineItem.content} key={timelineItem.content+\"-\"+this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability[timelineItem.content]} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                                                        else if (timelineItem.type === \"label\")\n                                                    return <div className=\"timeline-box\"><div className=\"timeline-line-container\"><div className=\"timeline-line\">&nbsp;</div></div><div className=\"timeline-text\"><span className=\"timeline-weekname\">{timelineItem.content.toLocaleDateString(this.props.localizations.getLanguage(), { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span></div></div>\n\n\n                                            })\n                                    })()\n                                }\n                                {\n                                    (()=>{\n                                            if (this.state.timelineShown)\n                                            return <span style={{fontSize: 8, color:\"var(--commitid)\", paddingLeft:10, paddingTop:10}}>Commit ID: {process.env.REACT_APP_COMMIT_HASH}</span>\n                                    })()\n                                }\n                            </div>\n                            <div className=\"bottom-helper\">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\n// Hiding scrollbar, a journey\n\n\n\nexport default Upcoming;\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { useState, useEffect } from 'react';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport \"./WorkspaceModal.css\";\n\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the repeat UI\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\n\nfunction WorkspaceModal(props) {\n\n    let [workspaceName, setWorkspaceName] = useState(\"\");\n    let [workspaceEditors, setWorkspaceEditors] = useState([]);\n\n    useEffect(()=>{\n        (async function() {\n            if (props.currentWorkspace) {\n                setWorkspaceName((await props.engine.db.getWorkspace(props.currentWorkspace)).meta.name);\n                setWorkspaceEditors((await props.engine.db.getWorkspace(props.currentWorkspace)).meta.editors);\n            }\n        })();\n    }, [props.currentWorkspace]);\n\n\n    return (\n        <IonModal ref={props.reference} isOpen={props.isShown} onDidDismiss={() => {if(props.onDidDismiss) props.onDidDismiss()}} style={{borderRadius: 5}} cssClass=\"workspace-popover\">\n            <div className=\"workspace-inside\">\n                <div className=\"workspace-header\">\n                    <span className=\"workspace-callout\">{props.gruntman.localizations.perspective_build_callout}</span>\n                    <input className=\"editable-title workspace-input\" \n                        defaultValue={workspaceName} \n                        style={{minWidth: 0}}\n                        placeholder=\"@NEEDLOC Tap to set name\"\n                        onChange={(e)=>{\n                            e.persist();\n                            this.props.gruntman.registerScheduler(() => this.props.gruntman.do(\n                                \"workspace.update\", // the scheduler actually updates the task\n                                {\n                                    uid: props.currentWorkspace, \n                                    query:{meta: {name: e.target.value, editors: workspaceEditors}} // setting the name to the name\n                                }\n                            ), `workspace-${props.currentWorkspace}-update`)\n                        }}\n                    />\n                </div>\n                {workspaceEditors.map(e=><span>{e}</span>)}\n            </div>\n        </IonModal>\n    )\n}\n\n\n\n\nexport default WorkspaceModal;\n\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component, useState, useEffect } from 'react';\nimport {withGetScreen} from 'react-getscreen'\nimport './Calendar.css'\nimport './Pages.css';\nimport ReactTooltip from 'react-tooltip';\nimport { withRouter } from \"react-router\";\n\nimport Task from './Components/Task';\nimport CalendarPopover, { CalendarUnit } from './Components/CalendarPopover';\nimport CalendarTasklistPopover from './Components/CalendarTasklistPopover';\n\nconst autoBind = require('auto-bind/react');\n\n\n\n/* \n *\n * Apparently,\n * People like calendars.\n *\n * WHY?\n *\n * People don't respect \n * the existance \n * of the whole idea of GTD.\n *\n * Seriously.\n *\n * Why. A calendar?! in a GTD app.\n *\n * FINE. Here's your calendar.\n *\n * @jemoka\n *\n *\n */\n\nlet refreshed = 0;\n\nfunction CalPageBigOllendar(props) {\n\n    function __util_calculate_gradient(left, right, gradientAmount) {\n        let color1 = left;\n        let color2 = right;\n        let ratio = gradientAmount;\n        let hex = function(x) {\n            x = x.toString(16);\n            return (x.length == 1) ? '0' + x : x;\n        };\n\n        let r = Math.ceil(parseInt(color1.substring(0,2), 16) * ratio + parseInt(color2.substring(0,2), 16) * (1-ratio));\n        let g = Math.ceil(parseInt(color1.substring(2,4), 16) * ratio + parseInt(color2.substring(2,4), 16) * (1-ratio));\n        let b = Math.ceil(parseInt(color1.substring(4,6), 16) * ratio + parseInt(color2.substring(4,6), 16) * (1-ratio));\n\n        return hex(r) + hex(g) + hex(b);\n    }\n\n    let [dateSelected, setDateSelected] = useState(new Date());\n\n    let currentMonth = dateSelected.getMonth();\n    let currentYear = dateSelected.getFullYear();\n\n    let firstDayMonth = new Date(currentYear, currentMonth, 1);\n    let lastDayMonth = new Date(currentYear, currentMonth+1, 0);\n    let lastDayLastMonth = new Date(currentYear, currentMonth, 0);\n\n    let firstDayDayname = firstDayMonth.getDay()+1;\n\n    let daysBefore = [...new Array(firstDayDayname-1)].map((_, i)=>{return {type: \"pre\", content: i+lastDayLastMonth.getDate()-(firstDayDayname-1)+1}});\n\n    let daysAfter = [...new Array((6-lastDayMonth.getDay()===-1)?6:6-lastDayMonth.getDay())].map((_, i)=>{return {type:\"post\", content:i+1}});\n\n    let contentDays = [...new Array(lastDayMonth.getDate())].map((_, i)=>{return {type:\"actual\", content:i+1}});\n\n    let [heat, setHeat] = useState({});\n\n    let [isPopoverShown, setIsPopoverShown] = useState(false);\n\n    let [shownList, setShownList] = useState([]);\n    \n    Array.prototype.max = function() {\n        return Math.max.apply(null, this);\n    };\n\n    let refresh = (async function() {\n            let map = new Map();\n            let names = new Map();\n            let ids = new Map();\n            let hm = {};\n            let taskList = await props.engine.db.selectTasksInRange(props.uid, firstDayMonth, lastDayMonth, true);\n            taskList.forEach(([id, val])=>{\n                let date = new Date(val.due.seconds*1000);\n                date.setHours(0, 0, 0, 0);\n                let time = date.getDate();\n                if(map.has(time))\n                    map.set(time, map.get(time)+1);\n                else\n                    map.set(time, 1);\n                if(names.has(time))\n                    names.set(time, [...names.get(time), val.name]);\n                else\n                    names.set(time, [val.name]);\n                if(ids.has(time))\n                    ids.set(time, [...ids.get(time), id]);\n                else\n                    ids.set(time, [id]);\n\n            });\n            let values = Array.from(map.values());\n            let nameList = Array.from(names.values());\n            let idList = Array.from(ids.values());\n            if (values.length > 0) {\n                let max = values.max();\n                let style = getComputedStyle(document.body);\n                let hexes = values.map(e=>__util_calculate_gradient(style.getPropertyValue('--heatmap-darkest').trim().slice(1), style.getPropertyValue('--heatmap-lightest').trim().slice(1), e/max));\n                Array.from(map.keys()).forEach((e, i)=>{hm[e]={color:hexes[i], value:values[i], names:nameList[i], ids: idList[i]}});\n            }\n            setHeat(hm);\n        })\n\n    useEffect(()=>{\n        refresh();\n    },[dateSelected, refreshed]);\n\n    return (\n        <div id=\"calendar-page-bigol-calendar-wrapper\" style={{display: \"inline-block\", height: \"85%\", width: \"95%\", ...props.style}}>\n            <CalendarTasklistPopover uid={props.uid} engine={props.engine} isShown={isPopoverShown} onDidDismiss={()=>setIsPopoverShown(false)} list={shownList} availability={props.availability} datapack={props.datapack} gruntman={props.gruntman} currentDate={dateSelected}/>\n            <div id=\"bigol-calendar-wrapper\">\n                <div id=\"bigol-calendar-daterow\">\n                    <span className=\"bigol-calendar-daterow-item\">Sun</span>\n                    <span className=\"bigol-calendar-daterow-item\">Mon</span>\n                    <span className=\"bigol-calendar-daterow-item\">Tues</span>\n                    <span className=\"bigol-calendar-daterow-item\">Wed</span>\n                    <span className=\"bigol-calendar-daterow-item\">Thu</span>\n                    <span className=\"bigol-calendar-daterow-item\">Fri</span>\n                    <span className=\"bigol-calendar-daterow-item\">Sat</span>\n                </div>\n                <div id=\"bigol-calendar-container\">\n                    {[...daysBefore,...contentDays,...daysAfter].map(i =>\n                    <span className={`bigol-calendar-container-item calendar-container-item-${i.type} calendar-container-item-${i.content}`} style={{\n                        backgroundColor: ((heat[i.content]&&i.type === \"actual\") ? \n                            `#${heat[i.content].color}` :\n                            \"inherit\")\n                    }}\n                        onClick={(e)=>{\n                            let date;\n                            if (i.type === \"pre\")\n                                date = new Date(lastDayLastMonth.getFullYear(), lastDayLastMonth.getMonth(), i.content);\n                            if (i.type === \"actual\") \n                                date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth(), i.content);\n                            if (i.type === \"post\") \n                                date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, i.content);\n                            setDateSelected(date);\n                            if (heat[i.content])\n                                setShownList(heat[i.content].ids);\n                            else\n                                setShownList([]);\n                            setIsPopoverShown(true)\n                            if (props.onDateSelected)\n                                props.onDateSelected(date);\n                        }}>\n                        <div className=\"calendar-date-text\">\n                            {i.content}<span className=\"calendar-date-value\">{(heat[i.content]&&i.type===\"actual\")?`${heat[i.content].value} Tasks`:null}</span></div><div style={{marginLeft: 6, marginRight: 5, marginBottom: 2}}>{((heat[i.content]&&i.type===\"actual\")?heat[i.content].names:[]).map((name)=><span className=\"calendar-date-taskname\"><div className=\"calendar-task-circle\">&nbsp;</div>{name}</span>)}</div>\n                    </span>\n                    )}\n                </div>\n                <div id=\"bigol-calendar-tools\">\n                    <a className=\"fas fa-caret-left calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()-1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <a className=\"fas fa-caret-right calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <div className=\"calendar-today\" onClick={()=>{\n                        setDateSelected(new Date());\n                        if (props.onDateSelected)\n                            props.onDateSelected(new Date());\n\n                    }}>{props.gruntman.localizations.clbtd}</div>\n\n\n                </div>\n\n                <div id=\"bigol-calendar-infopanel\">\n                    <div id=\"bigol-calendar-dategroup\">\n                        <div className=\"bigol-calendar-infopanel-dateselected\">{dateSelected.getDate()}</div>\n                        <div className=\"bigol-calendar-infopanel-datename\">{dateSelected.toLocaleString(props.gruntman.localizations.getLanguage(), {  weekday: 'long' })}</div>\n                        <div className=\"bigol-calendar-infopanel-month\">{dateSelected.toLocaleString(props.gruntman.localizations.getLanguage(), { month: 'long' })}</div>\n                        <div className=\"bigol-calendar-infopanel-year\">{dateSelected.getFullYear()}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\nclass Calendar extends Component {\n\n    constructor(props) {\n        super(props);\n\n        let today = new Date();\n        today.setHours(0,0,0,0);\n\n        this.state = {\n            possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            currentDate: (today), // new date\n            taskList: [],\n            popoverIsVisible: false,\n\n        };\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        this.repeater = React.createRef(); // what's my repeater? | i.. i dont know what this does...\n\n        // AutoBind!\n        autoBind(this);\n    }\n    showEdit() {\n        this.setState({showEdit: true})\n    } // util func for showing repeat\n    hideEdit() {\n        this.setState({showEdit: false});\n    } // util func for hiding repeat\n\n    componentWillUnmount() {\n        this.props.gruntman.halt(); // when we unmount, halt gruntman? idk what this does  \n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) // tag nd project stuff \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n\n        projectDB.map(proj=>buildSelectString(proj));\n\n        let endDate = new Date(this.state.currentDate);\n        endDate.setHours(23,59,59,60);\n        let taskList = await this.props.engine.db.selectTasksInRange(this.props.uid, this.state.currentDate, endDate);\n\n        refreshed++;\n\n        this.setState({\n            possibleProjects: pPandT[0][0],\t     // set the project stuff\n            possibleTags: pPandT[1][0],\t\t    // set the tag stuff  \n            possibleProjectsRev: pPandT[0][1],\t   // set more projects stuff  \n            possibleTagsRev: pPandT[1][1],\t  // set more tags stuff  \n            availability: avail,\t\t // set the avail\n            projectSelects: projectList,\t// set the project list  \n            tagSelects: tagsList,\t       // set the tag list\n            projectDB, \t\t\t      // and the project db \n            taskList\n        }); // once we finish, set the state\n    }\n\n    componentDidMount() {\n        this.refresh()\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n                {/* the perspective editor! */}\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n                    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-calendar-alt\">\n                                    </i>\n                                    {this.props.gruntman.localizations.calendar}\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n                            </div> \n                        </div>\n                    </div>\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\", height: \"100%\"}}>\n                        <div id=\"calendar-page-wrapper\">\n                            {(()=>{\n                                if (this.props.isMobile())\n                                    return <CalendarUnit gruntman={this.props.gruntman} uid={this.props.uid} engine={this.props.engine} isShown={this.state.popoverIsVisible} onDidDismiss={()=>this.setState({popoverIsVisible: false})}  onDateSelected={(async function(d){\n                                        let endDate = new Date(d.getTime());\n                                        endDate.setHours(23,59,59,60);\n                                        let taskList = await this.props.engine.db.selectTasksInRange(this.props.uid, d, endDate);\n                                        this.setState({currentDate: d, taskList});\n                                    }).bind(this)}/>\n                                else \n                                    return <CalPageBigOllendar gruntman={this.props.gruntman}  uid={this.props.uid} engine={this.props.engine} availability={this.state.availability} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                            })()}\n                            {(()=>{\n                                if (this.props.isMobile())\n                            return <div id=\"calendar-page-taskpage-wrapper\">\n                                <span id=\"calendar-page-header\">\n                                    <div class=\"calendar-page-count\">{this.state.taskList.length}</div>\n                                    <div class=\"calendar-page-title\">tasks due on</div>\n                                    <div class=\"calendar-page-date\">{this.state.currentDate.toLocaleString('en-us', {  weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'  })}</div>\n                                </span>\n                                {this.state.taskList.map(id=>(\n                                    <Task tid={id} key={id+\"-\"+this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability[id]} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                                ))}\n                            </div>\n                            })()}\n                        <div className=\"bottom-helper\">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\nexport default withGetScreen(Calendar, {mobileLimit: 720, tabletLimit:768, shouldListenOnResize: true});\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { createRef, useEffect, useRef } from 'react';\nimport '../Calendar.css';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\nimport Task from '../Components/Task';\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the calendar popover\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\n\nfunction CalendarTasklistPopover(props) {\n\n    let refs = useRef([]);\n\n    useEffect(()=>{\n        refs.current=props.list.map((_)=>createRef());\n    }, [props.list]);\n\n    return (\n        <IonModal ref={props.reference} isOpen={props.isShown} onDidDismiss={() => {if(props.onDidDismiss) props.onDidDismiss()}} style={{borderRadius: 5}} cssClass=\"calendar-list-popover\">\n                <div id=\"airplane-hanger\"></div> {/*to mount the calendar*/}\n            <div className=\"popover-list\">\n                <span id=\"calendar-page-header\">\n                    <div class=\"calendar-page-count\">{props.list.length}</div>\n                    <div class=\"calendar-page-title\">tasks due on</div>\n                    <div class=\"calendar-page-date\" >{props.currentDate.toLocaleString('en-us', {  weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'  })}</div>\n                </span>\n\n                {props.list.map((id, i)=>\n                    <div ref={refs.current[i]}>\n                        <Task tid={id} key={id} uid={props.uid} engine={props.engine} gruntman={props.gruntman} availability={props.availability[id]} datapack={props.datapack} envelope={refs.current[i]} onModal={true}/>\n                    </div>\n                )}\n\n\n\n\n\n\n\t\t<div style={{marginTop: 10}}>\n\t\t    <a className=\"newbutton\" onClick={()=>{\n\t\t\tprops.gruntman.do( // call a gruntman function\n\t\t\t    \"task.create\", { \n\t\t\t\tuid: props.uid, // pass it the things vvv\n\t\t\t\tpid: \"\",\n\t\t\t\t//due,\n\t\t\t\t//defer,\n\t\t\t\tname: ''\n\t\t\t    }\n\t\t\t).then((result)=>{\n\t\t\t}) // call the homebar refresh\n\t\t    }}><div><i className=\"fas fa-plus-circle subproject-icon\"/><div style={{display: \"inline-block\", fontWeight: 500}}>wheee</div></div></a>\n\n\t\t    <div className=\"bottom-helper\">&nbsp;</div>\n\t\t</div>\n\n\n                <div className=\"bottom-helper\" style={{height: 150}}>&nbsp;</div>\n            </div>\n        </IonModal>\n    )\n}\n\nexport default CalendarTasklistPopover;\n\n","// IMPORTS\nimport { IonContent, IonPage, IonMenuToggle, isPlatform } from '@ionic/react'; \nimport React, { Component, useEffect } from 'react';\nimport './Completed.css';\nimport './Pages.css';\nimport Task from './Components/Task';\nconst autoBind = require('auto-bind/react'); // autobind is a lifesaver\n\n/*\n\n * Sometimes we complete.\n *\n * This is not always correct,\n *\n * so we have this page! \n *\n * @enquirer\n\n*/\n\n// construtor for rendered object\nfunction TaskObject(type, contents) {\n    this.type = type; // set the type to the type (label or task)\n    this.contents = contents; // set the contents to the contents (title or id)\n}\n\n// define the main component!\nclass Completed extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            taskList: [], // the objects we render\n            tasksShown: 1, // track the number of times we have fetched more\n            taskCats: [\"Today\", \"Yesterday\", \"This Week\", \"This Month\", \"Even Before\"], // define task categories (cats!)\n            rendering: true, // define whether or not the element is rendering \n            possibleProjects:{}, // see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {}\n        };\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        autoBind(this);\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    async refresh() {\n        let taskArr = []; // define temp array\n        let full = await this.props.engine.db.getCompletedTasks(this.props.uid); // get the tasks from the database \n\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n        // loop through the tasks, converting to objects and inserting labels between each cat\n        full.forEach((cat, i) => {\n            taskArr.push(new TaskObject(\"label\", this.state.taskCats[i])) // each iteration, push the next label to the temp arr\n            cat.forEach(task => { // this loops through each cat\n                taskArr.push(new TaskObject(\"task\", task)) // convert each task to an object then push it to the temp arr\n            })\n        });\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n        this.setState({taskList: taskArr, rendering: false, possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB}); // once we finish, set the state\n        // also set rendering to false. \n        // This is a hacky solution instead of creating an entirely new async function.\n    }\n\n    async componentDidMount() {\n        this.refresh(); // refresh when the component mounts\n    }\n\n    handleFetchMore() {\n        this.setState({rendering: true}) // trigger loading screen\n        const loader =  setTimeout(() => { // set a timeout to set the rendering to false \n            this.setState({rendering: false})\n\n        }, 2);\n\n        const updateTasks =  setTimeout(() => { // set another timeout for the actual task update\n            this.setState({tasksShown: this.state.tasksShown+1}) \n            // increment tasksShown by one whenever fetch more is clicked\n            // this renders 10 more items \n            this.setState({rendering: false}) // set rendering to false\n        }, 1)\n\n        // disclaimer: I do not understand how this works. I was just messing around trying to debug and this happened to work.\n        // if it ain't broke, dont fix it? \n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n                <div style={{overflowY: \"scroll\"}}>\n                    <div className={\"page-invis-drag \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>&nbsp;</div>\n                    <div className={\"page-content \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>\n\n                        <div className=\"header-container\">\n                            <div style={{display: \"inline-block\"}}>\n                                <IonMenuToggle>\n                                    <i class=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-check-circle\">\n                                    </i>\n                                    Completed\n                                </h1> \n                            </div>\n                        </div>\n                        {/* loop through the taskList ten times, multiplyed by the times we have fetched more */}\n                        {/* if the cat is empty or the final item rendered is a label, don't render it */}\n                        {/* otherwise, render a task */}\n                        {/* for the fetch more, if we are currently rendering, render a loading animation. */}\n                        {/* Otherwise, render a fetch more.*/}\n                        <div style={{overflowY: \"scroll\"}}>\n                            {this.state.taskList.slice(0, 10*this.state.tasksShown).map((content, i) => (\n                                <div style={{marginLeft: 10, marginRight: 10}}>\n                                    {(content.type == \"label\")?  \n                                            (this.state.taskList[i+1] ? \n                                                ((this.state.taskList[i+1].type == \"label\" || this.state.taskList.slice(0, 10*this.state.tasksShown).length == i+1) ? \n                                                \"\" : <p className=\"page-label\" style={{marginBottom:0}}>{content.contents}</p>) : \"\") : \n                                                <Task \n                                                    tid={content.contents} \n                                                    startingCompleted={true}\n                                                    key={content.contents+\"-\"+this.updatePrefix} \n                                                    uid={this.props.uid} \n                                                    engine={this.props.engine} \n                                                    gruntman={this.props.gruntman} \n                                                    availability={this.state.availability[content.contents]} \n                                                    datapack={[this.state.tagSelects,\n                                                        this.state.projectSelects, \n                                                        this.state.possibleProjects, \n                                                        this.state.possibleProjectsRev, \n                                                        this.state.possibleTags, \n                                                        this.state.possibleTagsRev]}\n                                                />\n                                    }\n                                </div>\n                            ))}\n\n                        <div className=\"fetch-more\" > \n                            {/* define the fetch more button */}\n                            {this.state.rendering? <p className=\"loader\" >Loading...</p> : <p onClick={this.handleFetchMore}>Fetch more...</p>}\n                        </div> \n                    <div className=\"bottom-helper\">&nbsp;</div>\n                    </div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\nexport default Completed;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Perspectives.css'\nimport './Pages.css';\nimport ReactTooltip from 'react-tooltip';\nimport { withRouter } from \"react-router\";\n\nimport Task from './Components/Task';\nimport PerspectiveEdit from './Components/PerspectiveEditor';\n\nconst autoBind = require('auto-bind/react');\n\n\n\n/* \n * To sort, we give our tasks tags\n *\n * We can also give them flags\n * \n * With perspectives we filter,\n *\n * To keep our tasks in kilter,\n *\n * Then refactor the code if it lags!\n *\n *\n * @enquirer\n *\n */\n\n\nclass Perspectives extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            taskList: [], // what tasks should we display? \n            perspectiveName: \"\", // whats the perspective name? \n\t    perspectiveQuery: \"\", // whats the perspective query (whats in the text box)?\n\t    perspectiveAvail: {}, // whats the perspective availability? \n\t    perspectiveTord: {},  // whats the perspective ordering?\n\t    // not truth or dare. jack doent even know what that is! ^^ \n            showEdit: this.props.options === \"do\", // are we showing? on do, we are.\n            possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {}\n\n        };\n\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        this.repeater = React.createRef(); // what's my repeater? | i.. i dont know what this does...\n\n\n        // AutoBind!\n        autoBind(this);\n    }\n    showEdit() {\n        this.setState({showEdit: true})\n    } // util func for showing repeat\n    hideEdit() {\n        this.setState({showEdit: false});\n    } // util func for hiding repeat\n\n    componentWillUnmount() {\n        this.props.gruntman.halt(); // when we unmount, halt gruntman? idk what this does  \n    }\n\n    async refresh() {\n        let possiblePerspectives = await this.props.engine.db.getPerspectives(this.props.uid); // get all possible perspectives\n        let perspectiveObject = possiblePerspectives[0][this.props.id] // get the one we want based on page id \n        let taskList = await this.props.engine.perspective.calc(this.props.uid, perspectiveObject.query, perspectiveObject.avail, perspectiveObject.tord) // then get the tasks from that perspective\n\n\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) // tag nd project stuff \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n\n        projectDB.map(proj=>buildSelectString(proj));\n\n        this.setState({\n            taskList: taskList,                           // set the tasklist, \n            perspectiveName: perspectiveObject.name,     // set the perspective name \n\t    perspectiveQuery: perspectiveObject.query,  // set the perspective query \n\t    perspectiveAvail: perspectiveObject.avail, // set the perspective avail \n\t    perspectiveTord: perspectiveObject.tord,  // set the perspective tord \n            possibleProjects: pPandT[0][0],\t     // set the project stuff\n            possibleTags: pPandT[1][0],\t\t    // set the tag stuff  \n            possibleProjectsRev: pPandT[0][1],\t   // set more projects stuff  \n            possibleTagsRev: pPandT[1][1],\t  // set more tags stuff  \n            availability: avail,\t\t // set the avail\n            projectSelects: projectList,\t// set the project list  \n            tagSelects: tagsList,\t       // set the tag list\n            projectDB \t\t\t      // and the project db \n        }); // once we finish, set the state\n    }\n\n    updateName(e) {\n        if (e) { // if the name if defined, \n            this.props.gruntman.registerScheduler(() => {\n                // Register a scheduler to deal with React's onChange\n                // check out the FANCYCHANGE in task.jsx\n                this.props.gruntman.do( // call a gruntman function\n                    \"perspective.update__perspective\", { \n\t\t\t// pass it the things \n                        uid: this.props.uid, // the user id \n                        id: this.props.id,  // the perspective id \n                        payload: {name: e.target.value} // the action, setting name to the new value \n                    }\n                ).then(this.props.menuRefresh) // call the homebar refresh\n            }, `perspective.this.${this.props.id}-update`) // give it a custom id\n            this.setState({perspectiveName: e.target.value}) // set the perspectiveName\n        }\n    } \n\n\n    handleDelete() {\n        this.props.history.push(\"/upcoming\"); // go back\n        this.props.paginate(\"upcoming\"); // idk man \n        this.props.gruntman.do( // call a gruntman function\n            \"perspective.delete__perspective\", { \n                uid: this.props.uid, // pass it the user id \n                id: this.props.id, // and the current id \n            }\n        ).then(()=>{\n            this.props.menuRefresh(); // refresh menubar\n\n        }) // call the homebar refresh\n    }\n\n    componentDidMount() {\n        this.refresh()\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevProps.id !== this.props.id) { // if we updated the defer date\n            this.setState({\n                taskList: [], // what tasks should we display? \n                perspectiveName: \"\", // whats the perspective name? \n                perspectiveQuery: \"\", // whats the perspective query (whats in the text box)?\n                perspectiveAvail: {}, // whats the perspective availability? \n                perspectiveTord: {},  // whats the perspective ordering?\n                // not truth or dare. jack doent even know what that is! ^^ \n                showEdit: this.props.options === \"do\", // are we showing? on do, we are.\n                possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n                possibleTags:{}, \n                possibleProjectsRev:{}, \n                possibleTagsRev:{}, \n                availability: [], \n                projectSelects:[], \n                tagSelects: [], \n                projectDB: {}\n\n            });\n\n            this.refresh(); // switching between perspectives are a prop update and not a rerender\n        }\n        // so we want to refresh the perspective that's rendered\n        if (prevProps.id !== this.props.id && this.props.options === \"do\") // if we are trying to create\n            this.setState({showEdit: true});\n\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n\t\t{/* the perspective editor! */}\n                <PerspectiveEdit \n                    reference={this.repeater} \n                    isShown={this.state.showEdit} \n                    onDidDismiss={this.hideEdit}\n                    uid={this.props.uid} \n                    engine={this.props.engine} \n                    gruntman={this.props.gruntman}\n                    id={this.props.id}\n                    perspectiveName={this.state.perspectiveName}\n                    query={this.state.perspectiveQuery}\n                    avail={this.state.perspectiveAvail}\n                    tord={this.state.perspectiveTord}\n                    menuRefresh={this.props.menuRefresh}\n                    updateName={this.updateName}\n                    startHighlighted={this.props.options === \"do\"}\n                />\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n\t\t    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-layer-group\">\n                                    </i>\n                                    <input className=\"editable-title\" \n                                        onChange={(e)=> {e.persist(); this.updateName(e)}}\n                                        value={this.state.perspectiveName} // TODO: jack this is hecka hacky\n                                    />\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n\n                                <div className=\"greeting-container\" style={{marginLeft: 11, marginTop: 7, marginBottom: 5}}>\n                                    <a \n                                        onClick={this.showEdit} \n                                        data-tip=\"LOCALIZE: Edit\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-icon-ring)\", cursor: \"pointer\"}}>\n                                        <i className=\"fas fa-edit\" \n                                            style={{margin: 3, color: \"var(--task-icon-text)\", \n                                                fontSize: 10, \n                                                transform: \"translate(2px, -2px)\"}} \n                                        ></i>\n                                    </a>\n\n                                    <a \n                                        onClick={this.handleDelete} \n                                        data-tip=\"LOCALIZE: Delete\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-icon-ring)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className=\"fas fa-trash\"\n                                            style={{margin: 3, color: \"var(--task-icon-text)\", \n                                                fontSize: 10, transform: \"translate(2px, -2px)\"}}>\n                                        </i>\n                                    </a>\n\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\"}}>\n\n                        {this.state.taskList.map(id => (\n                            <Task \n                                tid={id}\n                                key={id+\"-\"+this.updatePrefix} \n                                uid={this.props.uid} \n                                engine={this.props.engine} \n                                gruntman={this.props.gruntman} \n                                availability={this.state.availability[id]} \n                                datapack={[\n                                    this.state.tagSelects, \n                                    this.state.projectSelects, \n                                    this.state.possibleProjects, \n                                    this.state.possibleProjectsRev, \n                                    this.state.possibleTags, \n                                    this.state.possibleTagsRev\n                                ]}\n                            />\n                        ))}\n                        <div className=\"bottom-helper\">&nbsp;</div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\nexport default withRouter(Perspectives);\n\n","import { IonModal, IonContent, IonSearchbar, IonPage, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Repeat.css';\nimport '../Perspectives.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\nconst autoBind = require('auto-bind/react');\n\n\n/* \n * perspectives are amazing \n *\n * dab on them haters \n *\n * I just said the cringiest thing ever\n *\n * oh my god huxley i swear to god \n *\n * i will rebase your commits \n *\n *\n * - @zbuster05, recorded by @enquirer\n *\n */\n\nclass PerspectiveEdit extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n            inputEvent: \"\", // define our input event for the perspective title \n\t    expanded: false,\n        }\n\n        this.name = React.createRef();\n    }\n\n    componentDidMount() {\n        if (this.props.startHighlighted) // if we are trying to create\n            this.name.current.focus(); // focus the name\n    }\n\n    handleQueryChange(e) {\n        if (e) { // if the event is defined \n            this.props.gruntman.registerScheduler(() => { \n                //Register a scheduler to deal with React's onChange\n                //check out the FANCYCHANGE in task.jsx\n                this.props.gruntman.do( // call a gruntman function\n                    \"perspective.update__perspective\", { \n                        // pass it the things \n                        uid: this.props.uid, // pass it the uid \n                        id: this.props.id,  // pass it the perspective id \n                        payload: {query: e.target.value} // pass it the action, updating the query\n                    }\n                )\n            }, `perspective.this.${this.props.id}-update`) // give it a custom id\n        } else {console.log(e)}\n    }\n\n    handleHelp() { // TODO TODO TODO: jack what do u want here? \n\twindow.open('https://condutiondocs.shabang.cf/Perspective-Menus-408aae7988a345c0912644267ccda4d2#35a4686c83eb4cc589d3570a05de6b5a')\n    }\n\n    render() {\n        return (\n            <IonModal \n                ref={this.props.reference} \n                isOpen={this.props.isShown} \n                onWillPresent={() => {this.props.gruntman.lockUpdates();}}\n                onDidDismiss={() => {\n                    this.props.gruntman.unlockUpdates(); \n                    this.props.updateName(this.state.inputEvent);\n                    if (this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5}\n                } \n                cssClass={`perspective-modal ${this.state.expanded? \"expanded\" : \"\"}`}\n            > \n\t\t<IonPage>\n\t\t    <div className=\"inner-content\">\n\n\t\t\t<div>\n\t\t\t    {/* Header */}\n\t\t\t    <div className=\"perspective-header\">\n\t\t\t\t{/* Repeat name */}\n\t\t\t\t<span style={{display: \"flex\", alignItems: \"center\", width: \"100%\", whiteSpace: \"nowrap\"}}>\n\t\t\t\t    <b className=\"bold-prefix\" >{this.props.gruntman.localizations.perspective_build_callout}</b> \n\t\t\t\t    <input className=\"editable-title pbuilder-pname\" \n\t\t\t\t\tref={this.name}\n\t\t\t\t\tdefaultValue={this.props.perspectiveName} \n\t\t\t\t\tonChange={(e)=> {e.persist(); this.props.updateName(e); this.setState({inputEvent: e})}}\n\t\t\t\t\tstyle={{minWidth: 0}}\n\t\t\t\t\tplaceholder=\"@NEEDLOC Tap to set name\"\n\t\t\t\t    />\n\n\t\t\t\t    <div className=\"repeat-task-name\">{this.state.name}</div>\n\t\t\t\t</span>\n\t\t\t\t{/* Close button */} \n\t\t\t\t<a className=\"edit-close\" onClick={this.props.onDidDismiss} \n\t\t\t\t    style={{transform: \"translate(-5px, 5px)\"}}><i className=\"fa fa-check check\"></i></a>\n\n\t\t\t    </div>\n\t\t\t    <div className=\"build-input\">\n\t\t\t\t<span className=\"bold-prefix\" style={{minWidth: \"70px\", marginTop: \"4px\"}}>Filter by</span> {/*@NEEDLOC*/}\n\t\t\t\t<input \n\t\t\t\t    className=\"build-input-edit\"\n\t\t\t\t    defaultValue={this.props.query}\n\t\t\t\t    onChange={(e)=> {e.persist(); this.handleQueryChange(e)}}\n\t\t\t\t    placeholder=\"LOCALIZE: perspective query\"\n\t\t\t\t>\n\t\t\t\t</input> \n\t\t\t\t<i \n\t\t\t\t    className=\"fas fa-plus-circle check\" \n\t\t\t\t    style={{marginTop: \"10px\", marginLeft: \"8px\"}}\n\t\t\t\t    onClick={()=>this.setState({expanded: !this.state.expanded})}\n\t\t\t\t></i>\n\t\t\t    </div>\n\n\n\t\t\t    <div className=\"perspective-basic-row\">\n\t\t\t\t<span className=\"pbasic-container\" style={{marginRight: \"25px\"}}>\n\t\t\t\t    <span>\n\t\t\t\t\t<i className=\"repeat-label fas fa-exchange-alt\"></i>\n\t\t\t\t\t<span className=\"perspective-label\">{this.props.gruntman.localizations.perspective_include}</span>\n\t\t\t\t    </span>\n\n\t\t\t\t    <IonSelect \n\t\t\t\t\tclassName=\"perspective-select\" \n\t\t\t\t\tinterface=\"popover\" \n\t\t\t\t\tvalue={this.props.avail} // TODO: make a database hit \n\t\t\t\t\tmode=\"ios\"\n\t\t\t\t\tonIonChange={e=>{\n\t\t\t\t\t    this.props.gruntman.do( // call a gruntman function\n\t\t\t\t\t\t\"perspective.update__perspective\", { \n\t\t\t\t\t\t    uid: this.props.uid, // pass it the user id \n\t\t\t\t\t\t    id: this.props.id,  // pass it the perspective id\n\t\t\t\t\t\t    payload: {avail: e.detail.value} // set the availability \n\t\t\t\t\t\t}\n\t\t\t\t\t    )\n\t\t\t\t\t}}\n\t\t\t\t    >\n\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"remain\">{this.props.gruntman.localizations.psp_rem}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"avail\">{this.props.gruntman.localizations.psp_avil}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"flagged\">{this.props.gruntman.localizations.psp_flg}</IonSelectOption>\n\t\t\t\t    </IonSelect>\n\t\t\t\t</span>\n\n\t\t\t\t<span className=\"pbasic-container\">\n\t\t\t\t    <span>\n\t\t\t\t\t<i className=\"repeat-label fas fa-sort-amount-down-alt\"></i>\n\t\t\t\t\t<span className=\"perspective-label\">{this.props.gruntman.localizations.perspective_order}</span>\n\t\t\t\t    </span>\n\n\t\t\t\t    <IonSelect \n\t\t\t\t\tclassName=\"perspective-select\" \n\t\t\t\t\tinterface=\"popover\" \n\t\t\t\t\tvalue={this.props.tord} \n\t\t\t\t\tmode=\"ios\" \n\t\t\t\t\tonIonChange={e=>{\n\t\t\t\t\t    this.props.gruntman.do( // call a gruntman function\n\t\t\t\t\t\t\"perspective.update__perspective\", { \n\t\t\t\t\t\t    uid: this.props.uid, // pass it the things, you know the drill \n\t\t\t\t\t\t    id: this.props.id, \n\t\t\t\t\t\t    payload: {tord: e.detail.value}\n\t\t\t\t\t\t}\n\t\t\t\t\t    )\n\t\t\t\t\t}}\n\t\t\t\t    >\n\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"duas\">{this.props.gruntman.localizations.psp_abd}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"duds\">{this.props.gruntman.localizations.psp_dbd}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"deas\">{this.props.gruntman.localizations.psp_abe}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"deds\">{this.props.gruntman.localizations.psp_dbe}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"alph\">{this.props.gruntman.localizations.psp_alpha}</IonSelectOption>\n\t\t\t\t    </IonSelect>\n\t\t\t\t    <div className=\"help-icon\" onClick={this.handleHelp}>\n\t\t\t\t\t<i \n\t\t\t\t\t    className=\"far fa-question-circle\" \n\t\t\t\t\t></i>\n\t\t\t\t    </div>\n\t\t\t\t</span>\n\t\t\t    </div> \n\t\t\t</div>\n\t\t\t<div className=\"dropdown\">>>\n\t\t\t    <div className='modal-content-wrapper'>\n\t\t\t\t<IonSearchbar \n\t\t\t\t    autoFocus={true} // more wishful thinking?\n\t\t\t\t    animated={true} // idk what this does\n\t\t\t\t    spellcheck={true} // spellcheck\n\t\t\t\t    className='search-bar'\n\t\t\t\t    // if we are on the first item and with no query, then add a 'Previous' to the end\n\t\t\t\t    //placeholder={`Let's go to..${(this.state.selected == 0 && this.state.query == '')?\"   |   Previous\" : \"\"}`} // TODO: jack do you like this? \n\t\t\t\t    // when we change, set the query, then set the selected to the first item \n\t\t\t\t    //onIonChange={e => this.setState({query: e.detail.value, selected: 0})}\n\t\t\t\t    debounce={0} // update for every update\n\t\t\t\t    //onKeyDown={this.handleKeydown} // call our gross function \n\n\t\t\t\t////////\n\t\t\t\t// loop through our filtered items, highlight if the index is right\n\t\t\t\t// onclick nav there, on hover set the index and the styling\n\t\t\t\t////////\n\n\t\t\t\t/>\n\t\t\t\t<div className='option-wrapper'> \n\t\t\t\t    {/*this.filterItems(this.state.query).map((item, i) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t    <div \n\t\t\t\t\t\tclassName=\"option-line\"\n\t\t\t\t\t\tclassName= {`option-line ${(this.state.selected == i)? 'option-text-hover' : ''}`}\n\t\t\t\t\t\tref={(this.state.selected == i)? this.currentlySelected : null}\n\t\t\t\t\t\tonMouseEnter={() => {\n\t\t\t\t\t\t    this.setState({selected: i}); \n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={()=>{\n\t\t\t\t\t\t    this.props.history.push(`/${item[1]}/${item[2]}`) // push to the history\n\t\t\t\t\t\t    this.props.paginate(...item.slice(1)); // paginate-ify it!\n\t\t\t\t\t\t    this.props.dismiss()\n\t\t\t\t\t\t}}\n\n\t\t\t\t\t    >\n\t\t\t\t\t\t<i className={`${item[3]} option-icon`} style={{\n\t\t\t\t\t\t}}></i>\n\t\t\t\t\t\t<p \n\t\t\t\t\t\t    className= {`option-text`}\n\t\t\t\t\t\t>{item[0]}</p>\n\t\t\t\t\t    </div>\n\t\t\t\t\t    )\n\n\t\t\t\t\t}\n\t\t\t\t    )*/}\n\n\t\t\t\t</div> \n\t\t\t    </div>\n\t\t\t</div>\n\t\t    </div>\n\t\t</IonPage>\n            </IonModal>\n        )\n    }\n\n\n}\n\nexport default PerspectiveEdit;\n\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, IonBadge, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Projects.css';\nimport './Pages.css';\n\nimport ReactTooltip from 'react-tooltip';\n\nimport Task from './Components/Task';\n\nimport { withRouter } from \"react-router\";\n\nimport { SortableProjectList } from './Components/Sortable';\n\nconst autoBind = require('auto-bind/react'); // autobind things! \n\nclass Projects extends Component { // define the component\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: '', // project name\n            possibleProjects:{}, // what are the possible projects? \n            possibleTags:{},  // what are the possible tags?\n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [],  // whats available\n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            parent: \"\",\n            is_sequential: false,\n            currentProject: {children:[]},\n            activeTask: \"\"\n        };\n\n        this.updatePrefix = this.random();\n\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n\n        this.activeTask = React.createRef();\n\n        this.name = React.createRef();\n\n        autoBind(this);\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevProps.id !== this.props.id) // if we updated the defer date\n            this.refresh(); // switching between perspectives are a prop update and not a rerender\n\n        if (prevProps.id !== this.props.id && this.props.options === \"do\") // if we are trying to create\n            this.name.current.focus(); // focus the name\n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n        this.updatePrefix = this.random();\n        let cProject = (await views.props.engine.db.getProjectStructure(this.props.uid, this.props.id, false));\n        this.setState({name:pPandT[0][0][this.props.id], possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB, currentProject: cProject, is_sequential: cProject.is_sequential, parent: cProject.parentProj});\n    }\n\n    componentDidMount() {\n        this.refresh();\n        if (this.props.options === \"do\") // if we are trying to create\n            this.name.current.focus(); // focus the name\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    updateName(e) {\n        if (e) {\n            this.props.gruntman.registerScheduler(() => { \n                // Register a scheduler to deal with React's onChange\n                // check out the FANCYCHANGE in task.jsx\n                this.props.gruntman.do( // call a gruntman function\n                    \"project.update__name\", { \n                        uid: this.props.uid, // pass it the things vvv\n                        id: this.props.id, \n                        name: e.target.value\n                    }\n                ).then(this.props.menuRefresh) // call the homebar refresh\n            }, `project.this.${this.props.id}-update`) // give it a custom id\n            this.setState({name: e.target.value})\n        } else { console.log(e)}\n    } \n\n    render() {\n        return (\n            <IonPage>\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n                    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    {(()=> {\n                                        if (this.state.parent !== \"\")\n                                            return <a className=\"fas fa-chevron-left backbutton\" onClick={()=>{this.props.paginate(\"projects\", this.state.parent);this.props.history.push(`/projects/${this.state.parent}`)}} />\n                                    })()}\n                                    <i style={{paddingRight: 4}} \n                                        className=\"fas fa-tasks\">\n                                    </i>\n                                    <input className=\"editable-title\" \n                                        onChange={(e)=> {e.persist(); this.updateName(e)}}\n                                        value={this.state.name} // TODO: jack this is hecka hacky\n                                        style={{transform: \"transformY(-2px)\"}}\n                                        ref={this.name}\n                                    />\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n                                <div className=\"greeting-container\" style={{marginLeft: 5, marginTop: 7, marginBottom: 5}}>\n                                    <a \n                                        onClick={()=> {\n                                            this.setState({is_sequential: !this.state.currentProject.is_sequential}, () => {\n                                                this.props.gruntman.do( // call a gruntman function\n                                                    \"project.update__pstate\", { \n                                                        uid: this.props.uid, // pass it the things vvv\n                                                        id: this.props.id, \n                                                        is_sequential: this.state.is_sequential\n                                                    }\n                                                );\n                                            }); // change the icon\n                                        }} \n                                        data-tip=\"LOCALIZE: Sequencial/Paralellel\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-icon-ring)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className={this.state.is_sequential ? \"fas fa-arrows-alt-v\":\"fas fa-arrows-alt-h\"}\n                                            style={{margin: 3, color: \"var(--task-icon-text)\", \n                                                fontSize: 13, transform: this.state.is_sequential ? \"translate(3.5px, -1px)\" : \"translate(0.25px, -1px)\"}}>\n                                        </i>\n                                    </a>\n                                    <a \n                                        data-tip=\"LOCALIZE: Delete\"\n                                        className=\"perspective-icon\" \n                                        onClick={()=>{\n                                            this.props.gruntman.do( // call a gruntman function\n                                                \"project.delete\", { \n                                                    uid: this.props.uid, // pass it the things vvv\n                                                    pid: this.props.id, \n                                                    parent: (this.state.parent === \"\" || this.state.parent === undefined) ? undefined : this.state.parent\n                                                }\n                                            ).then(()=>{\n                                                this.props.menuRefresh(); // refresh menubar\n                                                this.props.history.push((this.state.parent === \"\" || this.state.parent === undefined) ? \"/upcoming/\" : `/projects/${this.state.parent}`); // go back\n                                                this.props.paginate((this.state.parent === \"\" || this.state.parent === undefined) ? \"upcoming\" : `projects`, (this.state.parent === \"\" || this.state.parent === undefined) ? undefined : this.state.parent);\n                                            }) // call the homebar refresh\n                                        }}\n                                        style={{borderColor: \"var(--task-icon-ring)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className=\"fas fa-trash\"\n                                            style={{margin: 3, color: \"var(--task-icon-text)\", \n                                                fontSize: 10, transform: \"translate(2px, -2px)\"}}\n                                        >\n                                        </i>\n                                    </a>\n\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\", overflowX: \"hidden\"}}>\n\n                        <SortableProjectList list={this.state.currentProject.children} prefix={this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]} possibleProjects={this.state.possibleProjects} history={this.props.history} paginate={this.props.paginate} activeTaskRef={this.activeTask} activeTaskID={this.state.activeTask}/>\n\n                        <div style={{marginTop: 10}}>\n                            <a className=\"newbutton\" onClick={()=>{\n                                this.props.gruntman.do( // call a gruntman function\n                                    \"task.create\", { \n                                        uid: this.props.uid, // pass it the things vvv\n                                        pid: this.props.id, \n                                    },\n                                    true // bypass updates to manually do it + make it quicker\n                                ).then((result)=>{\n                                    let cProject = this.state.currentProject; // get current project\n                                    let avail = this.state.availability; // get current availibilty\n                                    avail[result.tid] = true; // set the current one to be available, temporarily so that people could write in it\n                                    cProject.children.push({type: \"task\", content:result.tid}); // add our new task\n                                    this.setState({activeTask:result.tid, currentProject: cProject, availability: avail}, () =>  this.activeTask.current._explode() ) // wosh!\n                                }) // call the homebar refresh\n                            }}><div><i className=\"fas fa-plus-circle subproject-icon\"/><div style={{display: \"inline-block\", fontWeight: 500}}>{this.props.localizations.nb_at}</div></div></a>\n                            <a className=\"newbutton\" onClick={async function() {\n                                let npid = (await this.props.gruntman.do( // call a gruntman function\n                                    \"project.create\", { \n                                        uid: this.props.uid, // pass it the things vvv\n                                        parent: this.props.id, \n                                    },\n                                )).pid;\n                                this.props.history.push(`/projects/${npid}/do`);\n                            }.bind(this)}><div><i className=\"fas fa-plus-circle subproject-icon\"/><div style={{display: \"inline-block\", fontWeight: 500}}>{this.props.localizations.nb_ap}</div></div></a>\n                            <div className=\"bottom-helper\">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n\n            </IonPage>\n        )\n    }\n}\n\nexport default withRouter(Projects);\n\n","//import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport React, { useState } from 'react';\nimport './FloatingActionButton.css';\nimport * as chrono from 'chrono-node';\nimport {useSpring, animated} from 'react-spring'\n\n\n/*\n * Hello human,\n * You know I'm not Jack because my pen has no nib\n * You know I'm not Huxley because I can't adlib\n * If I said I could do frqnt end, I'd be telling a fib\n * And now, as punishment, I've lost a rib\n * But alas, here is abtib ^-^\n *\n * ~~@Exr0n~~\n * @Ex-rib\n *\n */\n\n\nfunction handleABTIBInput(value) {\n    console.log('abtib reportin to handle input ^-^');\n    console.log(value);\n    // TODO: nlp it\n    // TODO: create the task\n}\n\nfunction ABTIB(props) {\n    const defaultValue = props.localizations.qa_content;\n    const [isExpanded, setisExpanded] = useState(false);\n    const [isSaving, setisSaving] = useState(false);\n\n    const anim = useSpring({\n\tto: \n\t    (isSaving ? \n\t\t{\n\t\t    width: 280, \n\t\t    color:\"var(--quickadd-successtext)\", \n\t\t    backgroundColor: \"var(--quickadd-success)\"\n\t\t} \n\n\t\t: \n\n\t\t{\n\t\t    width: isExpanded ? 280:250, \n\t\t    color:\"var(--quickadd-text)\", \n\t\t    //color:\"var(--quickadd-successtext)\", \n\t\t    backgroundColor: \"var(--quickadd)\",\n\t\t    //backgroundColor: \"var(--quickadd-success)\"\n\t\t}\n\t    )\n    })\n\n    return <animated.input \n\t\tid=\"abtib\" \n\t\treadOnly={false} \n\t\ttype=\"text\" \n\t\tdefaultValue={\"\"} \n\t\tstyle={anim} \n\t\tclassName=\"attib\"\n\t\tref={props.reference}\n\n        onFocus={\n            (event) => {\n                event.target.value = \"\";\n                setisExpanded(true);\n            }\n        }\n        onBlur={e=>{\n            setisExpanded(false);\n            setisSaving(false);\n            e.target.value = \"\";\n        }}\n        onKeyUp={\n            (event) => {\n                if (event.key === 'Enter') {\n                    event.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                    setisSaving(true);\n                    let taskName = event.target.value;\n                    let dateInfo = chrono.parse(taskName);\n                    let due = undefined;\n                    let defer = undefined;\n                    if (dateInfo.length > 0) {\n                        // we got a date!\n                        if (dateInfo[0].end) {\n                            // both start (defer) and end (due)\n                            // get end (due) date\n                            due = dateInfo[0].end.date();\n                            defer = dateInfo[0].start.date();\n                            // strip the due date string\n                            taskName = taskName.replace(dateInfo[0].text, \"\").trim();\n\n                        }\n                        else {\n                            // only start (due)\n                            due = dateInfo[0].start.date();\n                            // strip the due date string\n                            taskName = taskName.replace(dateInfo[0].text, \"\").trim();\n                        }\n                    }\n                    let npobj = { \n                            uid: props.uid, // pass it the things vvv\n                            pid: \"\",\n                            due,\n                            defer,\n                            name: taskName\n                    };\n                    props.gruntman.do( // call a gruntman function\n                        \"task.create\", npobj,\n                    ).then(()=>{\n                        event.target.blur();\n                    });\n                }\n            }\n        }\n        placeholder={ defaultValue + ((Math.random()*128 < 1) ? \" ^-^\" : \"\")}\n     />;\n}\n\nexport default ABTIB;\n\n","import React, { Component } from 'react';\nimport Mousetrap from 'mousetrap';\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\nimport { withRouter } from \"react-router\";\nimport { IonModal, IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonSearchbar, IonFooter } from '@ionic/react';\nimport './QuickSwitcher.css'\nimport '../Pages.css';\n\nconst autoBind = require('auto-bind/react');\n\n\n/*\n * I am the quick switcher.\n *\n * With me you switch quickly!\n *\n * but be warned:\n *\n * The code upon which I am built\n *\n * Often sends those who see it\n *\n * Into horror.\n *\n *\n * @enquirer\n */\n\n\n// TODO: subprojects and icon \n\n\nclass QuickSwitcher extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n\t    items: [], // processed items I get passed\n\t    filteredList: [], // my items filtered base upon query \n\t    query: '', // my query! \n\t    direction: true, // should I go back in history, or forward? (for back toggle)\n\t    selected: 0, // what is my selected item index?\n\t    prop_store: '', // store my props so we can check if they have changed \n\t    projs: [],\n\t}\n\tthis.searcher = React.createRef(); // searchbar input ref \n\tthis.currentlySelected = React.createRef(); // selected item ref \n    }\n\n    componentDidUpdate() {\n\tif (this.state.prop_store != this.props) { // if the props have changed, \n\t    this.processItems() // process the items \n\t}\n    }\n\n    componentDidMount() {\n\tthis.processItems() // when we mount, process the items.\n\tthis.setState({prop_store: this.props}) // set the prop store and the items \n\tthis.getProjs() // get our sub projects \n    }\n\n    async getProjs() { // get our projects \n\tconst subs = (await this.props.engine.db.getProjectsandTags(this.props.uid))[0][0] // hit the cache \n\tconst mod = Object.entries(subs).map(([key, value]) => { // process it \n\t    return ['.' + value, 'projects', key, 'fas fa-tasks']\n\t});\n\tthis.setState({projs: mod}) // and set our state \n    }\n\n    focusRef() { // focus the ref!\n\tif (this.searcher.current) // if the ref exists,\n            this.searcher.current.setFocus(); // focus it \n\tthis.setState({query: '', selected: 0}) // and reset the query \n\tthis.getProjs() // and get our projects\n    }\n\n\n    filterItems(searchTerm) { // filter the items!\n\tlet filteredItems = this.state.items.filter(item => {\n\t    return item[0].toLowerCase().indexOf(searchTerm.toLowerCase()) > -1;\n\t});\n\treturn filteredItems\n    }\n\n    processItems() { // process our items!\n\t// name, url prefix, id, icon classname \n\tthis.setState({items: \n\t    [\n\t\t[':upcoming', 'upcoming', '', 'fas fa-chevron-circle-right'], // set the first item to upcoming \n\t\t// (i could do + but i think thats less efficent \n\t\t[':completed', 'completed', '', 'fas fa-check-circle'], // set the second item to completed\n\t\t[':calendar', 'calendar', '', 'fas fa-calendar-alt'], // set the third item to calendar\n\t\t...this.props.items[0].map(o => ['!'+o.name, 'perspectives', o.id, 'fas fa-layer-group']), // map the perspectives\n\t\t...this.state.projs // the projects! \n\t    ],\n\t    prop_store: this.props //  and update the props \n\t})\n    }\n\n    handleKeydown(e) { // handle the keydown... avert your eyes\n\tconst keyname = e.key; // store the keyname\n\tif (keyname == \"Enter\") { // if we submit, \n\t    let selectedItem = this.filterItems(this.state.query)[this.state.selected] // store the selected item\n\t    // TODO: jack make the sidebar styling work \n\t    // if we are selectiong the first item and we have no query, \n\t    if ((!selectedItem || !this.state.query) && this.state.selected == 0) {  \n\t\tif (this.state.direction && this.props.history.length > 2) { // check our direction, \n\t\t    this.props.history.goBack() // then navigate back accordingly. \n\t\t} \n\t\telse if (this.props.history.length > 2) { this.props.history.goForward() }\n\t\tthis.setState({direction: !this.state.direction}) // and flip the direction \n\n\t    } else {\n\t\tconst slicedSelectedItem = selectedItem.slice(1) // store the sliced item!\n\t\tthis.props.history.push(`/${selectedItem[1]}/${selectedItem[2]}`) // push to the history\n\t\tthis.props.paginate(...slicedSelectedItem); // paginate-ify it!\n\t\tthis.props.updateIdx(slicedSelectedItem) // make our homebar keybinds work by giving it the index\n\t    }\n\t    this.props.dismiss() // dismiss the modal\n\t} else { // if we havent pressed submit, \n\t    const idx = this.state.selected // store the index \n\t    const len = this.filterItems(this.state.query).length-1 // and the filtered items cus react lifecyle bd \n\t    if (keyname == \"ArrowUp\" || (e.ctrlKey && keyname == \"p\")) { // if we are navigating up, \n\t\tif (idx > 0) { // and we selecting something greater than the first element, \n\t\t    this.setState({selected: idx-1}) // subtract from our index \n\t\t} else { this.setState({selected: len})} // if we are selection the first element, wrap to the last\n\t\tif (this.currentlySelected) {this.currentlySelected.current.scrollIntoView({ // and scroll it into view \n\t\t    behavior: \"smooth\", // make it smooooth \n\t\t    block: \"end\" // make it not get covered by the searchbar \n\t\t})}\n\t    } else if (keyname == \"ArrowDown\" || (e.ctrlKey && keyname == \"n\")) { // if we are scrolling down, \n\t\tif (idx == len) { // handle wrapping \n\t\t    this.setState({selected: 0})\n\t\t} else { this.setState({selected: idx+1}) } \n\t\tif (this.currentlySelected) {this.currentlySelected.current.scrollIntoView({\n\t\t    behavior: \"smooth\", // smooooooooooth\n\t\t    block: \"start\", // make it work better. their might be a better option for this \n\t\t})}\n\t\t// TODO: try this: https://stackoverflow.com/questions/56688002/javascript-scrollintoview-only-in-immediate-parent/56688719 (check last answer)\n\t    }\n\t}\n    }\n\n\n    render() { \n\treturn (\n\t    <IonModal \n\t\tisOpen={this.props.qs_show}  // are we open? \n\t\tanimated={false} // don't animate the opening. \n\t\tcssClass='qs_modal' // give it a class! \n\t\tautoFocus={true} // this doesnt do anything, but like, wishful thinking? \n\t\tonDidPresent={this.focusRef} // focus our input when we present the modal, and some other stuff\n\t\tonDidDismiss={this.props.dismiss} // set the state toggle when we dismiss the modal\n\t    >\n\t\t<div className='modal-content-wrapper'>\n\t\t    <IonSearchbar \n\t\t\tautoFocus={true} // more wishful thinking?\n\t\t\tref={this.searcher} // give it a ref!\n\t\t\tanimated={true} // idk what this does\n\t\t\tspellcheck={true} // spellcheck\n\t\t\tclassName='search-bar'\n\t\t\t// if we are on the first item and with no query, then add a 'Previous' to the end\n\t\t\tplaceholder={`Let's go to..${(this.state.selected == 0 && this.state.query == '')?\"   |   Previous\" : \"\"}`} // TODO: jack do you like this? \n\t\t\t// when we change, set the query, then set the selected to the first item \n\t\t\tonIonChange={e => this.setState({query: e.detail.value, selected: 0})}\n\t\t\tdebounce={0} // update for every update\n\t\t\tonKeyDown={this.handleKeydown} // call our gross function \n\n\t\t    ////////\n\t\t    // loop through our filtered items, highlight if the index is right\n\t\t    // onclick nav there, on hover set the index and the styling\n\t\t    ////////\n\n\t\t    />\n\t\t    <div className='option-wrapper'> \n\t\t\t{this.filterItems(this.state.query).map((item, i) => {\n\t\t\t    return (\n\t\t\t\t<div \n\t\t\t\t    className=\"option-line\"\n\t\t\t\t    className= {`option-line ${(this.state.selected == i)? 'option-text-hover' : ''}`}\n\t\t\t\t    ref={(this.state.selected == i)? this.currentlySelected : null}\n\t\t\t\t    onMouseEnter={() => {\n\t\t\t\t\tthis.setState({selected: i}); \n\t\t\t\t    }}\n\t\t\t\t    onClick={()=>{\n\t\t\t\t\tthis.props.history.push(`/${item[1]}/${item[2]}`) // push to the history\n\t\t\t\t\tthis.props.paginate(...item.slice(1)); // paginate-ify it!\n\t\t\t\t\tthis.props.dismiss()\n\t\t\t\t    }}\n\n\t\t\t\t>\n\t\t\t\t    <i className={`${item[3]} option-icon`} style={{\n\t\t\t\t    }}></i>\n\t\t\t\t    <p \n\t\t\t\t\tclassName= {`option-text`}\n\t\t\t\t    >{item[0]}</p>\n\t\t\t\t</div>\n\t\t\t\t)\n\n\t\t\t    }\n\t\t\t)}\n\n\t\t    </div> \n\t\t</div>\n\n\t    </IonModal>\n\t) \n    }\n\n}\n\nexport default withRouter(QuickSwitcher);\n\n\n\n","import React, { Component } from 'react';\nimport Mousetrap from 'mousetrap';\nimport bindGlobal from 'mousetrap-global-bind';\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\nimport { withRouter } from \"react-router\";\nimport QuickSwitcher from './QuickSwitcher'\n\nconst autoBind = require('auto-bind/react');\n\n\nclass Keybinds extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n\t    sidebar_list: [], // what's in the sidebar? \n\t    sidebar_index: 0, // how far down the sidebar are we? \n\t    prop_store: '', // store props so we can check if they have changed \n\t    qs_show: false // is the quick switcher shown? \n\t}\n    }\n\n    // define the bindings! 2d array of keybind and function \n    // TODO TODO: for some reason binding works now, so replace that later? \n    // TODO: expand these keybinds. ie, n/p and up/down arrows\n    bindings = [\n\t[\"alt+1\", ()=>{this.sidebar_switcher(this, 0)}], // nav to upcoming keybind\n\t[\"alt+2\", ()=>{this.sidebar_switcher(this, 1)}], // nav to completed keybind\n\t[\"alt+3\", ()=>{this.sidebar_switcher(this, 2)}], // nav to item 3 keybind\n\t[\"alt+4\", ()=>{this.sidebar_switcher(this, 3)}], // nav to item 4 keybind\n\t[\"alt+5\", ()=>{this.sidebar_switcher(this, 4)}], // nav to item 5 keybind\n\t[\"alt+6\", ()=>{this.sidebar_switcher(this, 5)}], // nav to item 6 keybind\n\t[\"alt+7\", ()=>{this.sidebar_switcher(this, 6)}], // nav to item 7 keybind\n\t[\"alt+8\", ()=>{this.sidebar_switcher(this, 7)}], // nav to item 8 keybind\n\t[\"alt+9\", ()=>{this.sidebar_switcher(this, 8)}], // nav to item 9 keybind\n\t[\"alt+0\", ()=>{this.sidebar_switcher(this, this.state.sidebar_list.length-1)}], // nav to last item keybind\n\t[\"alt+j\", ()=>{this.sidebar_incrimentor(this, 1)}], // nav down keybind \n\t[\"alt+k\", ()=>{this.sidebar_incrimentor(this, -1)}], // nav up keybind \n    [\"mod+enter\", ()=>{this.focusElement(this.props.abtib)}], // focus the FAB\n    ]\n\n    globalBindings = [\n    [\"mod+k\", ()=>{this.manageQs(this)}], // toggle quick swithcher keybind \n    ]\n    \n    //TODO: this doesnt work with clicking or like anything else but eh\n\n    sidebar_switcher(that, num){\n\tconst loca = this.state.sidebar_list[num]; // set our location to index in sidebar\n\tthat.props.history.push(`/${loca[0]}/${loca[1]}`) // push to the history\n\tthat.props.paginate(...loca); // paginate-ify it!\n\tthis.setState({sidebar_index: num}) // update the sidebar index \n    }\n\n    sidebar_incrimentor(that, num) {\n\tconst next_loca = this.state.sidebar_list[this.state.sidebar_index+num] // store the variable -- we can delet this. \n\tif (next_loca) { // if its defined, \n\t    this.sidebar_switcher(that, this.state.sidebar_index+num) // go there\n\t    // if it's not defined and it's at the end, \n\t} else if (this.state.sidebar_index == this.state.sidebar_list.length-1) {\n\t    this.sidebar_switcher(that, 0) // wrap around and go back to the beginning \n\t} else { // if it's not defined and not at the end, then it must be at the beginning,\n\t    this.sidebar_switcher(that, this.state.sidebar_list.length-1) // so go to the end \n\t}\n    }\n\n    setSidebarIndex(item) { // manage the quickswitcher sidebar index changing \n\tlet idx\n\tthis.state.sidebar_list.forEach((sidebarItem, i) => { // get passed an item, find the item \n\t    if (this.arraysAreIdentical(sidebarItem, item)) {\n\t\tidx = i\n\t    }\n\t})\n\tthis.setState({sidebar_index: idx})\n    }\n\n    arraysAreIdentical(arr1, arr2){ // helper function cus js bad \n\tfor (let i = 0, len = arr1.length; i < len; i++){\n\t    if (arr1[i] !== arr2[i]){\n\t\treturn false;\n\t    }\n\t}\n\treturn true; \n    }\n\n\n    manageQs(that) {\n\tthis.setState({qs_show: !this.state.qs_show}); \n    }\n\n    focusElement(ref) { // another helper function \n\tif (ref) {\n\t    ref.current.focus()\n\t}\n    }\n\n    componentDidUpdate(){\n\t//TODO: safe-proof(?) this\n\t// update the props\n\tif (this.state.prop_store != this.props) { // if the props have changed, \n\t    this.setState({\n\t\tsidebar_list: [\n\t\t    ['upcoming', ''], // set the first item to upcoming \n\t\t    // (i could do + but i think thats less efficent \n\t\t    ['completed', ''], // set the second item to completed\n\t\t    ['calendar', ''], // set the third item to calendar\n\t\t    ...this.props.perspectives.map(o => ['perspectives', o.id]), // map the perspectives\n\t\t    ...this.props.projects.map(o => ['projects', o.id]) // and the projects \n\t\t], \n\t\tprop_store: this.props //  and update the props \n\t    })\n\t}\n\n\t// TODO: get the current url and set the index that way \n\t//if (!this.state.sidebar_index) {\n\t//    this.setState({sidebar_index: side\n\n\t//}\n    }\n\n    // loop through and bind all our things!\n    componentDidMount() {\n\tthis.setState({prop_store: this.props})\n\n        this.bindings.map(combo => {\n\t\tMousetrap.bind(...combo)\n        })\n\n\tthis.globalBindings.map(combo => {\n\t\tMousetrap.bindGlobal(...combo)\n\t})\n    }\n\n    // loop through and unbind all our things!\n    componentWillUnmount() { \n        this.bindings.map(combo => {\n            Mousetrap.unbind(...combo)\n        })\n    }\n\n    render() { \n\treturn (\n\t    <QuickSwitcher \n\t\tqs_show={this.state.qs_show} \n\t\tdismiss={()=> this.setState({qs_show: false})}\n\t\titems={[this.props.perspectives]}\n\t\tpaginate={this.props.paginate}\n\t\tupdateIdx={this.setSidebarIndex}\n\t\tengine={this.props.engine} \n\t\tuid={this.props.uid} \n\t\tgruntman={this.props.gruntman} \n\n\n\t    /> \n\t)\n    }\n\n}\n\nexport default withRouter(Keybinds);\n\n\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t524,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t525,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t526,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t527,\n\t\t18\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t528,\n\t\t19\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t529,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t530,\n\t\t20\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t531,\n\t\t21\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t532,\n\t\t22\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t533,\n\t\t23\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t534,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t535,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t536,\n\t\t24\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t537,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t538,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t539,\n\t\t25\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t540,\n\t\t26\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t541,\n\t\t27\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t542,\n\t\t28\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t543,\n\t\t29\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t544,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t545,\n\t\t15\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t546,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t547,\n\t\t30\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t548,\n\t\t31\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t549,\n\t\t32\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t550,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t551,\n\t\t17\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t552,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t553,\n\t\t33\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t554,\n\t\t34\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t555,\n\t\t35\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t556,\n\t\t36\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t557,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t558,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t559,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t560,\n\t\t37\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t561,\n\t\t16\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t562,\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t563,\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t564,\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t565,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t566,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 260;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t570,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 262;\nmodule.exports = webpackAsyncContext;","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Repeat.css';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the repeat UI\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\nconst autoBind = require('auto-bind/react');\n\nclass Repeat extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n            name: \"\", // task's name\n            rule: \"none\", // the repeat rule\n            advanced: false, // advanced or not\n            on: undefined, // advanced repeat rules\n        }\n    }\n\n    async loadTask() {\n        let taskInfo = await this.props.engine.db.getTaskInformation(this.props.uid, this.props.tid);\n        this.setState({\n            name: taskInfo.name, // name is name\n            rule: taskInfo.repeat ? taskInfo.repeat.rule : \"none\", // rule is rule, if there's a rule\n            advanced: taskInfo.repeat ? (taskInfo.repeat.on !== undefined) : false, // on is on, if there's a rule\n            on: taskInfo.repeat ? taskInfo.repeat.on : undefined, // on is on, if there's a rule\n        });\n    }\n\n    componentDidMount() {\n        this.loadTask();\n    }\n\n    render() {\n        return (\n            <IonModal ref={this.props.reference} isOpen={this.props.isShown} onDidDismiss={() => {if(this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5}} cssClass={\"task-repeat \"+(()=>{\n                // Different repeat modes require different height modals\n                 switch (this.state.rule) {\n                      case \"none\":\n                          return \"task-repeat__default\";\n                      case \"daily\":\n                          return \"task-repeat__default\";\n                      case \"weekly\":\n                          return (this.state.advanced ? \"task-repeat__advanced-weekly\" : \"task-repeat__default\");\n                      case \"monthly\":\n                          return (this.state.advanced ? \"task-repeat__advanced-monthly\" : \"task-repeat__default\");\n                      case \"yearly\":\n                          return \"task-repeat__default\";\n                  }\n            })()}>\n                <div>\n                    {/* Header */}\n                    <div className=\"repeat-header\">\n                        {/* Repeat name */}\n                        <span style={{display: \"flex\", alignItems: \"center\", width: \"100%\"}}>\n\t\t\t                <b className=\"bold-prefix\" >{this.props.gruntman.localizations.repeat_word}</b> \n\t\t\t                <div className=\"repeat-task-name\">{this.state.name}</div>\n\t\t\t            </span>\n                        {/* Close button */}\n                        <a className=\"repeat-close\" onClick={this.props.onDidDismiss}><i className=\"fa fa-times\"></i></a>\n                    </div>\n                    <div>\n                        <div className=\"repeat-basic-row\">\n                            <div className=\"repeat-rule-selector\">\n                            <span>\n                                <i className=\"repeat-label fa fa-redo\"></i>\n                                <span className=\"repeat-label\">{this.props.gruntman.localizations.repeat_word}</span>\n                            </span>\n                            {/* The big select, force iOS style */}\n                            <IonSelect className=\"repeat-select\" interface=\"popover\" value={this.state.rule} mode=\"ios\" onIonChange={e=>{\n                                    // Set the repeat\n                                    this.props.gruntman.do(\n                                        \"task.update\", \n                                        { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: e.detail.value}}}\n                                    )\n\n                                    // Set the state too!\n                                    this.setState({rule: e.detail.value, advanced: false, on: undefined});\n \n                                }}>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"none\">@NEEDLOC None</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"daily\">{this.props.gruntman.localizations.repeat_every_day}</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"weekly\">{this.props.gruntman.localizations.repeat_every_week}</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"monthly\">{this.props.gruntman.localizations.repeat_every_month}</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"yearly\">{this.props.gruntman.localizations.repeat_every_year}</IonSelectOption>\n                            </IonSelect>\n                            </div>\n                                {\n                                    \n                                <a style={{color: \"var(--decorative-light-alt)\", float: \"right\", cursor: \"pointer\", display: [\"weekly\", \"monthly\"].includes(this.state.rule) ? \"inline\" : \"none\" }} className={\"fas \" + (this.state.advanced ? \"fa-caret-down\":\"fa-caret-up\")} onClick={()=> {\n                                    if (this.state.advanced) {\n                                        this.props.gruntman.do(\n                                            \"task.update\", \n                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule}}}\n                                        ) // undo advanced \n                                        this.setState({rule: this.state.rule, advanced: false, on: undefined}); // set the state too!\n                                    } else {\n                                        this.props.gruntman.do(\n                                            \"task.update\", \n                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: []}}}\n                                        ) // do advanced \n                                        this.setState({rule: this.state.rule, advanced: true, on: []}); // set the state too!\n                                    }\n                                }}></a>\n                                }\n                        </div>\n                    </div>\n                    <div style={{margin: \"10px 20px\", color: \"var(--content-normal-alt)\"}}>\n                        {(()=>{\n                            if (this.state.advanced)\n                                switch (this.state.rule) {\n                                    case \"weekly\":\n                                        return (\n                                            <div className=\"repeat-weekgrid\">\n                                                {/* DONT LOCALIZE THESE VALUES. THEY WILL CAUSE PROBLEMS. ON LOCALIZATION, MAKE THESE ARRAYS */}\n                                                {/* [\"originalString\", \"localizedString\"] <= localize in this way */}\n                                                {[[\"M\", this.props.gruntman.localizations.repeat_datework_weekname_m], [\"T\", this.props.gruntman.localizations.repeat_datework_weekname_tu], [\"W\",  this.props.gruntman.localizations.repeat_datework_weekname_w], [\"Th\",  this.props.gruntman.localizations.repeat_datework_weekname_th], [\"F\",  this.props.gruntman.localizations.repeat_datework_weekname_f], [\"S\",  this.props.gruntman.localizations.repeat_datework_weekname_sa], [\"Su\",  this.props.gruntman.localizations.repeat_datework_weekname_su]].map(e => <a key={e} className={\"repeat-weekgrid-number \"+ (()=>{if(this.state.on)  return (this.state.on.includes(e[0]) ? \"repeat-weekgrid-number-selected\":\"\"); else return \"\"})()} onClick={()=>{\n                                                    if (this.state.on.includes(e[0])) {\n                                                        let oldOn = this.state.on;\n                                                        let newOn = oldOn.filter(elem=>elem!==e[0]);\n                                                        // toggle it off\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    } else  {\n                                                        let oldOn = this.state.on;\n                                                        oldOn.push(e[0]);\n                                                        let newOn = oldOn;\n                                                        // toggle it on\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    }\n                                                }}>{e[1]}</a>)}\n                                            </div>\n                                        )\n                                    case \"monthly\":\n                                        return (\n                                            <div className=\"repeat-dategrid\">\n                                                {/* DONT LOCALIZE THESE VALUES. THEY WILL CAUSE PROBLEMS. ON LOCALIZATION, MAKE THESE ARRAYS */}\n                                                {[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\", \"29\", \"30\", \"31\", \"Last\"].map(e => <a key={e} className={\"repeat-dategrid-number \"+ (()=>{if(this.state.on)  return (this.state.on.includes(e.toLowerCase()) ? \"repeat-dategrid-number-selected\":\"\"); else return \"\"})()} onClick={()=>{\n                                                    if (this.state.on.includes(e.toLowerCase())) {\n                                                        let oldOn = this.state.on;\n                                                        let newOn = oldOn.filter(elem=>elem!==e.toLowerCase());\n                                                        // toggle it off\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    } else  {\n                                                        let oldOn = this.state.on;\n                                                        oldOn.push(e.toLowerCase());\n                                                        let newOn = oldOn;\n                                                        // toggle it on\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    }\n                                                }}>{e}</a>)}\n                                            </div>\n                                        );\n                                }\n                        })()}\n                    </div>\n                </div>\n            </IonModal>\n        )\n    }\n\n\n}\n\nexport default Repeat;\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\nimport React, { Component } from 'react';\nimport './TagEditor.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\n/*\n * Although I do not agree\n * Jack told me to make this feat\n * I did not make this carefree\n * yet this is far from elite\n *\n * I resolved to give it a try\n * and encountered this very strange bug\n * This thing makes me want to cry\n * Front-end is far from a drug\n *\n * I may be exageratting\n * Maybe this bug wasn't so bad\n * But still I cannot add padding\n * and it still makes me very sad\n *\n * React may feel like a drug\n * Until you find the next bug\n *\n * by @zbuster05\n * */\n\nconst autoBind = require('auto-bind/react');\n\nclass TagEditor extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            tagList: []\n        }\n    }\n\n   async setTagState() {\n        this.state.tagList = await this.props.engine.db.getTags(this.props.uid);\n    }\n   // TODO BADDD \n    componentDidMount() {\n        this.setTagState()\n    }\n\n    tagClicked() {\n        console.log(\"Tag Clicked!\")\n    }\n\n    render() {\n        return (\n            <IonModal ref={this.props.reference} isOpen={this.props.isShown} onDidPresent={() => {this.setTagState()}} onDidDismiss={() => {if(this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5, border: \"1px solid red\"}} cssClass={\"tag-editor\"}>\n\n                {/*Text Header*/}\n                <div className=\"TagEditor-header\">\n                    <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n\t\t\t            <b className=\"bold-prefix\" >Tags</b> \n\t\t\t        </span>\n\n                    {/*Close Button*/}\n                    <a className=\"TagEditor-close\" onClick={this.props.onDidDismiss}><i className=\"fa fa-times\"></i></a>\n                </div>\n                \n                {/*Like actual tag setting stuff*/}\n                <div className=\"tag-pane-container\">\n                    <div className=\"tag-list\">\n                        {this.state.tagList.map(tag => {\n                            return (\n                                <div className=\"tag-in-list\" onClick={() => {this.tagClicked()}}>\n                                    <div className=\"tag-name\">\n                                        {tag.name}\n                                    </div>\n                                    <a className=\"TagEditor-close\" onClick={(e) => {\n                                        console.log(\"x clicked\")\n                                        e.stopPropagation()\n                                    }}><i className=\"fa fa-times x\"></i></a>\n                                </div>\n                            )\n                        })}\n                    </div>\n                    <div className=\"tag-settings\"></div>\n                </div>\n            </IonModal>\n        )\n    }\n}\n\nexport default TagEditor\n","// A whole lotta imports\n\n// Ionic components\nimport { IonItem, IonInput, IonContent, IonGrid, IonRow, IonCol, IonSegment, IonLabel, IonButton, IonPopover } from '@ionic/react';\n\n// Detect whether is mobile\nimport { getPlatforms } from '@ionic/react';\n\n// Like, your heart and soul\nimport React, { Component } from 'react';\n\n// React Spring animation packages\nimport { Spring, animated, Keyframes } from 'react-spring/renderprops'\n\n// Cool components \nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\nimport CreatableSelect from 'react-select/creatable';\n\n// Our very own repeat UI\nimport Repeat from './Repeat';\n\n// Our very own tag editor UI\nimport TagEditor from './TagEditor';\n\n// Our very own calendar popover\nimport CalendarPopover from './CalendarPopover';\n\n// Our very own CSS\nimport './Task.css';\n\n// Oooips\nimport ReactTooltip from 'react-tooltip';\n\n// FNS date parcing utils\nconst { parseFromTimeZone } = require('date-fns-timezone')\n\n// autobind those functions\nconst autoBind = require('auto-bind/react');\n\n/*\n *\n * Hello human,\n *\n * I am a task.\n *\n * You seriously are reading the help poem about this?\n *\n * @jemoka\n *\n */\n\n\n// Our very own custom animatinos\nconst AnimationFactory = Keyframes.Spring({\n    // Open->close animation\n    hide: {\n        to: {\n            taskHeight:38, \n            taskMargin: \"2px 8px\", \n            taskBackground:\"\", \n            taskPadding: 3,\n            taskEditOpacity: 0,\n            taskEditMaxHeight: 0,\n            taskOpacity: 1,\n            taskNameDecoration: \"\",\n            taskPosition: \"\",\n            taskDisplay: \"\",\n            taskMaxHeight: 40,\n        },\n        config: {\n            tension: 200,\n            friction: 25,\n            mass: 1\n        },\n        reset: false\n\n    },\n    // Close->open animation\n    show: {\n        to: {\n            taskHeight:38, \n            taskMargin:\"15px 25px\", \n            taskBackground:\"var(--task-selected)\", \n            taskPadding: 10,\n            taskEditOpacity: 1,\n            taskDisplay: \"\",\n            taskOpacity: 1,\n            taskEditMaxHeight: 300,\n            taskNameDecoration: \"\",\n            taskPosition: \"\",\n            taskMaxHeight: 500,\n        },\n        config: {\n            tension: 200,\n            friction: 25,\n            mass: 1\n        },\n        reset: false\n    },\n    // Incomplete->complete animation\n    complete: [\n        {\n            to: {\n                taskMargin: \"14px 8px\", \n                taskNameDecoration: \"line-through\",\n                taskOpacity: 1,\n                taskPosition: \"\",\n            },\n            config: {\n                tension: 200,\n                friction: 25,\n                mass: 1\n            },\n\n        }, \n        {\n            to: {\n                taskMaxHeight: 0,\n                taskHeight:0, \n                taskOpacity: 0,\n                taskMargin: \"0px 8px\", \n                taskPadding: 0,\n                taskPosition: \"absolute\",\n            },\n            config: {\n                tension: 800,\n                friction: 50,\n                mass: 1\n            },\n        }\n    ],\n})\n\n// Aww sheat, here we go\nclass Task extends Component {\n\n    constructor(props) {\n        // Invoke React's constructor\n        super(props);\n\n        // Bind it good!\n        autoBind(this);\n\n        this.state = { \n            expanded: false, // are we expanded?\n            deferDate: undefined, // what's our defer date?\n            dueDate: undefined, // what's our due date?\n            name: \"\", // what's our name string?\n            desc: \"\",  // what's our description string?\n            isFlagged: false, // are we flagged?\n            isFloating: false, // are we floating? or just eating jello?\n            project:\"\", // what's our project ID?\n            tags: [], // what are the IDs of our tags?\n            decoration: \"\",  // are we \"od\" \"ds\" or just just good ol' \"\"?\n            availability: true, // are we avaliable? or are we deferred or blocked (in which case it'd be false.)\n            isComplete: false, // are we completed?\n            showRepeat: false, // is our repeat UI shown?\n            showTagEditor: false, // is our TagEditor UI shown?\n            deferPopoverShown: false, // is the defer calendar popover shown?\n            duePopoverShown: false, // is the due calendar popover shown?\n            startingCompleted: this.props.startingCompleted, // disable immediate onComplete animation for completed\n            possibleTags: this.props.datapack[0], // tags will need to be dynamically added, so\n            haveBeenExpanded: (this.props.startOpen !== undefined && this.props.startOpen !== false), // did we render the edit part yet? optimization\n            notificationPopoverShown: [false, null], // is our notification popover shown?\n            notificationCalendarShown: false, // is the notification calendar shown?\n            hasNotification: false // do we have a notification scheudled?\n        }\n        this.initialRenderDone = false; // wait for data to load to make animation decisions\n        this.me = React.createRef(); // who am I? what am I?\n        this.repeater = React.createRef(); // what's my repeater?\n        this.checkbox = React.createRef(); // what's my pseudocheck\n        this.TagEditorRef = React.createRef(); // what's my tag editor\n        this.actualCheck = React.createRef(); // what's my (actual, non-seen) checkmark\n        this.duePopover = React.createRef(); // what's my due popover?\n        this.deferPopover = React.createRef(); // what's my defer popover?\n        this.notificationPopover = React.createRef(); // what's my notification popover?\n        this.notificationCalender = React.createRef(); // what's my notification calandar?\n    }\n\n    showRepeat() {this.setState({showRepeat: true})} // util func for showing repeat\n    hideRepeat() {this.setState({showRepeat: false})} // util func for hiding repeat\n\n    showTagEditor() {this.setState({showTagEditor: true})} // function for showing tag editor\n    showTageEditor() {this.setState({showTageEditor: false})}  // function for hiding tag editor\n\n    showNotificationPopover(e) {\n        if (this.state.hasNotification)\n            this.setState({notificationPopoverShown: [true, e.nativeEvent]})\n        else \n            this.setState({notificationCalendarShown: true})\n    }\n\n    // Monster function to query task info TODO TODO #cleanmeup\n    async loadTask() {\n\n        // Obviously we need this, the task info\n        let taskInfo = await this.props.engine.db.getTaskInformation(this.props.uid, this.props.tid);\n\n        // Setting state to update the rest of them elements\n        this.setState({\n            name: taskInfo.name, // Set name field\n            desc: taskInfo.desc, // Set task description\n            project: taskInfo.project,  // Set project ID\n            tags: taskInfo.tags, // Set tag ID array\n            isFloating: taskInfo.isFloating, // Set isFloating bool\n            isFlagged: taskInfo.isFlagged, // Set is Flagged bool\n            isComplete: taskInfo.isComplete, // Set is complete style\n            dueDate: (\n                taskInfo.due ? // If we have a due date\n                (taskInfo.isFloating ? // and if we are floating\n                    new Date(taskInfo.due.seconds*1000) : // then the due date in just... the due date\n                    parseFromTimeZone( // otherwise, we stringify the date to remove timezone info\n                        (new Date(taskInfo.due.seconds*1000)).toISOString(), \n                        {timeZone: taskInfo.timezone} // and cast it to the right time zone\n                    )\n                ):\n                undefined \n            ), \n            deferDate: (\n                taskInfo.defer ? // If we have a defer date\n                (taskInfo.isFloating ?  // and if we are floating\n                    new Date(taskInfo.defer.seconds*1000) : // then the defer date is just... the defer date\n                    parseFromTimeZone( // otherwise, we stringify the date to remove timezone info\n                        (new Date(taskInfo.defer.seconds*1000)).toISOString(), \n                        {timeZone: taskInfo.timezone} // and cast it to the right time zone\n                    )\n                ): undefined\n            ),\n            hasNotification: await this.props.gruntman.checkNotification(this.props.tid),\n        });\n        this.refreshDecorations(); // flush and generate them decorations!\n        this.initialRenderDone = true;\n    }\n\n    refreshDecorations() {\n        if (this.state.dueDate) // if we gotta due date\n            if (this.state.dueDate-(new Date()) < 0) // and this kid has not done his homework\n                this.setState({decoration: \"od\"}); // give 'em a red badge\n        else if (this.state.dueDate-(new Date()) < 24*60*60*1000) // or if this kid has not done his homework a day earlier\n            this.setState({decoration: \"ds\"}); // give 'em an orange badge\n        else \n            this.setState({decoration: \"\"}); // give 'em an nothing badge\n\n        if (this.state.deferDate) // if we gotta defer date\n            if (this.state.deferDate-(new Date()) > 0) // and this kid is trying to start early\n                this.setState({availability: false}); // tell 'em it's not avaliable\n        else if (this.props.availability === true) //  otherwise, if this thing's avaliable\n            this.setState({availability: true}); // set it to be so!\n        else if (!this.props.availability) // or if my props make me disabled\n            this.setState({availability: false}); // well then you gotta follow them props, no?\n    }\n\n    componentDidMount() {\n        this.loadTask(); // load the task when we mount   \n        document.addEventListener('mousedown', this.detectOutsideClick, false); // and listen for clicks everywhere\n    }\n\n    componentWillUnmount = () => document.removeEventListener('mousedown', this.detectOutsideClick, false); // remove the listener... no memory leaks plez\n\n    toggleTask = () => this.setState(state => ({expanded: !state.expanded})); // util function to toggl a task\n    \n    closeTask() {\n        this.setState({expanded: false});\n    }\n    //closeTask = () => this.setState({expanded: false}); // util function to close a task\n\n    openTask() {\n        if (this.state.haveBeenExpanded)\n            this.setState({expanded: true});\n        else \n            this.setState({haveBeenExpanded: true}, ()=>this.setState({expanded: true}));\n    }// util function to open a task\n\n    _explode() {\n        // You should probably be calling openTask()\n        this.initialRenderDone = true;\n        this.setState({haveBeenExpanded: true}, ()=>this.setState({expanded: true}));\n    }\n\n    detectOutsideClick(e) {\n\n        if (this.me.current) // if we are mounted\n            if (this.me.current.contains(e.target)) // if we are clicking me\n                return; //click inside\n\n        if (this.repeater.current) // if our repeater is a thing that mounted\n            if (this.repeater.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.duePopover.current) // if our due popover is a thing that mounted\n            if (this.duePopover.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.deferPopover.current) // if our defer popover is a thing that mounted\n            if (this.deferPopover.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.notificationPopover.current) // if our notification popover is a thing that mounted\n            if (this.notificationPopover.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.notificationCalender.current) // if our notification calendar is a thing that mounted\n            if (this.notificationCalender.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n        \n        if (this.TagEditorRef.current) // if our repeater is a thing that mounted\n            if (this.TagEditorRef.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n        \n        //if (this.props.envelope) // if we have a drag envelope\n            //if (this.props.envelope.current) // if we have a drag envelope\n                //if (this.props.envelope.current.contains(e.target)) // and we are clicking inside that\n                    {/*return; //click inside*/}\n\n        // DRAG ENVELOPES ARE SUPPOSED TO PROTECT AGAINST DRAGGING, AND ARE UNIVERSAL ACROSS ALL TASKS\n        // UNCOMMENTING THIS WILL MAKE MULTIPLE TASKS OPEN AT ONCE ON UPCOMING\n\n        if (document.getElementById(\"parking-lot\").contains(e.target))\n            return;\n\n        if (this.props.onModal)\n            if (document.getElementById(\"airplane-hanger\").contains(e.target))\n                return;\n\n        if (this.state.showRepeat) // if we are showing our repeat\n            return; //click inside\n\n        if (this.state.showTagEditor) // if we are showing TagEditor\n            return; // click inside\n\n        //otherwise,\n        this.closeTask();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevState.deferDate !== this.state.deferDate) // if we updated the defer date\n            this.refreshDecorations();\n        if (prevState.dueDate !== this.state.dueDate) // if we updated the due date\n            this.refreshDecorations();\n        if (prevState.expanded !== this.state.expanded && this.state.expanded === true) {// if we opened a task for updating\n            if (getPlatforms().includes(\"mobile\"))\n                document.getElementById(\"abtib\").style.display = \"none\";\n            if (this.props.setDragEnabled) // if we are a draggable task\n                this.props.setDragEnabled(false); // disable drag\n            this.props.gruntman.lockUpdates(); // tell gruntman to chill\n        }\n        else if (prevState.expanded !== this.state.expanded && this.state.expanded === false) { // if we closed a task\n            if (getPlatforms().includes(\"mobile\"))\n                document.getElementById(\"abtib\").style.display = \"block\";\n            if (this.props.setDragEnabled) // if we are a draggable task\n                this.props.setDragEnabled(true); // enable drag\n            this.props.gruntman.unlockUpdates(); // tell gruntman to... grunt!\n        }\n        if (prevProps.startOpen !== this.props.startOpen && this.props.startOpen) // we are newly starting open\n            this.openTask(); // open task\n    }\n\n\n    // ready fo this?\n\n    render() {\n\n        return (\n            <div>\n\n                {/*animation factory to orchistrate animations*/}\n\n                <AnimationFactory\n\n                    native  \n\n                    state = {\n                        this.initialRenderDone ?\n                            (this.state.isComplete? // if we are complete \n                                (this.state.startingCompleted? // and we start complete \n                                    (this.state.expanded? // and we are expanded \n                                        \"show\":\"hide\") // show, otherwise, hide \n                                        :\"complete\") // if we are complete,  and don't start completed, complete. \n                                        : // if we arnt complete, \n                                this.state.startingCompleted ?  // and we start complete \n                                \"complete\" :\n                                (this.state.expanded? \"show\":\"hide\")):\"hide\"\n                    } // if we are incomplete, and we start incomplete, then show or hide based on expanded \n\n                >\n                    {animatedProps => {\n                        return (\n                            // Actual task container, now\n                            <animated.div \n                                onClick={(e)=>{\n                                    if(!this.state.expanded && e.target !== this.checkbox.current && e.target !== this.actualCheck.current && !this.props.freeze && !(this.state.isComplete&&!this.state.startingCompleted)) { \n                                        this.openTask(); // open the task\n                                    }\n                                }}\n                                className={\"task \"+(this.state.expanded?\"expanded\":\"collapsed\")} \n\n                                ref={this.me} \n\n                                style={{\n                                    minHeight: animatedProps.taskHeight, \n                                    maxHeight: animatedProps.taskMaxHeight, \n                                    margin: animatedProps.taskMargin, \n                                    background:animatedProps.taskBackground, \n                                    opacity:animatedProps.taskOpacity, \n                                    overflow: \"hidden\",\n                                    display: animatedProps.taskDisplay,\n                                    position: animated.taskPosition,\n                                    padding: animatedProps.taskPadding}}\n                            >\n\n                                {/* Chapter 0: Utility Components */}\n\n                                {/* Gotta get those on hover tips */}\n                                {/* And load up + hide the repeat UI, too! */}\n                                <Repeat tid={this.props.tid} reference={this.repeater} isShown={this.state.showRepeat} onDidDismiss={this.hideRepeat} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman}/>\n                                {/* As well as load up + hide the tag editor!*/}\n                                <TagEditor reference={this.TagEditorRef} isShown={this.state.showTagEditor} onDidDismiss={()=>this.setState({showTagEditor: false})} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman}/>\n                                \n                                {/* Chapter 1: Task Checkmark */}\n                                {/* Who could have thought so much code goes into a checkbox? */}\n                                <div style={{display: \"inline-block\", transform: \"translateY(-3px)\"}}>\n                                    {/* First, an invisible checkmark */}\n                                    <input \n                                        type=\"checkbox\" \n\n     ref={this.actualCheck}\n                                        id={\"task-check-\"+this.props.tid} \n                                        className=\"task-check\"\n                                        defaultChecked={this.props.startingCompleted}\n                                        onChange={()=>{\n\n                                            // If we are uncompleting a task (that is, currently task is complete) \n                                            if (this.state.isComplete) {\n                                                this.props.gruntman.lockUpdates();\n                                                // Well, first, uncomplete it\n                                                this.setState({isComplete: false})\n                                                // Update the database, registering a gruntman action while you are at it.\n                                                this.props.gruntman.do(\"task.update__uncomplete\", { uid: this.props.uid, tid: this.props.tid}, true)\n                                                // Whatever this is\n                                                this.props.gruntman.unlockUpdates(1000)\n                                            }\n                                            // If we are completing a task (that is, currently task is incomplete)\n                                            else if (!this.state.isComplete) {\n                                                // Lock updates so that animation could finish\n                                                this.props.gruntman.lockUpdates();\n                                                // Complete it\n                                                this.setState({isComplete: true})\n                                                // Update the database, registering a gruntman action while you are at it.\n                                                this.props.gruntman.do(\"task.update__complete\", { uid: this.props.uid, tid: this.props.tid}, true)\n                                                //TODO wait for animation to finish before state update??\n                                                this.props.gruntman.unlockUpdates(1000)\n                                            }\n                                        }} \n                                        style={{opacity: this.state.availability?1:0.35}}\n                                    />\n\n                                    {/* Oh yeah, that checkmark above you can't actually see */}\n                                    {/* Here's what the user actually clicks on, the label! */}\n                                    <label ref={this.checkbox} className={\"task-pseudocheck \"+this.state.decoration} id={\"task-pseudocheck-\"+this.props.tid} htmlFor={\"task-check-\"+this.props.tid}>&zwnj;</label>\n                                </div>\n\n                                {/* The animated input box */}\n                                <animated.input \n                                    defaultValue={this.state.name} \n                                    onChange={\n                                        (e)=>{\n                                            // THIS. REFER TO THIS. YOU ARE HERE. STOP SEARCHING.\n                                            // :point down: is FANCYCHANGE\n\n                                            // If somebody dares to do the complicated action of task name change\n                                            e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n\n                                            // Register a scheduler to watch for more changes\n                                            // because dang react calls onChange on every freaking change\n                                            // TODO TODO destruct all schedulers on view change\n                                            this.props.gruntman.registerScheduler(() => this.props.gruntman.do(\n                                                \"task.update\", // the scheduler actually updates the task\n                                                {\n                                                    uid: this.props.uid, \n                                                    tid: this.props.tid, \n                                                    query:{name: e.target.value} // setting the name to the name\n                                                }\n                                            ), `task-name-${this.props.tid}-update`) // and we will schedule it as this\n                                        }\n                                    } \n\n                                    onFocus={(e)=>{ \n                                        // open the task if its not open already\n                                        if(!this.state.expanded) { \n                                            //this.openTask(); // open the task\n                                            if (getPlatforms().includes(\"mobile\")) e.target.blur(); // blur, only if mobile to fix bugs where even in attempted readonly the cursor blurs\n                                        }\n                                    }} \n                                    className={\"task-name \"+(this.state.expanded?\"\":\"no-select\")} \n                                    readOnly={(!this.state.expanded)} \n                                    type=\"text\" \n                                    autoComplete=\"off\" \n                                    placeholder={this.props.gruntman.localizations.nt} \n                                    style={{opacity: this.state.availability?1:0.35, textDecoration: animatedProps.taskNameDecoration}}\n\t\t\t\t    onKeyDown={e => (e.key == \"Enter\")? this.setState({expanded: false}) : undefined}\n\t\t\t\t    />\n\n                                {/* Task edit. The thing that slides open on edit. */}\n                                {(() => {\n                                    if (this.state.haveBeenExpanded===true)\n                                        return(\n                                            <animated.div className=\"task-edit\" style={{opacity: animatedProps.taskEditOpacity, overflow: \"hidden\",maxHeight: animatedProps.taskEditMaxHeight}}>\n\n                                                {/* First, task description field */}\n                                                <textarea \n\t\t\t\t\t\t    tabIndex='0'\n                                                    placeholder={this.props.gruntman.localizations.desc} \n                                                    className=\"task-desc\" \n                                                    style={{marginBottom: 10}} \n                                                    defaultValue={this.state.desc}\n                                                    onChange={\n                                                        (e)=>{\n                                                            // Register a scheduler to deal with React's onChange\n                                                            // Search for the word FANCYCHANGE to read my spheal on this\n                                                            e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                            this.props.gruntman.registerScheduler(() => this.props.gruntman.do(\n                                                                \"task.update\", \n                                                                {\n                                                                    uid: this.props.uid, \n                                                                    tid: this.props.tid, \n                                                                    query:{desc: e.target.value}\n                                                                }\n                                                            ), `task-desc-${this.props.tid}-update`)\n                                                        }\n                                                    }\n                                                >\n                                                </textarea>\n\n                                                {/* Task icon set. TODO delete task */}\n                                                <div style={{display: \"inline-block\", marginBottom: 6, transform: \"translateY(-5px)\"}}>\n                                                    {/* Flagged icon */}\n                                                    <a data-tip={this.props.gruntman.psp_flg} className=\"task-icon\" style={{borderColor: this.state.isFlagged ? \"var(--task-icon-ring-highlighted)\":\"var(--task-icon-ring)\", cursor: \"pointer\"}} onClick={()=>{\n                                                        // On change, set the flagged state to the opposite of whatever it is\n                                                        // Both on the db...\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{isFlagged: !this.state.isFlagged}}\n                                                        )\n                                                        // And the task!\n                                                        this.setState({isFlagged: !this.state.isFlagged});\n\n                                                    }}><i className=\"fas fa-flag\" style={{margin: 3, color: this.state.isFlagged ? \"var(--task-icon-highlighted)\" : \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(7px, 5px)\"}} ></i></a>\n\n                                                    {/* Floating icon */}\n                                                    <a data-tip=\"LOCALIZE: Floating\" className=\"task-icon\" style={{borderColor: this.state.isFloating? \"var(--task-icon-ring-highlighted)\":\"var(--task-icon-ring)\", cursor: \"pointer\"}} onClick={()=>{\n                                                        // On change, set the floating state to the opposite of whatever it is\n                                                        // Both on the db... TODO flush the timezone too?\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{isFloating: !this.state.isFloating}}\n                                                        )\n                                                        // And the task!\n                                                        this.setState({isFloating: !this.state.isFloating});\n\n                                                    }}><i className=\"fas fa-globe-americas\" style={{margin: 3, color: this.state.isFloating? \"var(--task-icon-highlighted)\" : \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(7px, 5px)\"}} ></i></a>\n\n                                                    {/* Repeat icon that, on click, shows repeat */}\n                                                    <a onClick={this.showRepeat} className=\"task-icon\" style={{borderColor: \"var(--task-icon-ring)\", cursor: \"pointer\"}} data-tip=\"LOCALIZE: Repeat\"><i className=\"fas fa-redo\" style={{margin: 3, color: \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(6.5px, 5.5px)\"}} ></i></a>\n\n                                                    {/* Notification icon that, on click, shows notify popover */}\n                                                    <CalendarPopover  gruntman={this.props.gruntman} reference={this.notificationCalender} uid={this.props.uid} disableOnclick engine={this.props.engine} isShown={this.state.notificationCalendarShown} onDidDismiss={()=>this.setState({notificationCalendarShown: false})} useTime initialDate={this.state.dueDate} onDateSelected={(d)=>{\n                                                        this.props.gruntman.cancelNotification(this.props.tid).then(()=>{\n                                                            this.props.gruntman.scheduleNotification(this.props.tid, this.props.uid, this.state.name, this.state.desc, d);\n                                                            this.setState({hasNotification: true});\n                                                        });\n                                                    }}/>\n                                                    <IonPopover\n                                                        showBackdrop={false}\n                                                        isOpen={this.state.notificationPopoverShown[0]}\n                                                        cssClass='notif-popover'\n                                                        mode=\"md\" \n                                                        onDidDismiss={e => this.setState({notificationPopoverShown: [false, null]})}\n                                                        event={this.state.notificationPopoverShown[1]}\n                                                        ref={this.notificationPopover}\n                                                    >\n                                                        <div>\n                                                            <div className=\"notification-popover-item\" onClick={()=>{\n                                                                this.props.gruntman.cancelNotification(this.props.tid)\n                                                                this.setState({hasNotification: false, notificationPopoverShown: [false, null]});\n                                                            }}>Cancel Notification</div>\n                                                            <div className=\"notification-popover-item\" onClick={()=>this.setState({notificationCalendarShown: true, notificationPopoverShown:[false, null]})}>Change Notification</div>\n                                                        </div>\n                                                    </IonPopover>\n                                                    {(()=>{\n                                                        if (this.props.gruntman.notifPermissionGranted && !(getPlatforms().includes(\"mobileweb\") || getPlatforms().includes(\"desktop\")))\n                                                            return <a onClick={this.showNotificationPopover} className=\"task-icon\" style={{borderColor: \"var(--task-icon-ring)\", cursor: \"pointer\"}} data-tip=\"LOCALIZE: Repeat\"><i className=\"fas fa-bell\" style={{margin: 3, color: \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(7px, 5.5px)\"}} ></i></a>\n                                                    })()}\n\n                                                    {/* TagEditor icon that shows TagEditor on click*/}\n                                                    <a onClick={this.showTagEditor} className=\"task-icon\" style={{borderColor: \"var(--task-icon-ring)\", marginRight: 20, cursor: \"pointer\"}} data-tip=\"LOCALIZE: Freaking TagEditor\"><i className=\"fas fa-tags\" style={{margin: 3, color: \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(6.5px, 5.5px)\"}}></i></a>\n                                                    {/*<div className=\"task-icon\" style={{borderColor: \"var(--task-checkbox-feature-alt)\", marginRight: 20}}><a className=\"fas fa-globe-americas\" style={{margin: 3, color: \"var(--task-textbox)\", fontSize: 13, transform: \"translate(2.5px, -0.5px)\"}}></a></div>*/}\n                                                </div>\n\n\n                                                {/* Task date set */}\n                                                <div style={{display: \"inline-block\", marginBottom: 8}}>\n\n                                                    {/* Defer date container */}\n                                                    <div style={{display: \"inline-block\", marginRight: 10, marginBottom: 5, marginLeft: 6}}>\n                                                        {/* The. Defer. Date. */}\n                                                        <i className=\"fas fa-play\" data-tip=\"LOCALIZE: Defer Date\" style={{transform: \"translateY(-1px)\", marginRight: 10, color: \"var(--task-icon)\", fontSize: 10}}></i>\n                                                        <CalendarPopover  gruntman={this.props.gruntman} reference={this.deferPopover} uid={this.props.uid} engine={this.props.engine} isShown={this.state.deferPopoverShown} onDidDismiss={()=>this.setState({deferPopoverShown: false})} useTime initialDate={this.state.deferDate} onDateSelected={(d)=>{\n                                                            this.props.gruntman.do(\n                                                                \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{defer:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                            )\n                                                            this.setState({deferDate: d});\n\n                                                        }}/>\n                                                        {(() => {\n                                                            {/* The. Defer. Date. Input. */}\n                                                            const DateInput = ({ value, onClick }) => { \n                                                                return (\n                                                                    <input \n\t\t\t\t\t\t\t\t\ttabIndex='0'\n\t\t\t\t\t\t\t\t\tclassName=\"task-datebox\" \n\t\t\t\t\t\t\t\t\treadOnly={(getPlatforms().includes(\"mobile\"))} defaultValue={value}  onChange={(e)=>{\n                                                                        // Register a scheduler to deal with React's onChange\n                                                                        // Search for the word FANCYCHANGE to read my spheal on this\n                                                                        // DATEHANDLING is here too. If you are looking for that, stop searching\n\n                                                                        e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                                        this.props.gruntman.registerScheduler(() => {\n                                                                            let d = chrono.parseDate(e.target.value); // NLP that date!\n                                                                            if (d) this.setState({deferDate: d}); // we we got a valid date, update the calendar UI\n                                                                            if (d) // and update the database too!\n                                                                                this.props.gruntman.do(\n                                                                                    \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{defer:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                                )\n                                                                        }, `task-defer-${this.props.tid}-update`)\n                                                                    }} onFocus={(e) => {\n                                                                        if (getPlatforms().includes(\"mobile\"))\n                                                                            this.setState({deferPopoverShown: true})\n                                                                        else {\n                                                                            onClick();\n                                                                            e.target.focus();\n                                                                        }\n\n                                                                    }}\n                                                                    />\n                                                                );\n                                                            };\n                                                            const TimeInput = ({ value, onChange }) => {\n                                                                // IDK why this is needed, but it is. Sometimes it decides that it will drop the final 0?\n                                                                if (value.slice(value.length-2, value.length) === \":0\") value = value + \"0\";\n                                                                // TODO: calling complex string ops to fix an interface bug not a good idea?\n                                                                return (\n                                                                    <input\n                                                                        className=\"task-timebox\"\n                                                                        defaultValue={value}\n                                                                        onKeyPress={e => {\n                                                                            // TIMEHANDLING is here. If you are searching for that, it's here.\n                                                                            // But anyway, on change, parse the time\n                                                                            let d = chrono.parseDate(e.target.value); //TODO bad?\n                                                                            // ...and throw away the date \n                                                                            if (d && e.key === \"Enter\") onChange(d.getHours() + \":\" + d.getMinutes() + \":\" + d.getSeconds()); // TODO make this with the onChange API\n                                                                        }}\n                                                                    />\n                                                                )};\n                                                            return (\n                                                                <DatePicker\n                                                                    selected={this.state.deferDate}\n                                                                    portalId={this.props.onModal?\"airplane-hanger\":\"parking-lot\"}\n                                                                    onChange={date => {\n                                                                        // If the calendar got a new date, set it\n                                                                        this.setState({deferDate: date});\n\n                                                                        // No longer needed. State updates handle decoration udpates. Kept here for decorative purposes:\n                                                                        // and hit the DB too!\n                                                                        this.props.gruntman.do(\n                                                                            \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{defer: date, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                        )\n                                                                    }}\n                                                                    showTimeInput\n                                                                    dateFormat=\"MM/dd/yyyy h:mm aa\"\n                                                                    customTimeInput={<TimeInput />}\n                                                                    customInput={<DateInput />}\n                                                                />\n                                                            )\n                                                        })()}\n                                                    </div>\n\n                                                    <div style={{display: \"inline-block\", marginBottom: 5, marginLeft: 6}}>\n                                                        <i className=\"fas fa-stop\" data-tip=\"LOCALIZE: Due Date\" style={{transform: \"translateY(-1px)\", marginRight: 10, color: \"var(--task-icon)\", fontSize: 10}}></i>\n                                                        {/* Due date popover */}\n                                                        <CalendarPopover  gruntman={this.props.gruntman} reference={this.duePopover} uid={this.props.uid} engine={this.props.engine} isShown={this.state.duePopoverShown} onDidDismiss={()=>this.setState({duePopoverShown: false})} useTime initialDate={this.state.dueDate} onDateSelected={(d)=>{\n                                                            this.props.gruntman.do(\n                                                                \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{due:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                            )\n                                                            this.setState({dueDate: d});\n\n                                                        }}/>\n                                                        {(() => {\n                                                            const DateInput = ({ value, onClick }) => { \n                                                                return (\n                                                                    <input \n\t\t\t\t\t\t\t\t\ttabIndex='0'\n\t\t\t\t\t\t\t\t\tclassName=\"task-datebox\" readOnly={(getPlatforms().includes(\"mobile\")) ? true : false} defaultValue={value} onChange={(e)=>{\n                                                                        // Register a scheduler to deal with React's onChange\n                                                                        // Search for the word FANCYCHANGE to read my spheal on this\n                                                                        // Search for the word DATEHANDLING for what the heck the code actually does\n\n                                                                        e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                                        this.props.gruntman.registerScheduler(() => {\n                                                                            let d = chrono.parseDate(e.target.value);\n                                                                            if (d) this.setState({dueDate: d});\n                                                                            if (d)\n                                                                                this.props.gruntman.do(\n                                                                                    \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{due:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                                )\n\n                                                                        }, `task-due-${this.props.tid}-update`)\n                                                                    }\n                                                                        } onFocus={(e) => {\n                                                                            if (getPlatforms().includes(\"mobile\"))\n                                                                                this.setState({duePopoverShown: true})\n                                                                            else {\n                                                                                onClick();\n                                                                                e.target.focus();\n                                                                            }\n                                                                        }}\n                                                                    />\n                                                                );\n                                                            };\n                                                            const TimeInput = ({ value, onChange }) => {\n                                                                // IDK why this is needed, but it is. Sometimes it decides that it will drop the final 0?\n                                                                if (value.slice(value.length-2, value.length) === \":0\") value = value + \"0\";\n                                                                // TODO: calling complex string ops to fix an interface bug not a good idea?\n                                                                return (\n                                                                    <input\n                                                                        className=\"task-timebox\"\n                                                                        defaultValue={value}\n                                                                        onKeyPress={e => {\n                                                                            // Search for TIMEHANDLING for notes on time handling.\n                                                                            // But anyway, on change, parse the time\n                                                                            let d = chrono.parseDate(e.target.value); //TODO bad?\n                                                                            // ...and throw away the date \n                                                                            if (d && e.key === \"Enter\") onChange(d.getHours() + \":\" + d.getMinutes() + \":\" + d.getSeconds());\n                                                                        }}\n                                                                    />\n                                                                )};\n                                                            return (\n                                                                <DatePicker\n                                                                    selected={this.state.dueDate}\n                                                                    portalId={this.props.onModal?\"airplane-hanger\":\"parking-lot\"}\n                                                                    onChange={date => this.setState({dueDate: date})}\n                                                                    showTimeInput\n                                                                    isClearable\n                                                                    dateFormat=\"MM/dd/yyyy h:mm aa\"\n                                                                    customTimeInput={<TimeInput />}\n                                                                    customInput={<DateInput />}\n                                                                    onChange={date => {\n                                                                        // If the calendar got a new date, set it\n                                                                        this.setState({dueDate: date});\n\n                                                                        // and hit the DB too!\n                                                                        this.props.gruntman.do(\n                                                                            \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{due: date, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                        )\n                                                                    }}\n                                                                />\n                                                            )\n                                                        })()}\n                                                    </div>\n                                                </div>\n                                                <div>\n                                                    {/* Task project container */}\n                                                    <span className=\"task-project-container\">\n                                                        {/* Icon */}\n                                                        <i className=\"fas fa-list-ul\" style={{margin: 3, color: \"var(--task-icon)\", fontSize: 13, marginRight: 5, transform: \"translateY(5px)\"}}></i>\n                                                        {/* Project select */}\n                                                        <Select \n                                                            options={this.props.datapack[1]}\n                                                            className='task-project'\n                                                            classNamePrefix='task-select'\n                                                            isClearable\n                                                            styles={{\n                                                                // Fixes the overlapping problem of the component\n                                                                menuPortal: provided => ({ ...provided, zIndex: \"99999 !important\" })\n                                                            }}\n                                                            menuPortalTarget={document.body}\n                                                            value={this.props.datapack[1].filter(option => option.value === this.state.project)}\n                                                            onChange={(e)=>{\n                                                                {/* :point up: filter for only options with this project and set that to be the value */}\n                                                                {/* Actually update the project */}\n                                                                this.props.gruntman.do(\"task.update__project\", { uid: this.props.uid, tid: this.props.tid, oldProject: this.state.project===\"\"?undefined:this.state.project, project: (e?e.value:\"\")})\n                                                                {/* And set the state, too! */}\n                                                                this.setState({project:(e?e.value:\"\")});\n                                                            }}\n                                                        />\n                                                    </span>\n                                                    {/* Task tag container */}\n                                                    <span className=\"task-tag-container\">\n                                                        {/* Icon */}\n                                                        <i className=\"fas fa-tags\" style={{margin: 3, color: \"var(--task-icon)\", fontSize: 13, transform: \"translateY(5px)\"}}></i>\n                                                        {/* Tag select */}\n                                                        <CreatableSelect\n                                                            options={this.props.datapack[0]}\n                                                            className='task-tag'\n                                                            classNamePrefix='task-select'\n                                                            isClearable\n                                                            isMulti\n                                                            styles={{ menuPortal: base => ({ ...base, zIndex: \"99999 !important\" }) }}\n                                                            menuPortalTarget={document.body}\n                                                            value={this.props.datapack[0].filter(option => this.state.tags.includes(option.value))}\n                                                            onChange={(newValue, actionMeta) => {\n                                                                let view = this;\n                                                                let tids = newValue?newValue.map(async function (e) { // for each tag\n                                                                    if (e.__isNew__) { // if it's a new tag\n                                                                        let tagID = (await view.props.gruntman.do( // create it!\n                                                                            \"tag.create\",\n                                                                            {\n                                                                                uid: view.props.uid,\n                                                                                name: e.label,\n                                                                            }, \n                                                                        )).id;\n                                                                        let originalTags = view.state.possibleTags; // get tags\n                                                                        originalTags.push({label: e.label, value: tagID}); // add our new tag\n                                                                        view.setState({possibleTags: originalTags}); // sax-a-boom!\n                                                                        return tagID;\n                                                                    } else\n                                                                        return e.value;\n                                                                }):[]; // find the correct tags sets, or set it to an empty set\n                                                                Promise.all(tids).then(tagIDs => {\n                                                                    this.setState({tags: tagIDs}); // set the state\n                                                                    this.props.gruntman.do(\n                                                                        \"task.update\", \n                                                                        {\n                                                                            uid: this.props.uid, \n                                                                            tid: this.props.tid, \n                                                                            query:{tags: tagIDs} // set a taskID\n                                                                        }\n                                                                    )\n                                                                });\n                                                            }}\n                                                        />\n                                                    </span>\n                                                </div>\n                                            </animated.div>\n                                        )\n                                })()}\n                            </animated.div>\n                        )}\n                    } \n                </AnimationFactory>\n            </div >\n\n\n        )\n    }\n}\n\nexport default Task;\n\n","import dbManager from \"./DBManager\"\nlet cRef = dbManager.cRef;\n\nconst util = {\n    select: {\n        compare: (lhs, cmp, rhs) => {\n            switch (cmp) {\n                case \"<\":\n                    return lhs < rhs;\n                case \">\":\n                    return lhs > rhs;\n                case \"<=\":\n                    return lhs <= rhs;\n                case \">=\":\n                    return lhs >= rhs;\n                case \"==\":\n                    return lhs == rhs;\n                case \"!=\":\n                    return lhs != rhs;\n                case \"has\":\n                    return lhs.includes(rhs);\n                case \"!has\":\n                    return !lhs.includes(rhs);\n                default:\n                    throw new TypeError(\"Unkown comparator \" + cmp);\n            }\n        },\n        all: (...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (!util.select.compare(dat[lhs], cmp, rhs))\n                    return false;\n            return true;\n        },\n        any: (...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs))\n                    return true;\n            return false;\n        },\n        atLeast: (threshold, ...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            let counter = 0;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs)) {\n                    ++counter;\n                    if (counter >= threshold)\n                        return true;\n                }\n            return false;\n        },\n        atMost: (threshold, ...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            let counter = 0;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs)) {\n                    ++counter;\n                    if (counter > threshold)\n                        return false;\n                }\n            return true;\n        }\n    },\n    debug: {\n        log: (arg) => {\n            console.log(arg);\n            return arg;\n        },\n        trace: (arg) => {\n            console.trace(arg);\n            return arg;\n        }\n    }\n};\n\nlet isWorkspace = false;\n\nfunction setWorkspaceMode(workspaceMode) {\n    isWorkspace = workspaceMode;\n}\n\nasync function generateWorkspace(userID, name=\"\") {\n    let oldWorkspaces = (await cRef(\"users\", userID).get()).data().workspaces;\n    oldWorkspaces = oldWorkspaces ? oldWorkspaces : [];\n    let workspaceID = (await cRef(\"workspaces\").add({meta: {editors: [userID], name}})).id;\n    (await cRef(\"users\", userID).update({workspaces:[...oldWorkspaces, workspaceID]}));\n    return workspaceID;\n}\n\nasync function getWorkspaces(userID) {\n    let userData = (await cRef(\"users\", userID).get()).data()\n    if (userData)\n        return userData[\"workspaces\"];\n    else \n        return [];\n}\n\nasync function getWorkspace(workspaceID) {\n    return (await cRef(\"workspaces\", workspaceID).get()).data();\n}\n\nasync function getTasks(userID) {\n    return cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\").get()\n    .then(snap => snap.docs\n        .map(doc => doc.id)\n    ).catch(err => {\n        console.error('Error getting documents', err);\n    });\n}\n\nasync function getTasksWithQuery(userID, query) {\n    let taskDocs = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\")\n        .get()\n        .then(snap => snap.docs\n            .filter(query)\n        ).catch(err => {\n            console.error('Error getting documents', err);\n        });\n    return taskDocs.map(doc => doc.id);\n}\n\nasync function getInboxTasks(userID) {\n\n    let inboxDocs = await cRef(\n        isWorkspace?\"workspaces\":\"users\", userID,\n        \"tasks\")\n        //['project', '==', ''],\n        //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(util.select.all(['project', '==', ''], ['isComplete', '==', false]))\n            .sort((a,b) => a.data().order - b.data().order)\n        ).catch(err => {\n            console.error('Error getting documents', err);\n        });\n    return inboxDocs.map(doc => doc.id);\n}\n\nasync function getDSTasks(userID, available, wrt) {\n    let dsTime = wrt ? wrt : new Date(); // TODO: merge with next line?\n    dsTime.setHours(dsTime.getHours() + 24);\n    //let available = await getItemAvailability(userID);\n    let dsDocs = await cRef(isWorkspace?\"workspaces\":\"users\", userID,\n        \"tasks\")\n            //['due', '<=', dsTime],\n            //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(doc =>\n                (doc.data().due ? (doc.data().due.seconds <= (dsTime.getTime()/1000)) : false) && // has a due date and is ds\n                (doc.data().defer ? (doc.data().defer.seconds < ((new Date()).getTime())/1000) : true) && // has a defer and is not defered or has no defer date\n                (doc.data().isComplete === false) && // is not completed\n                (available[doc.id]) // aaaand is available\n            )\n            .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n    ).catch(console.error);\n    return dsDocs.map(doc => doc.id);\n}\n\nasync function dueTasks(userID, available, wrt) {\n    let dsTime = wrt ? wrt : new Date(); // TODO: merge with next line?\n    dsTime.setHours(23,59,59,999);\n    //let available = await getItemAvailability(userID);\n    let dsDocs = await cRef(isWorkspace?\"workspaces\":\"users\", userID,\n        \"tasks\")\n            //['due', '<=', dsTime],\n            //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(doc =>\n                (doc.data().due ? (doc.data().due.seconds <= (dsTime.getTime()/1000)) : false) && // has a due date and is ds\n                (doc.data().defer ? (doc.data().defer.seconds < ((new Date()).getTime())/1000) : true) && // has a defer and is not defered or has no defer date\n                (doc.data().isComplete === false) && // is not completed\n                (available[doc.id]) // aaaand is available\n            )\n            .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n    ).catch(console.error);\n    return dsDocs.map(doc => doc.id);\n}\n\nasync function selectTasksInRange(userID, min=(new Date(1900, 1, 1)), max=(new Date(2100, 1, 1)), returnFull=false) {\n/*    let maxT = max;*/\n    //let minT = min;\n    //maxT.setHours(23, 59, 59, 999);\n    /*minT.setHours(0, 0, 0, 0);*/\n    let tasks = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\")\n                    .get()\n                    .then(snap => snap.docs\n                        .filter(doc =>\n                            (doc.data().due ?\n                                (doc.data().defer ?\n                                    (new Date(doc.data().due.seconds*1000)) <= max && (new Date(doc.data().due.seconds*1000)) >= min && (new Date() >= (new Date(doc.data().defer.seconds*1000)))\n                                : false) \n                                : false)\n                        )\n                        .filter(doc => !doc.data().isComplete)\n                        .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n                    ).catch(console.error);\n    return returnFull ? tasks.map(doc => [doc.id, doc.data()]):tasks.map(doc => doc.id);\n}\n\nasync function getDSRow(userID, avaliable) {\n    console.warn(\"DEPERCATED: use instead selectTasksInRange\");\n    let ibt = await getInboxTasks(userID);\n    let d = new Date();\n    let dsTasks = [];\n    let prev = [];\n    for (let i=0; i<=7; i++) {\n        let content = (await dueTasks(userID, avaliable, d))\n        let cache = content;\n        dsTasks.push(content.filter(x => !prev.includes(x)));\n        prev = cache;\n        d.setDate(d.getDate() + 1)\n    }\n    return dsTasks.map(dst => dst.filter(x => ibt.indexOf(x) < 0));\n}\n\nasync function getInboxandDS(userID, avalibility) {\n    let ibt = await getInboxTasks(userID);\n    let dst = await getDSTasks(userID, avalibility);\n    let dstWithoutIbt = dst.filter(x => ibt.indexOf(x) < 0);\n    return [ibt, dstWithoutIbt]\n}\n\nasync function getTaskInformation(userID, taskID) {\n    let dat = (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\").get()\n        .then(snap => snap.docs\n            .filter(doc => doc.id === taskID))\n    )[0]\n    if (dat) return dat.data();\n}\n\nasync function removeParamFromTask(userID, taskID, paramName) {\n    let ti = await getTaskInformation(userID, taskID);\n    delete ti[paramName];\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\", taskID)\n        .set(ti)\n        .catch(console.error);\n}\n\nasync function getTopLevelProjects(userID) {\n    let projectIdByName = {};\n    let projectNameById = {};\n    let projectsSorted = []; \n\n    let snap = (await cRef(isWorkspace?\"workspaces\":'users', userID, \"projects\")\n        .get());\n\n    snap.docs.forEach(proj => {\n        if (proj.exists && proj.data().top_level === true) {\n            projectNameById[proj.id] = proj.data().name;\n            projectIdByName[proj.data().name] = proj.id;\n            let projElem = {};\n            projElem.id = proj.id;\n            projElem.name = proj.data().name;\n            projElem.sortOrder = proj.data().order;\n            projectsSorted.push(projElem);\n        }\n    });\n\n    projectsSorted.sort((a,b) => a.sortOrder-b.sortOrder);\n    let ret = [projectNameById, projectIdByName, projectsSorted];\n    return ret;\n}\n\nasync function getTags(userID) {\n    let tags = [];\n\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tags\").get()\n        .then(snap => snap.docs.forEach( tag => {\n            if (tag.exists) {\n                tags.push(tag.data());\n            }\n        }\n    )).catch(console.error);\n    return tags;\n}\n\nasync function getProjectsandTags(userID) {\n    // NOTE: no longer console.error when  !project/tag.exists\n    let projectIdByName = {};\n    let projectNameById = {};\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get()   // TODO: combine database hits\n        .then(snap => snap.docs.forEach(proj => {\n            if (proj.exists) {\n                projectNameById[proj.id] = proj.data().name;\n                projectIdByName[proj.data().name] = proj.id;\n            }\n        }))\n        .catch(console.error);\n\n    let tagIdByName = {};\n    let tagNameById = {};\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tags\").get()\n        .then(snap => snap.docs.forEach(tag => {\n            if (tag.exists) {\n                tagNameById[tag.id] = tag.data().name;\n                tagIdByName[tag.data().name] = tag.id;\n            }\n        }))\n        .catch(console.error);\n\n    return [[projectNameById, projectIdByName], [tagNameById, tagIdByName]];\n}\n\nasync function getPerspectives(userID) {\n    let pInfobyName = {};\n    let pInfobyID = {};\n    let ps = [];\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"perspectives\").get()   // TODO: combine database hits\n        .then(snap => snap.docs.forEach(pstp => {\n            if (pstp.exists) {\n                pInfobyID[pstp.id] = {name: pstp.data().name, query: pstp.data().query, avail: pstp.data().avail, tord: pstp.data().tord};\n                pInfobyName[pstp.data().name] = {id: pstp.id, query: pstp.data().query, avail: pstp.data().avail, tord: pstp.data().tord};\n                ps.push({id: pstp.id, ...pstp.data()});\n            }\n        }))\n        .catch(console.error);\n\n    ps.sort((a,b) => a.order-b.order);\n\n    return [pInfobyID, pInfobyName, ps];\n}\n\nasync function modifyProject(userID, projectID, updateQuery) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function modifyTask(userID, taskID, updateQuery) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\", taskID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function modifyPerspective(userID, taskID, updateQuery) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"perspectives\", taskID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function newTask(userID, taskObj) {\n//, nameParam, descParam, deferParam, dueParam, isFlaggedParam, isFloatingParam, projectParam, tagsParam, tz\n    // Set order param. Either return the latest item in index or\n    if (taskObj.project === \"\") {\n        let ibtL = (await getInboxTasks(userID)).length;\n        taskObj.order = ibtL;\n    } else {\n        let projL = (await getProjectStructure(userID, taskObj.project)).children.length;\n        taskObj.order = projL;\n    }\n\n    // Perspectives cannot have empty defer dates\n    // But! We could set no defer to defer today.\n    if (!taskObj.defer)\n        taskObj.defer = new Date();\n\n    let taskID = (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\").add(taskObj)).id;\n\n    return taskID;\n}\n\nasync function newProject(userID, projObj, parentProj) {\n//, nameParam, descParam, deferParam, dueParam, isFlaggedParam, isFloatingParam, projectParam, tagsParam, tz\n    // Set order param. Either return the latest item in index or\n    let projL;\n    // Util func to get size of ob\n    Object.size = function(obj) {\n        var size = 0, key;\n        for (key in obj) {\n            if (obj.hasOwnProperty(key)) size++;\n        }\n        return size;\n    };\n\n    if (parentProj) {\n        projL = (await getProjectStructure(userID, parentProj)).children.length;\n        projObj.parent = parentProj;\n    } else {\n        projL = Object.size((await getTopLevelProjects(userID))[0]);\n        projObj.parent = \"\";\n    }\n    projObj.order = projL;\n    projObj.children = {};\n\n    let pid = (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").add(projObj)).id;\n    return pid;\n}\n\nasync function newPerspective(userID, pstObj) {\n    return (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"perspectives\").add({order: (await getPerspectives(userID))[2].length, ...pstObj})).id;\n}\n\nasync function newTag(userID, tagName) {\n    return (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tags\").add({name: tagName})).id;\n}\n\nasync function completeTask(userID, taskID) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\", taskID).update({\n        isComplete: true\n    });\n}\n\nasync function dissociateTask(userID, taskID, projectID) {\n    let originalChildren = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(util.dump)\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)).then(util.dump).then(t => t[0].data().children);\n\n    delete originalChildren[taskID];\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function associateTask(userID, taskID, projectID) {\n    let originalChildren = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get()\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)[0] //.filter(doc => doc.id === taskID)\n        .data().children);\n\n    originalChildren[taskID] = \"task\";\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function associateProject(userID, assosProjID, projectID) {\n    let originalChildren = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get()\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)[0] //.filter(doc => doc.id === taskID)\n        .data().children);\n\n    originalChildren[assosProjID] = \"project\";\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function dissociateProject(userID, assosProjID, projectID) {\n    let originalChildren = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(util.dump)\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)).then(util.dump).then(t => t[0].data().children);\n\n    delete originalChildren[assosProjID];\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function deleteTask(userID, taskID, willDissociateTask = true) {\n    let taskData = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\").get()\n        .then(snap => snap.docs.filter(doc => doc.id === taskID)[0].data()); // Fetch task data\n\n    if (taskData.project!== \"\" && willDissociateTask) {\n        await dissociateTask(userID, taskID, taskData.project);\n    }\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\", taskID).delete()\n        .catch(console.error);\n}\n\nasync function deletePerspective(userID, perspectiveID) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"perspectives\", perspectiveID).delete();\n}\n\nasync function deleteProject(userID, projectID) {\n    let struct = await getProjectStructure(userID, projectID)\n    for (let i of struct.children) {\n        if (i.type === \"project\") deleteProject(userID, i.content.id)\n        else modifyTask(userID, i.content, {project:\"\"});\n    }\n   \n    let cpLtTasks = await getCompletedTasks(userID);\n    const cpLt = [].concat(...cpLtTasks);\n    for (let t of cpLt)\n        if ((await getTaskInformation(userID, t)).project === projectID)\n            modifyTask(userID, t, {project:\"\"});\n\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID).delete()\n        .catch(console.error);\n}\n\nasync function deleteTag(userID, tagID) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tags\", tagID).delete()\n        .catch(console.error);\n}\n\nasync function getProjectStructure(userID, projectID, recursive=false) {\n    let children = [];\n\n    // absurdly hitting the cache with a very broad query so that the\n    // cache will catch all projects and only hit the db once\n\n    let project =  (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === projectID)[0];\n    if (!project) {\n        return { id: projectID, children: [], is_sequential: false, sortOrder: 0, parentProj: 0};\n    }\n    for (let [itemID, type] of Object.entries(project.data().children)) {\n        if (type === \"task\") {  // TODO: combine if statements\n            let task = await getTaskInformation(userID, itemID);\n            if(task){\n                if (!task.isComplete) {\n                    children.push({type: \"task\", content: itemID, sortOrder: task.order});\n                }\n            }\n           \n        } else if (type === \"project\") {\n            if (recursive) {\n                let project = await getProjectStructure(userID, itemID);\n                if(project) children.push({type: \"project\", content: project, is_sequential: project.is_sequential, sortOrder: project.sortOrder}); \n            } else {\n                let project =  (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === itemID)[0];\n                if(project) children.push({type: \"project\", content: {id: itemID}, is_sequential: project.data().is_sequential, sortOrder: project.data().order}); \n            }\n        }\n    }\n    children.sort((a,b) => a.sortOrder-b.sortOrder); //  sort by ascending order of order, TODO: we should prob use https://firebase.google.com/docs/reference/js/firebase.firestore.Query#order-by\n    return { id: projectID, children: children, is_sequential: project.data().is_sequential, sortOrder: project.data().order, parentProj: project.data().parent};\n}\n\nasync function getItemAvailability(userID) {\n    let t = new Date();\n    let tlps = (await getTopLevelProjects(userID))[2];\n    let blockstatus = {};\n    let timea = new Date();\n    async function recursivelyGetBlocks(userID, projectID) {\n        let bstat = {};\n        let project = (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === projectID)[0];\n        let projStruct = (await getProjectStructure(userID, projectID));\n        if (project.data().is_sequential) {\n            let child = projStruct.children[0];\n            if (child) {\n                if (child.type === \"project\") {\n                    Object.assign(bstat, (await recursivelyGetBlocks(userID, child.content.id)));\n                    bstat[child.content.id] = true;\n                } else if (child.type === \"task\") {\n                    bstat[child.content] = true;\n                }\n            }\n        } else {\n            let children = projStruct.children;\n            await Promise.all(children.map(async function(child) {\n                if (child.type === \"project\") {\n                    Object.assign(bstat, (await recursivelyGetBlocks(userID, child.content.id)));\n                    bstat[child.content.id] = true;\n                } else if (child.type === \"task\") {\n                    bstat[child.content] = true;\n                }\n            }));\n        }\n        return bstat;\n    };\n    await Promise.all(tlps.map(async function(p) {\n        blockstatus[p.id] = true;\n        let blocks = await recursivelyGetBlocks(userID, p.id);\n        Object.assign(blockstatus, blocks);\n    }));\n    await (await getInboxTasks(userID)).forEach((id) => blockstatus[id] = true);\n    return blockstatus;\n}\n\nasync function getCompletedTasks(userID) {\n    let completedTasks = await getTasksWithQuery(userID, util.select.all([\"isComplete\", \"==\", true]));\n    let taskItems = {};\n    await Promise.all(completedTasks.map(async function(tsk){\n        taskItems[tsk] = await getTaskInformation(userID, tsk);\n    }));\n    const cpSorted = completedTasks.sort(function(b,a) {\n        let taskA = taskItems[a];\n        let taskB = taskItems[b];\n        if (!taskA || !taskB) {\n            return 1;\n        }\n        return ((\n            (taskA.completeDate) ?\n                (taskA.completeDate.seconds) :\n                1\n        )-(\n            (taskB.completeDate) ?\n                (taskB).completeDate.seconds :\n                1\n        ));\n    });\n    let today = new Date();\n    let yesterday = new Date();\n    let thisWeek = new Date();\n    let thisMonth = new Date();\n    today.setHours(0,0,0,0);\n    yesterday.setDate(yesterday.getDate()-1);\n    yesterday.setHours(0,0,0,0);\n    thisWeek.setDate(thisWeek.getDate()-7);\n    thisWeek.setHours(0,0,0,0);\n    thisMonth.setMonth(thisMonth.getMonth()-1);\n    thisMonth.setHours(0,0,0,0);\n    let tasksToday = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= today : false;\n    });\n    let tasksYesterday = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= yesterday && new Date(tsks.completeDate.seconds * 1000) < today : false;\n    });\n    let tasksWeek = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= thisWeek && new Date(tsks.completeDate.seconds * 1000) < yesterday : false;\n    });\n    let tasksMonth = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= thisMonth && new Date(tsks.completeDate.seconds * 1000) < thisWeek : false;\n    });\n    let evenBefore = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) < thisMonth : true;\n    });\n    //console.log(tasksYesterday);\n    //console.log(tasksWeek);\n    //console.log(tasksMonth);\n    /*console.log(evenBefore);*/\n    return [tasksToday, tasksYesterday, tasksWeek, tasksMonth, evenBefore];\n}\n\nasync function onBoard(userID, tz, username, payload) {\n    // Inbox, in reverse cronological order\n    await newTask(userID, {\n            name: payload[0] + ` ${username}, ` + payload[1],\n            desc: payload[2],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await newTask(userID, {\n            name: payload[3],\n            desc: payload[4],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await newTask(userID, {\n            name: payload[5],\n            desc: payload[6],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n\n    let cdyrslf = await newProject(userID, {name: payload[7], top_level: true, is_sequential: false});\n    let npd = await newProject(userID, {name: payload[8], top_level: true, is_sequential: false});\n    let od = new Date();\n    let ds = new Date();\n    od.setHours(od.getHours() - 24);\n    ds.setHours(ds.getHours() + 20);\n    let odid = await newTask(userID, {\n            name: payload[9],\n            desc: payload[10],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: npd,\n            tags: [],\n            timezone: tz,\n            due: od,\n            repeat: {rule: \"none\"},\n        }\n    );\n    let dsID = await newTask(userID, {\n            name: payload[11],\n            desc: payload[12],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: npd,\n            tags: [],\n            timezone: tz,\n            due: ds,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, odid, npd);\n    await associateTask(userID, dsID, npd);\n    ds.setHours(ds.getHours() + 2);\n    let checkoutID = await newTask(userID, {\n            name: payload[13],\n            desc: payload[14],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    let nice = await newTask(userID, {\n            name: payload[15],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, nice, cdyrslf);\n    let sequential = await newTask(userID, {\n            name: payload[16],\n            desc: payload[17],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, sequential, cdyrslf);\n    let blocked = await newTask(userID, {\n            name: payload[18],\n            desc: payload[19],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, blocked, cdyrslf);\n    let click = await newTask(userID, {\n            name: payload[20],\n            desc: payload[21],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, click, cdyrslf);\n    let pspDir = await newTask(userID, {\n            name: payload[22],\n            desc: payload[23],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, pspDir, cdyrslf);\n    let pspsp = await newProject(userID, {name: payload[24], top_level: true, is_sequential: false});\n    let tags = await Promise.all([newTag(userID, payload[25]), newTag(userID, payload[26]), newTag(userID, payload[27]), newTag(userID, payload[28])]);\n    let specific = await newTask(userID, {\n            name: payload[29],\n            desc: payload[30],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: pspsp,\n            tags: [tags[2], tags[3]],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, specific, pspsp);\n    let sp = await newTask(userID, {\n            name: payload[31],\n            desc: payload[32],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: pspsp,\n            tags: [tags[0]],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, sp, pspsp);\n    await newPerspective(userID, {name: payload[33], query: payload[34]});\n    let promotion = await newProject(userID, {name: payload[35], top_level: true, is_sequential: false});\n    let online = await newTask(userID, {\n            name: payload[36],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, online, promotion);\n    let dis = await newTask(userID, {\n            name: payload[37],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, dis, promotion);\n    let patreon = await newTask(userID, {\n        name: payload[38],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, patreon, promotion);\n    let yiipee = await newTask(userID, {\n        name: payload[39],\n            desc: payload[40],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, yiipee, promotion);\n}\n\nexport default {util, getTasks, getTasksWithQuery, getInboxTasks, getDSTasks, getInboxandDS, removeParamFromTask, getTopLevelProjects, getProjectsandTags, getPerspectives, modifyProject, modifyTask, modifyPerspective, newProject, newPerspective, newTag, newTask, completeTask, dissociateTask, associateTask, associateProject, dissociateProject, deleteTask, deletePerspective, deleteProject, selectTasksInRange, getProjectStructure, getItemAvailability, getTaskInformation, getDSRow, deleteTag, getCompletedTasks, onBoard, getTags, generateWorkspace, getWorkspace, getWorkspaces};\n\nexport { setWorkspaceMode };\n\n\n","import dbObj from \"./ObjectManager\";\n\nconst perspectiveHandler = function(){\n    let cgs = {\n        taskFilter: /([^\\w\\d\\s\\[]{1,2}[\\w\\s]+)/gi,\n        taskCaptureGroup: /\\[(([^\\w\\d\\s]{1,2}[\\w\\s]+) *)*?\\]/gi,\n        logicCaptureGroup: /(.*) *([<=>]) *(.*)/gi,\n        globalCaptureGroup: /\\[(([^\\w\\d\\s]{1,2}[\\w\\s]+) *)*?\\](\\$\\w+)* *[<=>]* * *(\\$\\w+)*/gi,\n        clear: function() {\n            this.taskFilter.lastIndex = 0;\n            this.taskCaptureGroup.lastIndex = 0;\n            this.logicCaptureGroup.lastIndex = 0;\n            this.globalCaptureGroup.lastIndex = 0;\n        }\n    };\n\n    let getCaptureGroups = (str) => str.match(cgs.globalCaptureGroup);\n\n    let parseTaskCaptureGroup = (str) => (str.split(\"$\").map(i=>i.trim()));\n\n    let parseSpecialVariables = function(...val) {\n        let vr;\n        switch(val[0]) {\n           case \"today\":\n               vr = new Date();\n               break;\n        }\n        return vr;\n    };\n\n    let compileTask = async function(uid, str, pPaT, additionalFilter, isWorkspace) {\n        let queries = additionalFilter ? [additionalFilter] : [];\n        let taskCache = [];\n        let antiCache = [];\n        await Promise.all(str.match(cgs.taskFilter).map(async function(e) {\n            e = e.trim();\n            if (e[0] !== \"!\") {\n                switch (e[0]) {\n                    case \".\":\n                        let pid = pPaT[0][1][e.slice(1, e.length)];\n                        queries.push(['project', '==', pid]);\n                        let pS = await dbObj.getProjectStructure(uid, pid, false, isWorkspace);\n                        for (let i of pS.children)\n                            if (i.type === \"project\")\n                                taskCache = [...taskCache, ...(await compileTask(uid, str.replace(e.slice(1, e.length), pPaT[0][0][i.content.id]), pPaT, additionalFilter))];\n                        break;\n                    case \"#\":\n                        queries.push(['tags', 'has',  pPaT[1][1][e.slice(1, e.length)]]);\n                }\n            } else {\n                switch (e[1]) {\n                    case \".\":\n                        let pid = pPaT[0][1][e.slice(2, e.length)];\n                        queries.push(['project', '!=', pid]);\n\n                        let pS = await dbObj.getProjectStructure(uid, pid, false, isWorkspace);\n                        for (let i of pS.children)\n                            if (i.type === \"project\")\n                                antiCache = [...antiCache, ...(await compileTask(uid, str.replace(e, \".\"+pPaT[0][0][i.content.id]), pPaT, additionalFilter, isWorkspace))];\n                        break;\n                    case \"#\":\n                        queries.push(['tags', '!has',  pPaT[1][1][e.slice(2, e.length)]]);\n                }\n            }\n            queries.push(['isComplete', '==', false]);\n        }));\n        return [...taskCache, ...(await dbObj.getTasksWithQuery(uid, dbObj.util.select.all(...queries), isWorkspace))].filter(i=>(!antiCache.includes(i)));\n    };\n\n    let compileLogicCaptureGroup = async function(uid, tasks, cmp, value, ltr, isWorkspace=false) {\n        let taskInfo = await Promise.all(tasks[0].map(async function(t){\n            return [await dbObj.getTaskInformation(uid, t, isWorkspace), t];\n        }));\n        let taskCompValues;\n        // TODO: add more?\n        if (tasks[1].includes(\"due\")) {\n            taskCompValues = taskInfo.map(t => [t[1], (t[0].due ? new Date((t[0].due.seconds)*1000) : undefined)]);\n        } else if (tasks[1].includes(\"defer\")) {\n            taskCompValues = taskInfo.map(t => [t[1], (t[0].defer ? new Date((t[0].defer.seconds)*1000) : undefined)]);\n        }\n        let filteredResults;\n        let util_datesequal = function(dateA, dateB) {\n            return dateA.getFullYear() === dateB.getFullYear() && dateA.getMonth() === dateB.getMonth() && dateA.getDate() === dateB.getDate();\n        };\n        switch (cmp) {\n            case \"=\":\n                taskCompValues = taskCompValues.filter(t=>util_datesequal(t[1], value));\n                break;\n            case \">\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] > value) : taskCompValues = taskCompValues.filter(t => t[1] < value);\n                break;\n            case \"<\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] < value) : taskCompValues = taskCompValues.filter(t => t[1] > value);\n                break;\n            case \">=\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] >= value) : taskCompValues = taskCompValues.filter(t => t[1] <= value);\n                break;\n            case \"<=\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] <= value) : taskCompValues = taskCompValues.filter(t => t[1] >= value);\n                break;\n\n        }\n        return (taskCompValues.map(t => t[0]));\n    };\n\n    let getPerspectiveFromString = async function(uid, pStr, filter, order, isWorkspace=false) {\n        let pPaT = await dbObj.getProjectsandTags(uid, isWorkspace);\n        let pRes = await getCaptureGroups(pStr);\n        if (!pRes) {\n            return [];\n        }\n        let fquery; \n        switch (filter) {\n            case \"avail\":\n                fquery = [\"defer\", \"<\", ((new Date()).getTime())/1000];\n                break;\n            case \"flagged\":\n                fquery = [\"isFlagged\", \"==\", true];\n                break;\n        }\n        let tasks = await Promise.all(pRes.map(async function(i) {\n            cgs.clear();\n            let logicSort = cgs.logicCaptureGroup.exec(i);\n            let t;\n            if(logicSort) {\n                // handle logic group\n                let [, lhs, cmp, rhs] = logicSort;\n                [lhs, rhs] = [parseTaskCaptureGroup(lhs), parseTaskCaptureGroup(rhs)];\n                if (cgs.taskCaptureGroup.test(lhs)) {\n                    lhs = [await compileTask(uid, lhs[0], pPaT, fquery, isWorkspace), lhs[1]];\n                    rhs = parseSpecialVariables(rhs[1]);\n                    t = (await compileLogicCaptureGroup(uid, lhs, cmp, rhs, true, isWorkspace)); // true (that is, left to right order)\n                } else {\n                    rhs = [await compileTask(uid, rhs[0], pPaT, fquery, isWorkspace), rhs[1]];\n                    lhs = parseSpecialVariables(lhs[1]);\n                    t = (await compileLogicCaptureGroup(uid, rhs, cmp, lhs, false, isWorkspace)); // false (that is, right to left order)\n                }\n            } else {\n                // handle standard group\n                t = (await compileTask(uid, i, pPaT, fquery, isWorkspace));\n            }\n            return t;\n        }));\n        tasks = [...new Set(tasks.flat(1))];\n        let taskObjs = await Promise.all(tasks.map(async function(t){\n            return {id: t, ...(await dbObj.getTaskInformation(uid, t, isWorkspace))}\n        })).then(values=>values);\n        switch (order) {\n            case \"duas\":\n                taskObjs.sort((a,b)=>(a.due?a.due.seconds:10000000000)-(b.due?b.due.seconds:10000000000));\n                break;\n            case \"duds\":\n                taskObjs.sort((a,b)=>(b.due?b.due.seconds:1)-(a.due?a.due.seconds:1));\n                break;\n            case \"deas\":\n                taskObjs.sort((a,b)=>(a.defer?a.defer.seconds:10000000000)-(b.defer?b.defer.seconds:10000000000));\n                break;\n            case \"deds\":\n                taskObjs.sort((a,b)=>(b.defer?b.defer.seconds:1)-(a.defer?a.defer.seconds:1));\n                break;\n\n        }\n        // Final availability filter for sequential\n        let aval = await dbObj.getItemAvailability(uid, isWorkspace);\n        if (filter === \"avail\") taskObjs = taskObjs.filter(it => (aval[it.id] !== undefined)); \n        return taskObjs.map(t=>t.id);\n    };\n\n    return {calc: getPerspectiveFromString};\n}();\n\nexport default perspectiveHandler;\n\n","import dbFuncs, { setWorkspaceMode } from \"./src/ObjectManager\"\nimport pspObj from \"./src/PerspectiveManager\"\nimport dbRefObj from \"./src/DBManager\"\n\n\nexport default {start:dbRefObj.__init__, use:dbRefObj.useDb, db: dbFuncs, perspective: pspObj, flush: dbRefObj.flush, workspaceify: ()=>setWorkspaceMode(true), userlandify: ()=>setWorkspaceMode(false)};\n\n","import { Plugins } from '@capacitor/core';\nimport { getPlatforms } from '@ionic/react';\n\nconst { parseFromTimeZone } = require('date-fns-timezone')\n\nconst { LocalNotifications, Permissions } = Plugins;\n\n/* AutoBind */\nconst autoBind = require('auto-bind/react');\n\nclass Gruntman {\n\n    /*\n     * Hello human,\n     * good afternoon.\n     * I am gruntman.\n     *\n     * Register refreshers with me\n     * so I could handle refreshes.\n     *\n     * Do actions with me\n     * so I could reverse them.\n     *\n     * Undo happens from me\n     * refresh happens from me.\n     *\n     *\n     * @jemoka\n     *\n     */\n\n    constructor(engine) {\n        this.notifPermissionGranted = false;\n        Permissions.query({name: \"notifications\"}).then((async function (e) {\n            if (e.state === \"prompt\")\n                this.notifPermissionGranted = (await LocalNotifications.requestPermission()).granted;\n            else if (e.state === \"granted\")\n                this.notifPermissionGranted = true;\n\n            let platforms = getPlatforms();\n            if (this.notifPermissionGranted && !platforms.includes(\"mobileweb\") && !platforms.includes(\"desktop\")) {\n                // notification specific setup\n                //\n                // TODO TODO TODO TODO TODO TODO TODO TODO\n                //\n\n                //LocalNotifications.registerActionTypes({types: [{id: \"completeOrSnooze\", actions: [{id:\"complete\", title: \"LOCALIZE: Complete\", requiresAuthentication: \"true\", foreground: \"false\"}, {id:\"snooze\", title: \"LOCALIZE: Snooze\", requiresAuthentication: \"true\", foreground: \"false\"}]}]});\n            }\n            LocalNotifications.addListener(\"localNotificationActionPerformed\", this.handleNotificationAction);\n        }).bind(this));\n\n        this.hashCode = s => Math.abs(s.split('').reduce((a,b)=>{a=((a<<5)-a)+b.charCodeAt(0);return a&a},0));\n\n        this.e = engine;\n        this.refresher = ()=>{};\n        this.callbackRefresherReleased = true; // prevent live callback merge conflicts\n        this.conflictResolution = 1000; // 1000 ms = 1s worth of conflict time.\n        this.releaseTimeout = undefined;\n\n        this.doers = {\n            macro: {\n                applyOrder: async function (options) {\n                    // TODO undo handler?\n                    if (options.items.length !== options.order.length) \n                        console.error(\"Length of items and order length must be the same!\")\n                    await Promise.all(options.order.map((e,i) => {\n                        let item = options.items[e];\n                        if (item.type === \"task\") \n                            return engine.db.modifyTask(options.uid, item.content, {order: i});\n                        else if (item.type === \"project\")\n                            return engine.db.modifyProject(options.uid, item.content, {order: i});\n                            //await engine.db.modifyProject(options.uid, e.content, {order: options.order[i]});\n                    }));\n                    return {uid:options.uid}; // TODO HANDLE UNDO\n                }\n            },\n            tag: {\n                create: async function (options) {\n                    let newTag = await engine.db.newTag(options.uid, options.name);\n                    return {uid: options.uid, id: newTag};\n                }\n            },\n            task: {\n                create: async function (options) {\n                    let ntObject = {\n                        desc: \"\",\n                        isFlagged: false,\n                        isFloating: false,\n                        isComplete: false,\n                        project: options.pid?options.pid:\"\",\n                        tags: [],\n                        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n                        repeat: {rule: \"none\"},\n                        name: options.name?options.name:\"\",\n                    };\n\n                    if (options.due)\n                        ntObject.due = options.due\n                    if (options.defer)\n                        ntObject.defer = options.defer\n\n                    let ntID = await engine.db.newTask(options.uid, ntObject)\n\n                    if (options.pid && options.pid != \"\")\n                        engine.db.associateTask(options.uid, ntID, options.pid);\n\n                    return {uid: options.uid, tid: ntID};\n                },\n                update: async function (options) {\n                    let tInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, options.query)\n\n                    return {uid: options.uid, tid: options.tid, tInfo};\n                },\n                update__project:  async function (options) {\n                    let tInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, {project: options.project})\n\n                    if (options.oldProject)\n                        await engine.db.dissociateTask(options.uid, options.tid, options.oldProject);\n\n                    if (options.project !== \"\")\n                        await engine.db.associateTask(options.uid, options.tid, options.project);\n\n                    return {uid: options.uid, tid: options.tid, tInfo};\n                },\n                update__uncomplete: async function (options) {\n                    let taskInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, {isComplete: false, completeDate: new Date()});\n                    return {uid: options.uid, tid: options.tid, taskInfo};\n                },\n                update__complete: async function (options) {\n                    await engine.db.modifyTask(options.uid, options.tid, {isComplete: true, completeDate: new Date()})\n                    let taskInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    let due = (\n                        taskInfo.due ?\n                        (taskInfo.isFloating ?\n                            new Date(taskInfo.due.seconds*1000) :\n                            parseFromTimeZone(\n                                (new Date(taskInfo.due.seconds*1000)).toISOString(),\n                                {timeZone: taskInfo.timezone}\n                            )\n                        ):\n                        undefined\n                    );\n                    let defer = (\n                        taskInfo.defer ?\n                        (taskInfo.isFloating ?\n                            new Date(taskInfo.defer.seconds*1000) :\n                            parseFromTimeZone(\n                                (new Date(taskInfo.defer.seconds*1000)).toISOString(),\n                                {timeZone: taskInfo.timezone}\n                            )\n                        ): undefined\n                    );\n                    let repeat = taskInfo.repeat;\n                    if (repeat.rule !== \"none\" && due) {\n                        let rRule = repeat.rule;\n                        if (rRule === \"daily\") {\n                            if (defer) {\n                                let defDistance = due-defer;\n                                due.setDate(due.getDate() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                due.setDate(due.getDate() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n\n                        } else if (rRule === \"weekly\") {\n                            if (defer) {\n                                let rOn = repeat.on;\n                                let current = \"\";\n                                let defDistance = due-defer;\n                                if (rOn) {\n                                    while (!rOn.includes(current)) {\n                                        due.setDate(due.getDate() + 1);\n                                        let dow = due.getDay();\n                                        switch (dow) {\n                                            case 1:\n                                                current = \"M\";\n                                                break;\n                                            case 2:\n                                                current = \"T\";\n                                                break;\n                                            case 3:\n                                                current = \"W\";\n                                                break;\n                                            case 4:\n                                                current = \"Th\";\n                                                break;\n                                            case 5:\n                                                current = \"F\";\n                                                break;\n                                            case 6:\n                                                current = \"S\";\n                                                break;\n                                            case 0:\n                                                current = \"Su\";\n                                                break;\n                                        }\n                                    }\n                                } else {\n                                    due.setDate(due.getDate()+7);\n                                    defer.setDate(defer.getDate()+7);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                let rOn = repeat.on;\n                                if (rOn) {\n                                    let current = \"\";\n                                    while (!rOn.includes(current)) {\n                                        due.setDate(due.getDate() + 1);\n                                        let dow = due.getDay();\n                                        switch (dow) {\n                                            case 1:\n                                                current = \"M\";\n                                                break;\n                                            case 2:\n                                                current = \"T\";\n                                                break;\n                                            case 3:\n                                                current = \"W\";\n                                                break;\n                                            case 4:\n                                                current = \"Th\";\n                                                break;\n                                            case 5:\n                                                current = \"F\";\n                                                break;\n                                            case 6:\n                                                current = \"S\";\n                                                break;\n                                            case 0:\n                                                current = \"Su\";\n                                                break;\n                                        }\n                                    }\n                                } else {\n                                    due.setDate(due.getDate()+7);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n                        } else if (rRule === \"monthly\") {\n                            if (defer) {\n                                let rOn = repeat.on;\n                                let dow = due.getDate();\n                                let oDow = due.getDate();\n                                let defDistance = due-defer;\n                                if (rOn) {\n                                    while ((!rOn.includes(dow.toString()) && !(rOn.includes(\"Last\") && (new Date(due.getFullYear(), due.getMonth(), due.getDate()).getDate() === new Date(due.getFullYear(), due.getMonth()+1, 0).getDate()))) || (oDow === dow)) {\n                                        due.setDate(due.getDate() + 1);\n                                        dow = due.getDate();\n                                    }\n                                } else {\n                                    due.setMonth(due.getMonth()+1);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                let rOn = repeat.on;\n                                if (rOn) {\n                                    let dow = due.getDate();\n                                    let oDow = due.getDate();\n                                    while ((!rOn.includes(dow.toString()) && !(rOn.includes(\"Last\") && (new Date(due.getFullYear(), due.getMonth(), due.getDate()).getDate() === new Date(due.getFullYear(), due.getMonth()+1, 0).getDate()))) || (oDow === dow)) {\n                                        due.setDate(due.getDate() + 1);\n                                        dow = due.getDate();\n                                    }\n                                } else {\n                                    due.setMonth(due.getMonth()+1);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n                        } else if (rRule === \"yearly\") {\n                            if (defer) {\n                                let defDistance = due-defer;\n                                due.setFullYear(due.getFullYear() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                due.setFullYear(due.getFullYear() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n\n                        }\n                    }\n                    return {message: \"Todo TODO TODO Todo: undo pack?\"}\n                }\n            },\n            project: {\n                create: async function (options) { // create project\n                    let projObj = {\n                        name: \"\",\n                        top_level: options.parent === undefined,\n                        is_sequential: false,\n                    };\n                    let npid = options.parent ? await engine.db.newProject(options.uid, projObj, options.parent) : await engine.db.newProject(options.uid, projObj) // make a project... with or without a parent\n                    if (options.parent) {\n                        engine.db.associateProject(options.uid, npid, options.parent);\n                    }// associate the two\n                    return {uid: options.uid, pid: npid}\n                },\n                delete: async function (options) {\n                    await engine.db.deleteProject(options.uid, options.pid);\n                    if (options.parent)\n                        engine.db.dissociateProject(options.uid, options.pid, options.parent);\n\n                    return {uid: options.uid, TODO: \"TODO\"} // TODO: how do we undelete a project?\n                },\n                update__name: async function (options) { // update the project name!\n                    let possibleProjects = await engine.db.getProjectsandTags(options.uid);\n                    // get all possible project\n                    let projectName = possibleProjects[0][0][options.id]\n                    // get the one we want based on page id\n\n                    // modify the project\n                    await engine.db.modifyProject(options.uid, options.id, {name: options.name});\n                    // return what we need to undo\n                    return {projectName, uid: options.uid}\n                },\n                update__pstate: async function (options) { // update the project name!\n                    let currentProject = await engine.db.getProjectStructure(options.uid, options.id, false); // get current project info\n                    // get all possible project\n                    let is_sequential = currentProject;\n                    // get the one we want based on page id\n\n                    // modify the project\n                    await engine.db.modifyProject(options.uid, options.id, {is_sequential: options.is_sequential});\n                    // return what we need to undo\n                    return {is_sequential, uid: options.uid}\n                },\n                associate:  async function (options) {\n                    //await engine.db.modifyTask(options.uid, options.tid, options.query)\n                    await engine.db.associateTask(options.uid, options.tid, options.pid);\n                    return {uid: options.uid, tid: options.tid};\n                },\n                dissociate:  async function (options) {\n                    //await engine.db.modifyTask(options.uid, options.tid, options.query)\n                    await engine.db.dissociateTask(options.uid, options.tid, options.pid);\n                    return {uid: options.uid, tid: options.tid};\n                }\n            },\n            perspective: {\n                create: async function(options) {\n                    let pObj = {\n                        name: \"\",\n                        avail: \"remain\",\n                        tord: \"duds\",\n                        query: \"\"\n                    }\n                    let npspid = await engine.db.newPerspective(options.uid, pObj);\n                    return {uid: options.uid, pid: npspid};\n                },\n                update__perspective: async function (options) { // update the perspective name!\n                    let possiblePerspectives = await engine.db.getPerspectives(options.uid);\n                    // get all possible perspectives\n                    let perspectiveObject = possiblePerspectives[0][options.id]\n                    // get the one we want based on page id\n\n                    // modify the perspective\n                    await engine.db.modifyPerspective(options.uid, options.id, options.payload);\n\n                    // return what we need to undo\n                    return {perspectiveObject, uid: options.uid}\n                },\n\n                delete__perspective: async function (options) { // update the perspective name!\n                    console.log(\"perspective delete gruntman func\")\n                    // TODO: is this it? @jack\n                    await engine.db.deletePerspective(options.uid, options.id);\n                }\n            },\n        } // type:action:functionaction (return resources)\n        this.undoers = {\n            task: {\n                update: \"task.set\"\n            }\n        } // action: string\n        this.backlog = []; // actionID\n        this.undolog = []; // actionID\n        this.taskLog = {\n        } // actionID: [type, resources]\n        this.canUndo = {\n            task: {\n                update: true,\n            }\n        }\n        this.schedulers = {\n        } // util function onChange fixer-upper\n        this.updateLock = false;\n        this.updateInterval = undefined;\n\n        // @core-devs will not approve but I am secretly hiding\n        // a copy of localized strings in gruntman\n        this.secretLocalizedStrings = {};\n\n        // And AutoBind any and all functions\n        autoBind(this);\n    }\n\n    get localizations() {\n        return this.secretLocalizedStrings;\n    }\n\n    set localizations(value) {\n        this.secretLocalizedStrings = value;\n    }\n\n    halt() {\n        for (let key in this.schedulers)\n            clearTimeout(this.schedulers[key])\n        //this.refresher = ()=>{}; TODO TODO may cause memory leaks in _very_ narrow circumstances but uncomming will break project toggles due to refresher mounting too quickly\n        if (this.updateInterval)\n            clearTimeout(this.updateInterval);\n        this.updateInterval = undefined;\n    }\n\n    lockUpdates() {\n        this.updateLock = true;\n        if (this.updateInterval)\n            clearTimeout(this.updateInterval);\n        this.updateInterval = undefined;\n    }\n\n    unlockUpdates(interval=580) {\n        this.updateLock = false;\n        this.updateInterval = setTimeout(this.refresher, interval);\n    }\n\n    requestRefresh() {\n        if (!this.updateLock && this.callbackRefresherReleased)\n            this.refresher();\n    }\n\n    async scheduleNotification(id, uid, title, desc, time) {\n        return await LocalNotifications.schedule({\n            notifications: [\n                {\n                    title: title,\n                    body: desc,\n                    schedule: { at: time},\n                    sound: null,\n                    id: this.hashCode(id),\n                    attachments: [`${id}`, `${uid}`],\n                    extra: uid,\n                }\n            ]\n        });\n    }\n\n    async handleNotificationAction(action) {\n        let [taskID, userID] = action.notification.attachments;\n        switch (action.actionId) {\n            case \"complete\":\n                // TODO TODO\n                this.do(\"task.update__complete\", { uid: userID, tid: taskID}, true)\n                break;\n            case \"snooze\":\n                // TODO TODO\n                taskID = action.notification.attachments;\n                userID = action.notification.extra;\n                break;\n        }\n    }\n\n    async cancelNotification(id) {\n        return await LocalNotifications.cancel({notifications: [{id:`${this.hashCode(id)}`}]});\n    }\n\n    async checkNotification(id) {\n        let expectedID = this.hashCode(id);\n        let pending = await LocalNotifications.getPending();\n        let needed = pending.notifications.map(e=>e.id).filter(e=>e==expectedID); // two equal signs to ignore type\n        return needed.length > 0;\n    }\n\n    /*\n     * @param refresher: refresher function to refresh what you registered\n     */\n\n    registerRefresher(r) {\n        this.refresher = r;\n        // lock updates every time a new page loads to prevent MeRGE Conflicts\n        if(this.releaseTimeout) clearTimeout(this.releaseTimeout);\n        this.callbackRefresherReleased= false;\n        this.releaseTimeout = setTimeout(()=>{this.callbackRefresherReleased=true; this.releaseTimeout=undefined}, this.conflictResolution);\n    }\n\n    registerScheduler(callback, identifier, wait=500) {\n        if (this.schedulers[identifier])\n            clearTimeout(this.schedulers[identifier]); // clear the timeout\n        this.schedulers[identifier] = setTimeout(callback, wait);\n    }\n\n    async do(actionName, options, bypassUpdates, isUndo, unsafe_FORCE_UPDATES) {\n        /*\n         * @param actionName => action directive like task.edit or project.create\n         * @param options => options\n         *\n         */\n\n        // Lock updates every time cacheRef is called to prevent mErGE ConFLIcTS\n        if(this.releaseTimeout) clearTimeout(this.releaseTimeout);\n        this.callbackRefresherReleased= false;\n        this.releaseTimeout = setTimeout(()=>{this.callbackRefresherReleased=true; this.releaseTimeout=undefined}, this.conflictResolution);\n\n        let actionID = this.random();\n\n        let nodes = actionName.split(\".\");\n\n        let action = this.doers;\n        while (nodes.length > 0) {\n            action = action[nodes.shift()];\n        }\n\n        if (isUndo) this.undolog.push(actionID);\n        else this.backlog.push(actionID);\n\n        let resources = await action(options);\n\n        this.taskLog[actionID] = [actionName, resources];\n\n        if (!this.updateLock && !bypassUpdates)\n            this.refresher();\n\n        if (unsafe_FORCE_UPDATES)\n            this.refresher();\n\n        return await resources;\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n}\n\nexport default Gruntman;\n\n","import React, { Component } from 'react';\nimport { Plugins } from '@capacitor/core';\n// Firebase App (the core Firebase SDK) is always required and must be listed first\nimport * as firebase from \"firebase/app\";\n\n// Add the Firebase products that you want to use\nimport \"firebase/auth\";\n\nimport $ from \"jquery\";\n\n\nimport './Auth.css';\n\n\nimport '../themefiles/condutiontheme-default.css';\nimport '../themefiles/condutiontheme-default-dark.css';\nimport '../themefiles/condutiontheme-default-light.css';\nimport '../themefiles/condutiontheme-default-adapter.css';\n\n\n\nconst autoBind = require('auto-bind/react');\n\n\nconst { Storage } = Plugins;\n\nclass Auth extends Component {\n    constructor(props) {\n        super(props);\n\n        let greetings = this.props.localizations.greetings_setB;\n\n        /*\n         * mode 0 = login in progress, \n         *      1 = new account in progress,\n         *      2 = recovery in progress, \n         *      3 = email unverified,\n         *      4 = email verified, proceed create\n         *      5 = recovery executed, shepeard them back\n         *\n         */\n\n        this.state = {\n            authMode: 0,\n            showExtra: false,\n            greeting: greetings[Math.floor(Math.random() * greetings.length)]\n        };\n\n        autoBind(this);\n    }\n\n    doLogin() {\n        let view = this;\n        firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\n            firebase.auth().signInWithEmailAndPassword($(\"#email\").val(), $(\"#password\").val()).then(function() {\n                if (firebase.auth().currentUser.emailVerified)\n                     view.props.dispatch({service: \"firebase\", operation: \"login\"});\n                else\n                    view.setState({authMode: 3});\n            }).catch(function(error) {\n                    // Handle Errors here.\n                    const errorCode = error.code;\n                    const errorMessage = error.message;\n                    console.log(error);\n                    $(\".auth-upf\").addClass(\"wrong\");\n            });\n        });\n    }\n\n    doCreate() {\n        // TODO: actually create the account\n        let view = this;\n        let problem = false;\n        firebase.auth().createUserWithEmailAndPassword($(\"#email\").val(), $(\"#password\").val()).catch(function(error) {\n            view.setState({showExtra: true}, ()=>$('#need-verify').html(error.message));\n            problem=true;\n        }).then(function() {\n            if (!problem) {\n                firebase.auth().currentUser.sendEmailVerification();\n                firebase.auth().currentUser.updateProfile({displayName: $(\"#name\").val()});\n                view.setState({authMode: 4, showExtra: true});\n            }\n        })\n    }\n\n    dispatchCreate() {\n        firebase.auth().currentUser.reload().then(()=>{;\n            if (firebase.auth().currentUser.emailVerified)\n                this.props.dispatch({service: \"firebase\", operation: \"create\"});\n            else\n                $('#need-verify').html(\"Please double-check that you tapped the verification link in your email.\");\n        });\n    }\n\n    doRecover() {\n        let problem = false;\n        let view = this;\n        firebase.auth().sendPasswordResetEmail($(\"#email\").val()).catch(function(error) {\n            view.setState({showExtra: true});\n            $('#need-verify').html(error.message);\n            problem=true;\n        }).then(function() {\n            if (!problem) {\n                view.setState({authMode: 5});\n            }\n        })\n        // TODO: actually recover the account\n    }\n\n    doLocal() {\n        this.props.dispatch({service: \"json\", operation: \"login\"});\n    }\n\n    render() {\n        return (\n            <div id=\"auth-content-wrapper\">\n                <div id=\"auth-left-menu\">\n                    <div className=\"menu-area\" style={{height:\"100%\"}}>\n                        <div className=\"auth-component\"></div>\n                        <div className=\"auth-component\"></div>\n                        <span id=\"auth-image-credit\">Image by <span style={{fontWeight: 500}}>Tobias Keller/Paweł Czerwiński</span></span>\n                    </div>\n                </div>\n                <div id=\"authwall\">\n                    <h1 id=\"greeting-auth\">{this.state.greeting}</h1><span id=\"welcome-auth-msg\">{this.props.localizations.welcome_auth_msg}</span>\n                    <h3 className=\"greeting-auth-subtitle\" id=\"greeting-auth-normal\">{(()=>{\n                        switch (this.state.authMode) {\n                            case 2:\n                                return this.props.localizations.nowirres;\n                            default:\n                                return this.props.localizations.greeting_auth_normal;\n\n                        }\n                    })()}</h3> \n                    <input className=\"auth-upf\" id=\"name\" type=\"text\" autoComplete=\"off\" defaultValue=\"\" placeholder={this.props.localizations.what_should_we} style={{display: this.state.authMode === 1 ? \"block\" : \"none\"}}/>\n                    <input className=\"auth-upf\" id=\"email\" type=\"email\" autoComplete=\"off\" defaultValue=\"\" placeholder={this.props.localizations.email} />\n                    <input className=\"auth-upf\" id=\"password\" type=\"password\" autoComplete=\"off\" defaultValue=\"\" placeholder={this.props.localizations.password} style={{display: this.state.authMode !== 2 ? \"block\" : \"none\"}} onKeyPress={(event)=>{\n                        if (event.key === \"Enter\") {\n                            switch (this.state.authMode) {\n                                case 0:\n                                    this.doLogin();\n                                    break;\n                                case 1:\n                                    this.doCreate();\n                                    break;\n                                case 2:\n                                    this.doRecover();\n                                    break;\n                                case 4:\n                                    this.dispatchCreate();\n                                    break;\n                                case 5: \n                                    this.doLogin();\n                                    break;\n                            }\n                        }\n                    }}/>\n                    {(() => {\n                        if (this.state.authMode === 3 || this.state.authMode ===  4 || this.state.authMode === 5 || this.state.showExtra) return <span id=\"need-verify\">\n                            {(()=>{\n                                switch(this.state.authMode){\n                                    case 3:\n                                        return this.props.localizations.need_and_do;\n                                    case 4:\n                                        return this.props.localizations.need_verify;\n                                    case 5:\n                                        return this.props.localizations.need_and_login;\n\n                            }})()}\n                        </span>\n                    })()}\n                    <span id=\"recover-password\" style={{display: this.state.authMode === 3 ? \"none\" : \"block\"}} onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 2:\n                                    return this.setState({authMode: 0});\n                                default:\n                                    return this.setState({authMode: 2});\n\n                            }\n                        }}>{(()=>{\n                            switch (this.state.authMode) {\n                                case 2:\n                                    return this.props.localizations.remembered;\n                                default:\n                                    return this.props.localizations.rec_pswd;\n\n                            }\n                        })()}</span>\n                    <div id=\"auth-actiongroup\">\n                        <div id=\"newuser\" onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 1:\n                                    return this.setState({authMode: 0});\n                                default:\n                                    return this.setState({authMode: 1});\n\n                            }\n                        }}>{(()=>{\n                            switch (this.state.authMode) {\n                                case 1:\n                                    return this.props.localizations.login;\n                                default:\n                                    return this.props.localizations.newuser;\n\n                            }\n                        })()}</div>\n                        <div id=\"login\" onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 0:\n                                    this.doLogin();\n                                    break;\n                                case 1:\n                                    this.doCreate();\n                                    break;\n                                case 2:\n                                    this.doRecover();\n                                    break;\n                                case 4:\n                                    this.dispatchCreate();\n                                    break;\n                            }\n                        }}>\n                            <i className=\"fas fa-snowboarding\" style={{paddingRight: \"5px\"}}></i><span id=\"login-text\">{(() => {\n                                switch(this.state.authMode) {\n                                    case 0:\n                                    case 3:\n                                        return this.props.localizations.lds;\n                                    case 1:\n                                        return this.props.localizations.verifem;\n                                    case 2:\n                                        return this.props.localizations.lerec;\n                                    case 4:\n                                        return this.props.localizations.proceed;\n                                    case 5:\n                                        return this.props.localizations.proceed;\n                                }\n                            })()}</span>\n                        </div>\n                        {(() => {\n                            if (this.state.authMode !== 2) return <div className=\"convert-src\" id=\"ulac\" onClick={this.doLocal}>{this.props.localizations.ulac}</div>\n                        })()}\n                    </div>\n                </div>\n            </div>\n      );\n    }\n}\n\nexport default Auth;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport Lottie from 'react-lottie';\nimport './Pages.css';\n\nconst LoadSpinner = require('../static/load.json');\n\nconsole.log(LoadSpinner);\n\nconst autoBind = require('auto-bind/react');\n\nconst defaultOptions = {\n    loop: true,\n    autoplay: true, \n    animationData: LoadSpinner,\n    rendererSettings: {\n        preserveAspectRatio: 'xMidYMid slice'\n    }\n};\n\nfunction Loader(props) {\n    return (\n        <div style={{width: \"100%\", height: \"100%\", position: \"absolute\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Lottie options={defaultOptions}\n                height={50}\n                width={50}\n                isStopped={false}\n                isPaused={false}\n            />\n            <div style={{position: \"absolute\", bottom: 15, color: \"var(--decorative-light-alt)\", fontSize: 11}}>\n                ©2019-2020 Shabang Systems, LLC and the Condution Authors. Software released under GNU-GPLv3.\n            </div>\n        </div>\n    )\n}\n\nexport default Loader;\n\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Pages.css';\n\nconst autoBind = require('auto-bind/react');\n\nfunction Onboarding(props) {\n    return (\n        <div style={{width: \"100%\", height: \"100%\", position: \"absolute\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", color:\"var(--content-normal-accent)\"}}>\n            <div style={{marginRight: 20, maxWidth: 500}}>\n                <b>Condution v1.0.0-alpha.0</b> <br />\n                <i>ONBOARDING VIEW!! Woo hoo!</i> <br /> \n                <span>Arn't you excited to get an account</span> <br /> \n                <span>at a random todo list app?</span> <br /> \n            </div>\n            <div style={{marginLeft: 20, maxWidth: 500}}>\n                <br />\n\n                <pre style={{fontSize: 10, color:\"var(--content-normal-alt)\"}}>\n                    {`\n    Copyright (C) 2019-2020. Shabang Systems, LLC\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see https://www.gnu.org/licenses/.\n                    `}\n                </pre>\n            </div>\n\n        </div>\n    )\n}\n\nexport default Onboarding;\n\n","/* Global Imports */\nimport React, { Component } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet, IonMenu, setupConfig } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Themefiles */\nimport './themefiles/condutiontheme-default-adapter.css';\nimport './themefiles/condutiontheme-default.css';\nimport './themefiles/condutiontheme-default-dark.css';\nimport './themefiles/condutiontheme-default-light.css';\n//import './themefiles/condutiontheme-default-new.css';\nimport './themefiles/condutiontheme-black-n-red.css';\n\n/* Font awesome */\nimport './static/fa/scripts/all.min.css';\n\n/* Theme variables */\nimport './theme/variables.css';\n\n/* Capacitor core plugins + jQuery */\nimport { Plugins } from '@capacitor/core';\nimport $ from \"jquery\";\n\n/* Our Lovley Core Engine */\nimport Engine from './backend/CondutionEngine';\nimport Gruntman from './gruntman';\n\n/* Firebase */\nimport * as firebase from \"firebase/app\";\n\n/* Auth and store modules */\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\n/* Views that we need */\nimport Auth from './pages/Auth';\nimport Loader from './pages/Loader';\nimport Onboarding from './pages/Onboarding';\nimport Home from './pages/Home';\n\n/* Localization Toolkit */\nimport LocalizedStrings from 'react-localization';\n\n/* AutoBind */\nconst autoBind = require('auto-bind/react');\n\n\n/* Storage Plugins */\nconst { Storage } = Plugins;\n\n\n/* \n * Hello human, good morning.\n *\n * Hope you are doing well. Thanks (why are you) visiting App.jsx?\n *\n * I manage global routing, auth handling, and all that jazz.\n * You should not touch me to change the interface.\n * But I guess I change the interface. So.\n *\n * I kind of change the interface?\n *\n * Anyways, I return one of Loader, Auth, or Home depending on auth state.\n *\n * And check for the auth state to determine which one to return\n *\n * It's not really a poem, isn't it.\n *\n * @Jemoka\n *\n */\n\nsetupConfig({ swipeBackEnabled: false, }); // globally disable swipe b/c we implemented our own\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        let localizations = new LocalizedStrings({\n            en: require(\"./static/I18n/main.json\"),\n            zh: require(\"./static/I18n/zh-CN.json\"),\n            de: require(\"./static/I18n/de-DE.json\"),\n        });\n\n        // TODO TODO remove this\n        //localizations.setLanguage(\"zh\");\n\n        // We start with setting our state. We don't know our user's UID (duh)\n        this.state = {authMode: \"loader\", uid: \"\", displayName: \"\", localizations};\n        \n        // We also set the theme based on the user's media query\n        if (window.matchMedia('(prefers-color-scheme:dark)').matches) {\n            $(\"body\").removeClass();\n            $(\"body\").addClass(\"condutiontheme-default-dark\");\n        }\n        else {\n            $(\"body\").removeClass();\n            $(\"body\").addClass(\"condutiontheme-default-light\");\n        }\n\n        // Make ourselves a nice gruntman\n        this.gruntman = new Gruntman(Engine);\n        this.gruntman.localizations = localizations;\n        // And AutoBind any and all functions\n        autoBind(this);\n    }\n\n    async componentDidMount() {\n        // This IS in fact the view\n        let view = this;\n\n        // Light the fire, kick the tires an instance \n        // of {firebase}, and initializing the firebase \n        // and json engines\n        await Engine.start({firebase}, \"firebase\", \"json\");\n\n\n        // ==Handling cached dispatch==\n        // So, do we have a condution_stotype? \n        Storage.get({key: 'condution_stotype'}).then((dbType) => {\n            switch (dbType.value) {\n                // If its firebase \n                case \"firebase\":\n                    // Check if we actually has a user\n                    firebase.auth().onAuthStateChanged(function(user) {\n                        if (!user)\n                            view.authDispatch({operation:\"logout\"});\n                        // If we have one, shift the engine into firebase mode\n                        else {\n                            Engine.use(\"firebase\", view.gruntman.requestRefresh);\n                            // Load the authenticated state, set authmode as \"firebase\" and supply the UID\n                            view.setState({authMode: \"firebase\", uid: user.uid, displayName: user.displayName});\n                        }\n                    })\n                    break;\n                // If its json\n                case \"json\":\n                    // Shift the engine into json mode\n                    Engine.use(\"json\", view.gruntman.requestRefresh);\n                    // Load the authenticated state, set the authmode as \"json\" and supply \"hard-storage-user\" as UID\n                    this.setState({authMode: \"json\", uid:\"hard-storage-user\"});\n                    break;\n                // If there is nothing, well, set the authmode as \"none\"\n                default:\n                    this.setState({authMode: \"none\", uid:undefined});\n                    break;\n            }\n        });\n    }\n\n    // authDispatch handles the dispatching of auth operations. {login, create, and logout}\n    authDispatch(mode) {\n        // TODO: that's a state machine! @zbuster05\n        let uid;\n        let name;\n        switch (mode.operation) {\n            // operation mode login\n            case \"login\":\n                // shift the engine into whatever mode we just logged into\n                Engine.use(mode.service, this.gruntman.requestRefresh);\n                // write the login state into cookies\n                Storage.set({key: 'condution_stotype', value: mode.service});\n                // get the UID\n\n                switch (mode.service) {\n                    // if its firebase\n                    case \"firebase\":\n                        // set the UID as the UID\n                        uid = firebase.auth().currentUser.uid;\n                        name = firebase.auth().currentUser.displayName\n                        break;\n                    default:\n                        // set the UID as \"hard-storage-user\"\n                        uid = \"hard-storage-user\";\n                        name = \"\"\n                        break;\n                }\n                // load the authenicated state and supply the UID\n                this.setState({authMode: mode.service, uid, displayName: name});\n                break;\n            // operation mode create\n            case \"create\":\n                // setthe engine as whatever service\n                Engine.use(mode.service, this.gruntman.requestRefresh);\n                Storage.set({key: 'condution_stotype', value: mode.service});\n                switch (mode.service) {\n                    // if its firebase\n                    case \"firebase\":\n                        // set the UID as the UID\n                        uid = firebase.auth().currentUser.uid;\n                        name = firebase.auth().currentUser.displayName\n                        break;\n                    default:\n                        // set the UID as \"hard-storage-user\"\n                        uid = \"hard-storage-user\";\n                        name = \"\"\n                        break;\n                }\n\n                // Here\n                this.setState({authMode: \"onboarding\", uid, displayName: name});\n                Engine.db.onBoard(uid, Intl.DateTimeFormat().resolvedOptions().timeZone, this.gruntman.localizations.getLanguage()===\"en\" ? \"there\": \"\", this.gruntman.localizations.onboarding_content).then(e=>this.setState({authMode: mode.service, uid, displayName: name}));\n                // TODO: be done with onboarding\n                // Set the storage type and write it into cookies\n                // load the authenicated state and TODO supply the UID\n                break;\n            case \"logout\":\n                // Set the storage type to nada and write it into cookies\n                Storage.set({key: 'condution_stotype', value: \"none\"});\n                // Sign out if we are signed in\n                firebase.auth().signOut();\n                // Load the auth view\n                this.setState({authMode: \"none\", name: \"\"});\n                break;\n        }\n    }\n\n    render() {\n        // Check for onboarding here\n        // then continue\n        // Which authmode?\n        switch (this.state.authMode) {\n            // if we are at the first-paint load mode, do this:\n            case \"loader\":\n                return <Loader />\n            // if we did not authenticate yet, load the auth view:\n            case \"none\":\n                return <Auth dispatch={this.authDispatch} localizations={this.state.localizations}/>;\n            // if we did auth, load it up and get the party going\n            case \"firebase\":\n            case \"json\":\n                return <Home engine={Engine} uid={this.state.uid} dispatch={this.authDispatch} gruntman={this.gruntman} displayName={this.state.displayName} localizations={this.state.localizations} authType={this.state.authMode}/>;\n            // wut esta this auth mode? load the loader with an error\n            case \"onboarding\":\n                return <Onboarding />\n            default:\n                console.error(`CentralDispatchError: Wut Esta ${this.state.authMode}`);\n                return <Loader isError={true} error={this.state.authMode}/>\n        }\n    }\n}\n\nexport default App;\n//class App extends Component {\n    //render() {\n        //return (\n            //<IonApp>\n                //<Home />\n            //</IonApp>\n        //);\n    //}\n//}\n\n/*export default App;*/\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","//\"use strict\";\n\n// Initialize Firebase Application\n// TODO TODO TODO !!!! Change this on deploy\n\nlet storageType;\nlet sqliteDB;\nlet memoryDB;\nlet firebaseDB, fsRef;\nlet requestRefresh;\n\nconst { FilesystemDirectory, FilesystemEncoding, Plugins } = require('@capacitor/core');\nconst { Device, Filesystem } = Plugins;\n\nlet readiness;\n\nconst initStorage = (payload, ...features) => {\n /*   // Firebase App (the core Firebase SDK) is always required and*/\n    //// must be listed before other Firebase SDKs\n    // const firebase = require(\"firebase/app\");\n\n    let loaders = [];\n\n    if (features.includes(\"firebase\")) {\n        const obj = require(\"./../secrets.json\");\n        if (process.env.NODE_ENV === \"development\")\n            payload.firebase.initializeApp(obj.dbkeys.debug);\n        else if (process.env.NODE_ENV === \"production\")\n            payload.firebase.initializeApp(obj.dbkeys.deploy);\n        [ firebaseDB, fsRef ] = [payload.firebase.firestore(), payload.firebase.firestore];\n        firebaseDB.enablePersistence({synchronizeTabs: true}).catch(console.error);\n        loaders.push(new Promise(function(resolve) {\n            return resolve(fsRef);\n        }));\n    } \n\n    if (features.includes(\"sqlite\")) {\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        // TODO: TODO: SQLITE 3!!\n        //const sqlite3 = require('sqlite3').verbose();   // see https://www.sqlitetutorial.net/sqlite-nodejs/connect/\n        const { FilesystemDirectory, Plugins } = require('@capacitor/core');\n        const { Device } = Plugins;\n        loaders.push((async function() {\n            const isMobile = (await Device.getInfo()).platform !== \"web\";\n            const dbRoot = isMobile ? FilesystemDirectory.Data : process.resourcesPath;\n            const dbPath = '/condution.db'; // TODO: use capacitor storage api\n            //sqliteDB = new sqlite3.Database(dbRoot+dbPath, (e)=>{if(e) console.error(e)});\n            return sqliteDB;\n        })());\n    } \n\n    if (features.includes(\"json\")) {\n        loaders.push((async function() {\n            const dbRoot = FilesystemDirectory.Data;\n            const dbPath = 'condution.json'; // TODO: use capacitor storage api\n            let contents;\n            try {\n                contents = (await Filesystem.readFile({\n                    path: dbPath,\n                    directory: dbRoot,\n                    encoding: FilesystemEncoding.UTF8\n                })).data;\n            } catch(e) {\n                contents = \"{}\";\n                await Filesystem.writeFile({\n                    path: dbPath,\n                    directory: dbRoot,\n                    data: JSON.stringify({}),\n                    encoding: FilesystemEncoding.UTF8\n                })\n            }\n            //contents = `{\"users\":{\"hard-storage-user\":{\"projects\":{\"asenuoth239p8\":{\"name\":\"bontehu\",\"is_sequential\":false,\"order\":0,\"parent\":\"\",\"top_level\":true, \"children\": []}}}}}`;\n            memoryDB = JSON.parse(contents);\n        })());\n    }\n\n    readiness = Promise.all(loaders);\n    return readiness;\n};\n\nconst useDb = (db, refresher=()=>{}) => {\n    storageType = db;\n    requestRefresh = refresher; // generate fresh refresher\n    return readiness;\n};\n\nconst [cRef, flush] = (() => {\n    //const { Plugins } = require('@capacitor/core');\n    //const { Network } = Plugins;\n\n    let cache = new Map();\n    let unsubscribeCallbacks = new Map();\n\n\n    function flush() {\n        /*\n         * Nukes the cache\n         *\n         * Used to log people out\n         *\n         * @return none\n         *\n         */\n        cache = new Map();\n        unsubscribeCallbacks = new Map();\n    }\n\n    function getFirebaseRef(path) {\n        /*\n         * Get a database reference.\n         *\n         * @param   path        A valid path array, see below.\n         * @return  reference   The generated reference\n         *\n         * Examples of valid path arrays:\n         *  [`collection/${docName}`] => DocumentReference\n         *  [\"collection\", \"docName\"] => DocumentReference\n         *  [\"collection\", \"docName\", \"collection\"] => CollectionReference\n         *  [\"collection\", [\"query\", \"params\"], [\"more\", \"params\"]] => Query\n         *  [\"collection\", [\"query\", \"params\"], \"docname\"] => DocumentReference\n         */\n        let ref = firebaseDB;\n        // special handling for first collection from root\n        console.assert(typeof path[0] === 'string');\n        if (path[0].includes('/'))\n            ref = ref.collectionGroup(path[0]);\n        else\n            ref = ref.collection(path[0]);\n        // generic handling\n        for (let nav of path.slice(1)) {\n            if (typeof nav === 'string') {\n                if (ref instanceof fsRef.DocumentReference) {\n                    ref = ref.collection(nav);\n                } else if (ref instanceof fsRef.Query) {\n                    ref = ref.doc(nav);\n                } else {\n                    throw new Error(\"Unknown reference\", ref.toString());\n                }\n            } else if (Array.isArray(nav)) {                // query, TODO shouldn't need to query\n                if (ref instanceof fsRef.Query) {\n                    ref = ref.where(...nav);\n                } else {\n                    throw new Error(\"Cannot query with\", nav.toString());\n                }\n                console.assert(ref instanceof fsRef.Query)\n            } else {\n                throw new Error(\"Cannot parse\", nav.toString());\n            }\n        }\n        return ref;\n    }\n\n    function generateRandomString() {\n        /*\n         * Generates a random string. Used for Ids.\n         * THIS IS NOT CRYPTOGRAPHICALLY SECURE\n         *\n         * @return  string  The random string\n         *\n         */\n\n        return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);\n    }\n\n    async function cachedRead(path) {   // TODO: make this also use hard storage, dupe for cachedSet\n        /*\n         * Get a snapshot from the cache.\n         *\n         * @param   path    The valid path to the reference\n         * @return  any     The result of calling `.get()` on the database reference\n         *\n         * Logic:\n         *  If the path is cached, return from cache.\n         *  Else, register a snapshot listener to update the cache\n         *      and return the newly cached value.\n         */\n        const TODOstring = JSON.stringify(path);        //  strigify to hash array\n        if (!cache.has(TODOstring)) {                   //  if path string isn't cached\n            // TODO: comment this out someday \\/\n            const ref = getFirebaseRef(path);           //  get the reference from the database\n            cache.set(TODOstring, ref.get());           //  save result in cache\n            unsubscribeCallbacks.set(TODOstring,        //  TODO: comment this code, someday\n                ref.onSnapshot({\n                    error: console.trace,\n                    next: (snap) => {\n                        cache.set(TODOstring, snap);\n                        requestRefresh();\n                    }\n                })\n            );\n        }\n        return await cache.get(TODOstring);\n    }\n\n    let diskJSONDB = function() {\n        const dbRoot = FilesystemDirectory.Data;\n        const dbPath = 'condution.json'; // TODO: use capacitor storage api\n        let read = async function() {\n            let contents = (await Filesystem.readFile({\n                path: dbPath,\n                directory: dbRoot,\n                encoding: FilesystemEncoding.UTF8\n            })).data;\n            memoryDB = JSON.parse(contents);\n        }\n\n        let write = async function() {\n            await Filesystem.writeFile({\n                path: dbPath,\n                directory: dbRoot,\n                data: JSON.stringify(memoryDB),\n                encoding: FilesystemEncoding.UTF8\n            })\n        }\n\n        return {read, write};\n    }()\n\n    async function storageRead(path) { \n        /*\n         * Read value in storage\n         *\n         * @param   path    The path to a reference\n         * @return  DocumentSnapshot    A snapshot of documents\n         *\n         */\n\n\n        let pointer;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Get an object pointer that's an option that\n             * looks like a noSQL object.  See JSON implimentation \n             * for tips and tricks.\n             *\n             */\n\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.some(i => {\n                pointer = pointer[i];\n                return (pointer === undefined); // https://stackoverflow.com/questions/2641347/short-circuit-array-foreach-like-calling-break\n            });\n        }\n\n        let parsed = (function parsePointer(pointer) {\n            /*\n             * Parse a dbPointerObject\n             *\n             * @param    pointer   A Javascript Object containing data\n             * @return   DocumentSnapshot   A Firebase-like Doc Snapshot\n             *\n             * TODO: also make this work for single documents, not just collections\n             */\n\n            let docRefs = [];\n            for (const docID in pointer) \n                docRefs.push({id: docID, data: ()=>Object.assign({}, pointer[docID]), exists: true}); // TODO TODO Better way to make JS objects immutable?\n            return {docs: docRefs}\n        })(pointer)\n        return parsed;\n    }\n\n    async function storageAdd(path, payload) {\n        /* \n         * Add a value\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            id = generateRandomString();\n            while (pointer[id]) id = generateRandomString();\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer[id] = payload;\n            await diskJSONDB.write();\n        }\n        return Object.assign({}, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n    async function storageDel(path) {\n        /* \n         * Sets the value of a document\n         *\n         * @param   path   Document Path\n         * @return  none\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            let task = path.pop();\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            delete pointer[task];\n            await diskJSONDB.write();\n        }\n    }\n\n    async function storageSet(path, payload) {\n        /* \n         * Sets the value of a document\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            let task = path.pop();\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer[task] = payload;\n            await diskJSONDB.write();\n        }\n        return Object.assign({}, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n    async function storageUpdate(path, payload) {\n        /* \n         * Object.assigns the value of a document\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer = Object.assign(pointer, payload);\n            await diskJSONDB.write();\n        }\n        return Object.assign(payload, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n\n\n    //async function storageSet(path, value) {\n        /*\n         * Set a value in the storage.\n         *\n         * @param   path    The valid path to reference\n         * @param   value   The value to set it to\n         * @return  none\n         */\n    //    const TODOstring = JSON.stringify(path);    // stringify array, please change someday\n    //    // update storage\n    //    if (decideWhetherToUseHardStorage())\n    //\n    //    // maintain the cache\n    //    if (!cache.has(TODOstring)) {\n    //        cache.set();\n    //    }\n    //    const ref = getFirebaseRef(path);\n    //    ref.set(value);\n    //    cache.set(stringPath, value)\n    //}\n\n    function cacheRef(path) {\n        /*\n         * Get a reference wrapper that forces cache hits.\n         * This function will be exposed to the outside world.\n         *\n         * @param   path    A valid path array.\n         * @return  wrapper A wrapper object around the expected reference.\n         */\n        //console.log(getFirebaseRef(path));\n        \n        \n        return Object.assign(\n            getFirebaseRef(path),               //  default methods from firebase reference\n            { get: () => cachedRead(path) }     //  read on get, read from cache if available\n        );\n    }\n    function TODO() { console.error('bad news bears'); }\n    function storageRef(path) {\n        /*\n         * Get a reference wrapper that acts as a database blackbox.\n         *\n         * @param   path    A valid path array.\n         * @return  wrapper A wrapper object around the expected reference.\n         */\n        //console.log(ref.add, ref.doc, ref.docs);\n        return {\n            id: TODO,\n            add: (payload) => storageAdd(path, payload),\n            //doc: not here, right?,\n            //docs: not here, rgiht?, // TODO: docs.filter\n            get: () => storageRead(path),\n            set: (payload) => storageSet(path, payload),\n            update: (payload) => storageUpdate(path, payload),\n            delete: () => storageDel(path),\n        };\n    }\n\n    function dispatch(...path) {\n        /* \n         * Get the currently initialized storageRef\n         *\n         * @return  storageRef/CacheRef\n         *\n         */\n\n        switch (storageType) {\n            case \"firebase\":\n                return cacheRef(path);\n            default:\n                return storageRef(path);\n        }\n    }\n\n    return [dispatch, flush];\n})();\n\nexport default {__init__:initStorage, cRef, flush, useDb};\n\n"],"sourceRoot":""}